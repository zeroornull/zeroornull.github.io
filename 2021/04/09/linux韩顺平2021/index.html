<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="theme-color" content="#123456"><meta name="generator" content="Hexo 4.2.0"><meta><title>linux韩顺平2021笔记 - Zeroornull</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#3273dc"><meta name="application-name" content="zeroornull"><meta name="msapplication-TileImage" content="icons/touch-icon-iphone.png"><meta name="msapplication-TileColor" content="#3273dc"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="zeroornull"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="144x144" href="icons/touch-icon-iphone.png"><link rel="apple-touch-icon" sizes="152x152" href="icons/touch-icon-ipad.png"><link rel="apple-touch-icon" sizes="72x72" href="icon/logo.ico"><link rel="apple-touch-icon" sizes="96x96" href="icon/logo.ico"><link rel="apple-touch-icon" sizes="128x128" href="icon/logo.ico"><link rel="apple-touch-icon" sizes="256x256" href="icon/logo.ico"><meta name="description" content="linux韩顺平2021笔记"><meta property="og:type" content="blog"><meta property="og:title" content="linux韩顺平2021笔记"><meta property="og:url" content="https://zeroornull.github.io/2021/04/09/linux%E9%9F%A9%E9%A1%BA%E5%B9%B32021/"><meta property="og:site_name" content="Zeroornull"><meta property="og:description" content="linux韩顺平2021笔记"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103555.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102101.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102121.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102129.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102133.png"><meta property="og:image" content="https://zeroornull.github.io/2021/04/09/linux%E9%9F%A9%E9%A1%BA%E5%B9%B32021/linux韩顺平2021.assets/image-20210115140531445.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102137.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102141.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102146.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102152.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102156.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102200.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102205.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102210.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102214.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102219.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102223.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102227.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102231.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102235.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102240.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102244.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102248.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102251.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102256.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102301.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102317.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102322.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102327.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102332.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102336.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102340.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102344.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102348.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102353.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102357.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102402.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102406.png"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102409.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102413.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102417.jpg"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102420.jpg"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102425.jpg"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507102428.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103217.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103221.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103225.png"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f515.png?v8"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f595.png?v8"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png?v8"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103229.png"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f617.png?v8"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103232.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103235.png"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f915.png?v8"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f3ed.png?v8"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f912.png?v8"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f44a.png?v8"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103238.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103242.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103246.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103249.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103252.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103257.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103301.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103305.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103308.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103311.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103314.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103318.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103321.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103324.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103328.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103331.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103334.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103337.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103355.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103400.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103408.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103412.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103416.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103420.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103422.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103426.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103429.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103432.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103435.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103438.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103441.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103443.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103446.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103449.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103451.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103454.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103457.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103500.png"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103503.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103506.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103509.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103512.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103515.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103518.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103521.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103524.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103527.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103530.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103533.png"><meta property="og:image" content="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103536.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103539.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103542.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103545.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103548.png"><meta property="og:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103551.png"><meta property="article:published_time" content="2021-04-09T03:37:42.000Z"><meta property="article:modified_time" content="2021-08-02T05:47:02.889Z"><meta property="article:author" content="Zeroornull"><meta property="article:tag" content="linux"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://gitee.com/penno/blogimg/raw/master/img/20210507103555.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://zeroornull.github.io/2021/04/09/linux%E9%9F%A9%E9%A1%BA%E5%B9%B32021/"},"headline":"linux韩顺平2021笔记","image":["https://gitee.com/penno/blogimg/raw/master/img/20210507103555.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102101.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102121.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102129.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102133.png","https://zeroornull.github.io/2021/04/09/linux%E9%9F%A9%E9%A1%BA%E5%B9%B32021/linux韩顺平2021.assets/image-20210115140531445.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102137.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102141.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102146.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102152.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102156.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102200.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102205.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102210.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102214.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102219.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102223.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102227.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102231.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102235.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102240.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102244.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102248.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102251.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102256.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102301.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102317.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102322.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102327.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102332.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102336.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102340.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102344.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102348.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102353.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102357.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102402.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102406.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102409.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102413.png","https://gitee.com/penno/blogimg/raw/master/img/20210507102417.jpg","https://gitee.com/penno/blogimg/raw/master/img/20210507102420.jpg","https://gitee.com/penno/blogimg/raw/master/img/20210507102425.jpg","https://gitee.com/penno/blogimg/raw/master/img/20210507102428.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103217.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103221.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103225.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103229.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103232.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103235.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103238.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103242.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103246.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103249.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103252.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103257.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103301.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103305.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103308.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103311.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103314.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103318.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103321.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103324.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103328.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103331.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103334.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103337.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103355.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103400.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103408.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103412.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103416.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103420.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103422.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103426.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103429.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103432.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103435.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103438.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103441.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103443.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103446.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103449.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103451.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103454.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103457.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103500.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103503.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103506.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103509.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103512.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103515.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103518.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103521.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103524.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103527.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103530.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103533.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103536.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103539.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103542.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103545.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103548.png","https://gitee.com/penno/blogimg/raw/master/img/20210507103551.png"],"datePublished":"2021-04-09T03:37:42.000Z","dateModified":"2021-08-02T05:47:02.889Z","author":{"@type":"Person","name":"Zeroornull"},"description":"linux韩顺平2021笔记"}</script><link rel="canonical" href="https://zeroornull.github.io/2021/04/09/linux%E9%9F%A9%E9%A1%BA%E5%B9%B32021/"><link rel="alternate" href="/path/to/atom.xml" title="Zeroornull" type="application/atom+xml"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!-->
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Zeroornull</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com">GitHub</a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/zeroornull"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-04-09T03:37:42.000Z" title="2021/4/9 上午11:37:42">2021-04-09</time>发表</span><span class="level-item"><time dateTime="2021-08-02T05:47:02.889Z" title="2021/8/2 下午1:47:02">2021-08-02</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/linux/">linux</a></span><span class="level-item">3 小时读完 (大约26937个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">linux韩顺平2021笔记</h1><div class="content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>  最近的linux学习笔记</p>
<span id="more"></span>

<h1 id="linux韩顺平2021"><a href="#linux韩顺平2021" class="headerlink" title="linux韩顺平2021"></a>linux韩顺平2021</h1><h2 id="p1-课程内容"><a href="#p1-课程内容" class="headerlink" title="p1 课程内容"></a>p1 课程内容</h2><h3 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h3><p>Linux入门</p>
<p>vm和linux的安装</p>
<p>Linux目录结构</p>
<h3 id="实际操作篇"><a href="#实际操作篇" class="headerlink" title="实际操作篇"></a>实际操作篇</h3><p>远程登陆（Xshell XFtp）</p>
<p>实用指令</p>
<p>进程管理</p>
<p>用户管理</p>
<p>Vi和Vim管理</p>
<p>定时任务调度</p>
<p>RPM和YUM</p>
<p>开机，重启和用户登陆注销</p>
<p>磁盘分区，挂载</p>
<p>网络配置</p>
<h3 id="2021高级篇"><a href="#2021高级篇" class="headerlink" title="2021高级篇"></a>2021高级篇</h3><p>日志管理</p>
<p>Linux内核源码&amp;内核升级</p>
<p>定制自己的Linux</p>
<p>Linux备份和恢复</p>
<p>Linux可视化管理webmin和bt运维工具</p>
<p>Linux入侵检测&amp;权限划分&amp;系统优化</p>
<p>Linux面试题（腾讯，百度，美团，滴滴 ）</p>
<h2 id="p2-应用领域"><a href="#p2-应用领域" class="headerlink" title="p2 应用领域"></a>p2 应用领域</h2><h2 id="p3-概述"><a href="#p3-概述" class="headerlink" title="p3 概述"></a>p3 概述</h2><h2 id="p4-Linux和Unix"><a href="#p4-Linux和Unix" class="headerlink" title="p4 Linux和Unix"></a>p4 Linux和Unix</h2><h2 id="p5-vmware15-5安装"><a href="#p5-vmware15-5安装" class="headerlink" title="p5 vmware15.5安装"></a>p5 vmware15.5安装</h2><p>下载链接：<a target="_blank" rel="noopener" href="https://www.nocmd.com/windows/740.html">https://www.nocmd.com/windows/740.html</a></p>
<h2 id="p6-centOS7-6安装"><a href="#p6-centOS7-6安装" class="headerlink" title="p6 centOS7.6安装"></a>p6 centOS7.6安装</h2><p>下载链接：<a target="_blank" rel="noopener" href="http://mirrors.163.com/centos/7.6.1810/isos/x86_64/CentOS-7-x86_64-DVD-1810.iso">http://mirrors.163.com/centos/7.6.1810/isos/x86_64/CentOS-7-x86_64-DVD-1810.iso</a></p>
<p>linux分区：3个区</p>
<p>boot 引导分区 1g</p>
<p>swap 交换分区 和内存大小一致2g 可以临时充当内存</p>
<p>根分区 17g</p>
<h2 id="p7-网络连接的三种方式"><a href="#p7-网络连接的三种方式" class="headerlink" title="p7 网络连接的三种方式"></a>p7 网络连接的三种方式</h2><p><strong>桥接模式</strong></p>
<p>会直接占用网段，会造成256个不够用</p>
<p>虚拟系统可以和外部系统通讯，但是容易造成IP冲突</p>
<p><strong>NAT模式</strong></p>
<p>网络地址转换模式</p>
<p>虚拟系统可以和外部系统通讯，而且不造成IP冲突</p>
<p><strong>主机模式</strong></p>
<p>不和外部通讯</p>
<h2 id="p8-虚拟机克隆"><a href="#p8-虚拟机克隆" class="headerlink" title="p8 虚拟机克隆"></a>p8 虚拟机克隆</h2><p>用于快速构建集群</p>
<p>方式一 直接拷贝一份安装好的虚拟机文件</p>
<p>方式二 使用vmware的克隆操作（需要先关闭linux系统）</p>
<p>​    克隆方法</p>
<p>​        1.创建链接克隆（这只是引用）</p>
<p>​        2.创建完整克隆（这个是拷贝）</p>
<h2 id="p9-虚拟机快照"><a href="#p9-虚拟机快照" class="headerlink" title="p9 虚拟机快照"></a>p9 虚拟机快照</h2><p>在进行一些不确定的操作时，用于恢复原先的某个状态，也叫快照管理</p>
<p>快照会占用一定空间</p>
<h2 id="p10-虚拟机迁移和删除"><a href="#p10-虚拟机迁移和删除" class="headerlink" title="p10 虚拟机迁移和删除"></a>p10 虚拟机迁移和删除</h2><h2 id="p11-vmtools"><a href="#p11-vmtools" class="headerlink" title="p11 vmtools"></a>p11 vmtools</h2><p>安装后，在windows下更容易管理vm虚拟机，可以设置windows和centos的共享文件夹</p>
<p>1.进入centOS</p>
<p>2.点击vm菜单的-&gt;install vmware tools</p>
<p>3.centos会出现一个vm安装包，xx.tar.gz</p>
<p>4.拷贝到/opt</p>
<p>5.使用解压命令tar,得到一个安装文件</p>
<p>cd /opt</p>
<p>tar -zxvf</p>
<p>./ 进行安装</p>
<p>可能会出现一些问题</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/feiquan/p/9326870.html">参考链接</a></p>
<p>6.进入该vm解压的目录，/opt目录下</p>
<p>7.安装./vmware-install.pl</p>
<p>8.全部使用默认设置即可安装成功</p>
<p>9.注意：安装vmtools需要有gcc</p>
<p>主机的共享文件夹需要在vmware中设置</p>
<p>共享文件夹位置在/mnt/hgfs/</p>
<h2 id="p12-第4章-linux目录结构"><a href="#p12-第4章-linux目录结构" class="headerlink" title="p12 第4章 linux目录结构"></a>p12 第4章 linux目录结构</h2><p>linux采用层级树状结构，最上层根目录/</p>
<p>/root root用户的目录</p>
<p>/home 每创建一个用户都会出现一个用户的主目录</p>
<p>/bin 常用指令 环境设置 之类的文件 Binary</p>
<p>/sbin s代表Super user的意思</p>
<p>/etc 系统管理所需要的配置文件和子目录  比如安装了mysql数据库 my.conf </p>
<p>/boot 系统启动相关 核心文件，包括一些连接文件以及镜像文件</p>
<p>/dev 设备管理器 linux会把所有的硬件映射成一个文件管理 一切皆文件</p>
<p>/media 自动识别设备挂载到这个目录下</p>
<p>/lib 系统开机所需要的最基本的动态连接共享库，作用类似Windows里的DDL文件。几乎所有的应用程序都需要用到这些共享库</p>
<p>/lost+found 一般是空的，当系统非法关机后，这里就存放了一些文件</p>
<p>/usr 用户很多应用程序和文件都放在这个目录下，类似windows下的program files 目录</p>
<p>/proc 这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息</p>
<p>/srv service缩写，存放一些服务启动之后需要提取的数据</p>
<p>/sys linux2.6内核很大的一个变化 。安装了新出现的文件系统 sysfs</p>
<p>/tmp 存放临时文件</p>
<p>/mnt 为了让用户临时挂载别的文件系统，我们可以把外部存储挂载在/mnt/上，然后进入该目录就可以查看里面的内容了。d:/myshare</p>
<p>/opt 这是主机额外安装软件（约定俗成）所摆放的目录。如安装Oracle数据库就可摆放在该目录下</p>
<p>挂载：例如将myshare文件夹挂载在/mnt/hgfs目录下</p>
<p>/usr/local 额外安装软件所安装的目录，一般通过编译源码的方式安装的程序</p>
<p>/var 这个目录存放着不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。包括各种日志文件</p>
<p>/selinux[security-enhanced linux]</p>
<p>SELinux是一种安全子系统，它能控制程序只能访问特定文件；三种工作模式，可以自行设置，需要启用</p>
<h2 id="p13-第5章-远程登录到Linux服务器"><a href="#p13-第5章-远程登录到Linux服务器" class="headerlink" title="p13 第5章 远程登录到Linux服务器"></a>p13 第5章 远程登录到Linux服务器</h2><h2 id="p14-远程登录"><a href="#p14-远程登录" class="headerlink" title="p14 远程登录"></a>p14 远程登录</h2><p>xshell6</p>
<h2 id="p15-远程文件传输"><a href="#p15-远程文件传输" class="headerlink" title="p15 远程文件传输"></a>p15 远程文件传输</h2><p>xftp6</p>
<h2 id="p16-vi和vim编辑器"><a href="#p16-vi和vim编辑器" class="headerlink" title="p16 vi和vim编辑器"></a>p16 vi和vim编辑器</h2><h3 id="常用三种模式"><a href="#常用三种模式" class="headerlink" title="常用三种模式"></a>常用三种模式</h3><p>正常模式</p>
<p>插入模式 iIoOaArR</p>
<p>命令行模式 输入”esc” + “:” 或 “/“ 再输入:wq “wq”代表写入并退出</p>
<h2 id="p17-vi和vim快捷键"><a href="#p17-vi和vim快捷键" class="headerlink" title="p17 vi和vim快捷键"></a>p17 vi和vim快捷键</h2><p>命令行模式输入 </p>
<p>:wq(保存退出)</p>
<p>:q(退出)</p>
<p>:q!(强制退出，不保存)</p>
<p>拷贝当前行 yy    拷贝当前行向下五行 5yy     粘贴 p</p>
<p>删除当前行 dd    删除当前行向下五行 5dd </p>
<p>查找 / + 所需的字段 n键用来切换</p>
<p>:setnu 显示行号 :setnonu 关闭显示行号</p>
<p>文档最末行 G   最首行  gg     这些快捷键在一般模式下使用即可</p>
<p>指定行数 输入行号 + shift +g</p>
<p>撤销操作 一般模式下 按 u</p>
<h2 id="p18-vi-vim-内容整理"><a href="#p18-vi-vim-内容整理" class="headerlink" title="p18 vi vim 内容整理"></a>p18 vi vim 内容整理</h2><h2 id="p19-第七章-开机、重启和用户注销"><a href="#p19-第七章-开机、重启和用户注销" class="headerlink" title="p19 第七章 开机、重启和用户注销"></a>p19 第七章 开机、重启和用户注销</h2><p>shutdown -h now    立刻进行关机</p>
<p>shutdown -h 1    “hello,1分钟后会关机了”</p>
<p>shutdown -r now 现在重新启动计算机</p>
<p>halt    关机，作用和上面一样</p>
<p>reboot    现在重启</p>
<p>sync    内存同步到磁盘</p>
<p>不论重启还是关闭系统，首先要运行sync指令，同步内存至磁盘</p>
<p>目前的shutdown/reboot/halt命令均已经在关机前进行了sync    建议还是先运行sync命令</p>
<h2 id="p20-登录注销"><a href="#p20-登录注销" class="headerlink" title="p20 登录注销"></a>p20 登录注销</h2><p>su - 用户名 为切换用户</p>
<p>logout在图形级界面运行级别是无效的 在运行级别3下有效</p>
<h2 id="p21-用户管理"><a href="#p21-用户管理" class="headerlink" title="p21 用户管理"></a>p21 用户管理</h2><h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><p>useradd 用户名</p>
<p>1.创建用户成功后，会自动创建和用户名同名的home目录</p>
<p>2.也可以通过useradd -d 指定目录 新的用户名，给新创建的用户指定家目录</p>
<p>指定/修改密码</p>
<p>passwd 用户名（不写用户名会给当前登录的用户更改密码）</p>
<p>显示当前用户 pwd</p>
<p>删除用户但是不删除家目录</p>
<p>userdel  用户名</p>
<p>删除用户以及家目录</p>
<p>userdel -r 用户名    操作慎重 这样删除会把用户家目录所有内容删除</p>
<p>一般情况下建议保留家目录</p>
<h2 id="p22-查询用户信息指令"><a href="#p22-查询用户信息指令" class="headerlink" title="p22 查询用户信息指令"></a>p22 查询用户信息指令</h2><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><p>id 用户名</p>
<h3 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h3><p>su - 切换用户名</p>
<p>权限高的用户切换到权限低的不需要输入密码，反之需要</p>
<p>返回到原来的用户 exit/logout</p>
<h3 id="查看当前用户-登录用户"><a href="#查看当前用户-登录用户" class="headerlink" title="查看当前用户/登录用户"></a>查看当前用户/登录用户</h3><h4 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h4><p>whoami/Who am I</p>
<h2 id="p23-用户组"><a href="#p23-用户组" class="headerlink" title="p23 用户组"></a>p23 用户组</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>类似于角色，系统可对有共性的多个用户进行统一的管理</p>
<h3 id="新增组"><a href="#新增组" class="headerlink" title="新增组"></a>新增组</h3><p>指令：groupadd 组名</p>
<h3 id="删除组"><a href="#删除组" class="headerlink" title="删除组"></a>删除组</h3><p>groupdel 组名</p>
<h3 id="增加用户时直接加上组"><a href="#增加用户时直接加上组" class="headerlink" title="增加用户时直接加上组"></a>增加用户时直接加上组</h3><p>useradd -g 用户组 用户名</p>
<h3 id="修改用户的组"><a href="#修改用户的组" class="headerlink" title="修改用户的组"></a>修改用户的组</h3><p>usermod -g 用户组 用户名</p>
<h3 id="用户和组相关文件"><a href="#用户和组相关文件" class="headerlink" title="用户和组相关文件"></a>用户和组相关文件</h3><h4 id="etc-password-文件"><a href="#etc-password-文件" class="headerlink" title="/etc/password 文件"></a>/etc/password 文件</h4><p>用户的配置文件</p>
<p>用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录shell</p>
<h4 id="etc-shadow-文件"><a href="#etc-shadow-文件" class="headerlink" title="/etc/shadow 文件"></a>/etc/shadow 文件</h4><p>口令配置文件</p>
<p>登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间标志</p>
<p>/etc/group 文件</p>
<p>组配置文件</p>
<p>组名:口令:组标志号:组内用户列表</p>
<h2 id="p24-用户管理总结"><a href="#p24-用户管理总结" class="headerlink" title="p24 用户管理总结"></a>p24 用户管理总结</h2><h2 id="p25-第九章-实用指令"><a href="#p25-第九章-实用指令" class="headerlink" title="p25 第九章 实用指令"></a>p25 第九章 实用指令</h2><h3 id="指定运行级别"><a href="#指定运行级别" class="headerlink" title="指定运行级别"></a>指定运行级别</h3><p>基本介绍</p>
<p>0：关机</p>
<p>1：单用户【找回丢失密码】</p>
<p>2：多用户状态没有网络服务</p>
<p>3：多用户状态有网络服务</p>
<p>4：系统未使用保留给用户</p>
<p>5：图形界面</p>
<p>6：系统重启</p>
<p>常用运行级别为3和5，也可以指定默认运行级别</p>
<p>init[0123456]</p>
<p>在centos7之前,/etc/inittab文件中指定</p>
<p>简化为</p>
<p>multi-user.target:analogous to runlevel 3</p>
<p>graphical.target:analagous to runlevel 5</p>
<p>当前运行级别 systemctl get-default</p>
<p>systemctl set-default TARGET.target</p>
<h2 id="p26-如何找回root密码"><a href="#p26-如何找回root密码" class="headerlink" title="p26 如何找回root密码"></a>p26 如何找回root密码</h2><p><a target="_blank" rel="noopener" href="https://blog.51cto.com/10802692/2398040?source=dra">参考链接</a></p>
<h2 id="p27-帮助指令"><a href="#p27-帮助指令" class="headerlink" title="p27 帮助指令"></a>p27 帮助指令</h2><p>man 命令或配置文件</p>
<p>Linux下,隐藏文件以.开头    选项可以组合使用</p>
<p>help 命令</p>
<h2 id="p28-文件目录类"><a href="#p28-文件目录类" class="headerlink" title="p28 文件目录类"></a>p28 文件目录类</h2><h3 id="pwd-指令"><a href="#pwd-指令" class="headerlink" title="pwd 指令"></a>pwd 指令</h3><p>显示当前工作目录绝对路径</p>
<h3 id="ls-指令"><a href="#ls-指令" class="headerlink" title="ls 指令"></a>ls 指令</h3><p>ls 目录或文件</p>
<p>常用选项</p>
<p>-a 所有</p>
<p>-l 列表</p>
<p>应用实例</p>
<p>查看当前目录所有内容信息</p>
<h3 id="cd指令"><a href="#cd指令" class="headerlink" title="cd指令"></a>cd指令</h3><p>cd ~ 或者cd  :回到自己的家目录</p>
<p>cd.. 回到当前目录的上一级目录</p>
<h2 id="p28-文件目录类（2）"><a href="#p28-文件目录类（2）" class="headerlink" title="p28 文件目录类（2）"></a>p28 文件目录类（2）</h2><h3 id="mkdir指令"><a href="#mkdir指令" class="headerlink" title="mkdir指令"></a>mkdir指令</h3><p>创建目录 mkdir 要创建的目录</p>
<p>常见选项 </p>
<p>-p：创建多级目录 </p>
<p>案例一：创建一个目录 /home/dog</p>
<p>mkdir /home/dog</p>
<p>案例二：创建一个多级目录 /home/animal/tiger</p>
<p>mkdir -p /home/animal/tiger</p>
<h3 id="rmdir指令"><a href="#rmdir指令" class="headerlink" title="rmdir指令"></a>rmdir指令</h3><p>删除空目录</p>
<p>rmdir 要删除的空目录</p>
<p>案例：删除一个目录 /home/dog</p>
<p>细节注意：删除的是空目录，有内容则无法删除</p>
<p>如果要删除非空目录，需要使用 rm-rf 要删除的目录</p>
<p>例：rm -rf /home/animal</p>
<h3 id="touch-指令"><a href="#touch-指令" class="headerlink" title="touch 指令"></a>touch 指令</h3><p>创建空文件</p>
<p>touch 文件名称</p>
<p>案例：创建一个空文件 hello.txt</p>
<h2 id="p30-文件目录指令（3）"><a href="#p30-文件目录指令（3）" class="headerlink" title="p30 文件目录指令（3）"></a>p30 文件目录指令（3）</h2><h3 id="cp指令"><a href="#cp指令" class="headerlink" title="cp指令"></a>cp指令</h3><p>拷贝文件到指定目录</p>
<p>cp [选项] source dest</p>
<p>常用选项</p>
<p>-r：递归复制整个文件夹</p>
<p>cp hello.txt /home/bbb</p>
<p>cp -r /home/bbb /opt/</p>
<p>\cp 表示强制覆盖不提示</p>
<h3 id="rm指令"><a href="#rm指令" class="headerlink" title="rm指令"></a>rm指令</h3><p>移除文件或目录</p>
<p>rm [选项] 要删除的文件或目录</p>
<p>常用选项：</p>
<p>-r：递归删除整个文件夹</p>
<p>-f：强制删除不提示</p>
<p>案例一：将/home/hello.txt 删除，rm /home/hello.txt</p>
<p>案例二：递归删除整个文件夹 /home/bbb，rm -rf /home/bbb</p>
<h2 id="p31-文件目录指令（4）"><a href="#p31-文件目录指令（4）" class="headerlink" title="p31 文件目录指令（4）"></a>p31 文件目录指令（4）</h2><h3 id="mv指令"><a href="#mv指令" class="headerlink" title="mv指令"></a>mv指令</h3><p>mv移动文件与目录或重命名</p>
<p>基本语法</p>
<p>mv oldNameFile newNameFile （功能描述：重命名）</p>
<p>mv /temp/movefile /targetFolder (功能描述：移动文件)</p>
<p>实例</p>
<p>案例一：将/home/cat.txt 文件 重新命名为pig.txt</p>
<p>案例二：将/home/pig.txt 文件 移动到/root目录下</p>
<p>案例三：移动整个目录</p>
<h3 id="cat指令"><a href="#cat指令" class="headerlink" title="cat指令"></a>cat指令</h3><p>cat 查看文件内容</p>
<p>基本用法</p>
<p>​    cat [选项] 要查看的文件</p>
<p>常用选项</p>
<p>​    -n：显示行号</p>
<p>cat只能浏览文件，而不能修改文件，为了浏览方便，一般会带上 管道命令| more</p>
<p>管道指的是 将前面得到的结果交给后面的指令来完成</p>
<h3 id="more-指令"><a href="#more-指令" class="headerlink" title="more 指令"></a>more 指令</h3><p>基于vi编辑器的文本过滤器，全屏幕按页显示文本文件内容。more指令中内置了若干快捷键</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103555.png" alt="image-20201225135544255"></p>
<p>基本语法：</p>
<p>more 要查看的文件</p>
<h3 id="less指令"><a href="#less指令" class="headerlink" title="less指令"></a>less指令</h3><p>分屏查看文件内容，功能与more类似，但比more更加强大，支持各种显示终端。less指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于大型文件具有更高的效率。</p>
<p>基本语法</p>
<p>less 要查看的文件</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102101.png" alt="image-20201225140138011"></p>
<p>应用实例</p>
<p>案例: 采用less 查看一个大文件文件 /opt/杂文.txt</p>
<p>less /opt/杂文.txt</p>
<h3 id="echo-指令"><a href="#echo-指令" class="headerlink" title="echo 指令"></a>echo 指令</h3><p>echo 输出内容到控制台</p>
<p>基本语法</p>
<p>echo [选项] [输出内容]</p>
<p>应用实例</p>
<p>案例: 使用echo 指令输出环境变量, 比如输出    $PATH     $HOSTNAME,     echo $HOSTNAME</p>
<p>案例: 使用echo 指令输出hello,world!</p>
<h3 id="head-指令"><a href="#head-指令" class="headerlink" title="head 指令"></a>head 指令</h3><p>head 用于显示文件的开头部分内容，默认情况下head 指令显示文件的前10 行内容</p>
<p>基本语法</p>
<p>head 文件(功能描述：查看文件头10 行内容)</p>
<p>head -n 5 文件(功能描述：查看文件头5 行内容，5 可以是任意行数)</p>
<p>应用实例</p>
<p>案例: 查看/etc/profile 的前面5 行代码</p>
<p>head -n 5 /etc/profile</p>
<h3 id="tail-指令"><a href="#tail-指令" class="headerlink" title="tail 指令"></a>tail 指令</h3><p>tail 用于输出文件中尾部的内容，默认情况下tail 指令显示文件的前10 行内容。</p>
<p>基本语法</p>
<ol>
<li><p>tail 文件（功能描述：查看文件尾10 行内容）</p>
</li>
<li><p>tail -n 5 文件（功能描述：查看文件尾5 行内容，5 可以是任意行数）</p>
</li>
<li><p>tail -f 文件（功能描述：实时追踪该文档的所有更新）</p>
</li>
</ol>
<p>应用实例</p>
<p>案例1: 查看/etc/profile 最后5 行的代码</p>
<p>tail -n 5 /etc/profile</p>
<p>案例2: 实时监控mydate.txt , 看看到文件有变化时，是否看到， 实时的追加hello,world</p>
<p>tail -f /home/mydate.txt</p>
<h3 id="gt-指令和-gt-gt-指令"><a href="#gt-指令和-gt-gt-指令" class="headerlink" title="> 指令和>> 指令"></a>&gt; 指令和&gt;&gt; 指令</h3><p>  &gt; 输出重定向（覆盖）和&gt;&gt; 追加</p>
<p>基本语法</p>
<ol>
<li><p>ls -l &gt;文件（功能描述：列表的内容写入文件a.txt 中（覆盖写））</p>
</li>
<li><p>ls -al &gt;&gt;文件（功能描述：列表的内容追加到文件aa.txt 的末尾）</p>
</li>
<li><p>cat 文件1 &gt; 文件2 （功能描述：将文件1 的内容覆盖到文件2）</p>
</li>
<li><p>echo “内容”&gt;&gt; 文件(追加)</p>
</li>
</ol>
<p>应用实例</p>
<p>案例1: 将/home 目录下的文件列表写入到/home/info.txt 中, 覆盖写入</p>
<p>ls -l /home &gt; /home/info.txt [如果info.txt 没有，则会创建]</p>
<p>案例2: 将当前日历信息追加到/home/mycal 文件中</p>
<p>指令为： cal &gt;&gt; /home/mycal</p>
<h3 id="ln-指令"><a href="#ln-指令" class="headerlink" title="ln 指令"></a>ln 指令</h3><p>link</p>
<p>软链接也称为符号链接，类似于windows 里的快捷方式，主要存放了链接其他文件的路径</p>
<p>基本语法</p>
<p>ln -s [原文件或目录] [软链接名] （功能描述：给原文件创建一个软链接）</p>
<p>应用实例</p>
<p>案例1: 在/home 目录下创建一个软连接myroot，连接到/root 目录</p>
<h3 id="history-指令"><a href="#history-指令" class="headerlink" title="history 指令"></a>history 指令</h3><p>查看已经执行过历史命令,也可以执行历史指令</p>
<p>基本语法</p>
<p>history （功能描述：查看已经执行过历史命令）</p>
<p>应用实例</p>
<p>案例1: 显示所有的历史命令</p>
<p>history</p>
<p>案例2: 显示最近使用过的10 个指令。</p>
<p>history 10</p>
<p>案例3：执行历史编号为5 的指令</p>
<p>!5</p>
<h2 id="p34-时间日期类"><a href="#p34-时间日期类" class="headerlink" title="p34 时间日期类"></a>p34 时间日期类</h2><h3 id="时间日期类"><a href="#时间日期类" class="headerlink" title="时间日期类"></a>时间日期类</h3><h3 id="date-指令-显示当前日期"><a href="#date-指令-显示当前日期" class="headerlink" title="date 指令-显示当前日期"></a>date 指令-显示当前日期</h3><p>基本语法</p>
<ol>
<li>date （功能描述：显示当前时间）</li>
<li>date +%Y （功能描述：显示当前年份）</li>
<li>date +%m（功能描述：显示当前月份）</li>
<li>date +%d （功能描述：显示当前是哪一天）</li>
<li>date “+%Y-%m-%d %H:%M:%S”（功能描述：显示年月日时分秒）</li>
</ol>
<p>应用实例<br>案例1: 显示当前时间信息<br>date<br>案例2: 显示当前时间年月日<br>date “+%Y-%m-%d”</p>
<p>案例3: 显示当前时间年月日时分秒<br>date “+%Y-%m-%d %H:%M:%S”</p>
<h3 id="date-指令-设置日期"><a href="#date-指令-设置日期" class="headerlink" title="date 指令-设置日期"></a>date 指令-设置日期</h3><p>基本语法<br>date -s 字符串时间</p>
<p>应用实例<br>案例1: 设置系统当前时间， 比如设置成2020-11-03 20:02:10<br>date -s “2020-11-03 20:02:10”</p>
<h3 id="cal-指令"><a href="#cal-指令" class="headerlink" title="cal 指令"></a>cal 指令</h3><p>查看日历指令cal</p>
<p>基本语法<br>cal [选项] （功能描述：不加选项，显示本月日历）</p>
<p>应用实例<br>案例1: 显示当前日历cal<br>案例2: 显示2020 年日历: cal 2020</p>
<h2 id="p35-查找指令（1）"><a href="#p35-查找指令（1）" class="headerlink" title="p35 查找指令（1）"></a>p35 查找指令（1）</h2><h3 id="搜索查找类"><a href="#搜索查找类" class="headerlink" title="搜索查找类"></a>搜索查找类</h3><h4 id="find指令"><a href="#find指令" class="headerlink" title="find指令"></a>find指令</h4><p>find 指令将从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端。</p>
<p>基本语法<br>find [搜索范围] [选项]</p>
<p>选项说明</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102121.png" alt="image-20201226141155703"></p>
<p>应用实例<br>案例1: 按文件名：根据名称查找/home 目录下的hello.txt 文件<br>find /home -name hello.txt<br>案例2：按拥有者：查找/opt 目录下，用户名称为nobody 的文件<br>find /opt -user nobody<br>案例3：查找整个linux 系统下大于200M 的文件（+n 大于-n 小于n 等于, 单位有k,M,G）<br>find / -size +200M</p>
<p>ls -lh h表示大小用k，m之类表示</p>
<h3 id="locate-指令"><a href="#locate-指令" class="headerlink" title="locate 指令"></a>locate 指令</h3><p>locate 指令可以快速定位文件路径。locate 指令利用事先建立的系统中所有文件名称及路径的locate 数据库实现快速定位给定的文件。Locate 指令无需遍历整个文件系统，查询速度较快。为了保证查询结果的准确度，管理员必须定期更新locate 时刻</p>
<h4 id="基本语法-2"><a href="#基本语法-2" class="headerlink" title="基本语法"></a>基本语法</h4><p>locate 搜索文件</p>
<h4 id="特别说明"><a href="#特别说明" class="headerlink" title="特别说明"></a>特别说明</h4><p>由于locate 指令基于数据库进行查询，所以第一次运行前，必须使用updatedb 指令创建locate 数据库。</p>
<h4 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h4><p>案例1: 请使用locate 指令快速定位hello.txt 文件所在目录<br>which 指令，可以查看某个指令在哪个目录下，比如ls 指令在哪个目录<br>which ls</p>
<h2 id="p36-查找指令（2）"><a href="#p36-查找指令（2）" class="headerlink" title="p36 查找指令（2）"></a>p36 查找指令（2）</h2><h3 id="grep-指令和管道符号"><a href="#grep-指令和管道符号" class="headerlink" title="grep 指令和管道符号 |"></a>grep 指令和管道符号 |</h3><p>grep 过滤查找， 管道符，“|”，表示将前一个命令的处理结果输出传递给后面的命令处理。</p>
<h4 id="基本语法-3"><a href="#基本语法-3" class="headerlink" title="基本语法"></a>基本语法</h4><p>grep [选项] 查找内容源文件</p>
<h4 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h4><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102129.png" alt="image-20201229162422560"></p>
<h4 id="应用实例-1"><a href="#应用实例-1" class="headerlink" title="应用实例"></a>应用实例</h4><p>案例1: 请在hello.txt 文件中，查找”yes” 所在行，并且显示行号<br>写法1: cat /home/hello.txt | grep “yes”<br>写法2: grep -n “yes” /home/hello.txt</p>
<h2 id="p37-压缩和解压类"><a href="#p37-压缩和解压类" class="headerlink" title="p37 压缩和解压类"></a>p37 压缩和解压类</h2><h3 id="gzip-gunzip-指令"><a href="#gzip-gunzip-指令" class="headerlink" title="gzip/gunzip 指令"></a>gzip/gunzip 指令</h3><p>gzip 用于压缩文件， gunzip 用于解压的</p>
<h4 id="基本语法-4"><a href="#基本语法-4" class="headerlink" title="基本语法"></a>基本语法</h4><p>gzip 文件（功能描述：压缩文件，只能将文件压缩为*.gz 文件）<br>gunzip 文件.gz （功能描述：解压缩文件命令）</p>
<h4 id="应用实例-2"><a href="#应用实例-2" class="headerlink" title="应用实例"></a>应用实例</h4><p>案例1: gzip 压缩， 将/home 下的hello.txt 文件进行压缩<br>gzip /home/hello.txt<br>案例2: gunzip 压缩， 将/home 下的hello.txt.gz 文件进行解压缩<br>gunzip /home/hello.txt.gz</p>
<h3 id="zip-unzip-指令"><a href="#zip-unzip-指令" class="headerlink" title="zip/unzip 指令"></a>zip/unzip 指令</h3><p>zip 用于压缩文件， unzip 用于解压的，这个在项目打包发布中很有用的</p>
<h4 id="基本语法-5"><a href="#基本语法-5" class="headerlink" title="基本语法"></a>基本语法</h4><p>zip [选项] XXX.zip 将要压缩的内容（功能描述：压缩文件和目录的命令）<br>unzip [选项] XXX.zip （功能描述：解压缩文件）</p>
<h4 id="zip-常用选项"><a href="#zip-常用选项" class="headerlink" title="zip 常用选项"></a>zip 常用选项</h4><p>-r：递归压缩，即压缩目录</p>
<h4 id="unzip-的常用选项"><a href="#unzip-的常用选项" class="headerlink" title="unzip 的常用选项"></a>unzip 的常用选项</h4><p>-d&lt;目录&gt; ：指定解压后文件的存放目录</p>
<h2 id="p38-压缩和解压类（2）"><a href="#p38-压缩和解压类（2）" class="headerlink" title="p38 压缩和解压类（2）"></a>p38 压缩和解压类（2）</h2><h3 id="tar-指令"><a href="#tar-指令" class="headerlink" title="tar 指令"></a>tar 指令</h3><p>tar 指令是打包指令，最后打包后的文件是.tar.gz 的文件。</p>
<h4 id="基本语法-6"><a href="#基本语法-6" class="headerlink" title="基本语法"></a>基本语法</h4><p>tar [选项] XXX.tar.gz 打包的内容(功能描述：打包目录，压缩后的文件格式.tar.gz)</p>
<h4 id="选项说明"><a href="#选项说明" class="headerlink" title="选项说明"></a>选项说明</h4><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102133.png" alt="image-20201230105920233"></p>
<h4 id="应用实例-3"><a href="#应用实例-3" class="headerlink" title="应用实例"></a>应用实例</h4><p>案例1: 压缩多个文件，将/home/pig.txt 和/home/cat.txt 压缩成pc.tar.gz<br>tar -zcvf pc.tar.gz /home/pig.txt /home/cat.txt<br>案例2: 将/home 的文件夹压缩成myhome.tar.gz<br>tar -zcvf myhome.tar.gz /home/<br>案例3: 将pc.tar.gz 解压到当前目录<br>tar -zxvf pc.tar.gz<br>案例4: 将myhome.tar.gz 解压到/opt/tmp2 目录下(1) mkdir /opt/tmp2 (2) tar -zxvf /home/myhome.tar.gz -C /opt/tmp2</p>
<h2 id="p39-实用指令小结"><a href="#p39-实用指令小结" class="headerlink" title="p39 实用指令小结"></a>p39 实用指令小结</h2><h2 id="p40-第十章-Linux组的介绍"><a href="#p40-第十章-Linux组的介绍" class="headerlink" title="p40 第十章 Linux组的介绍"></a>p40 第十章 Linux组的介绍</h2><h3 id="Linux-组基本介绍"><a href="#Linux-组基本介绍" class="headerlink" title="Linux 组基本介绍"></a>Linux 组基本介绍</h3><p>在linux 中的每个用户必须属于一个组，不能独立于组外。在linux 中每个文件<br>有所有者、所在组、其它组的概念。</p>
<ol>
<li>所有者</li>
<li>所在组</li>
<li>其它组</li>
<li>改变用户所在的组</li>
</ol>
<h2 id="p41-所有者"><a href="#p41-所有者" class="headerlink" title="p41 所有者"></a>p41 所有者</h2><h3 id="文件-目录所有者"><a href="#文件-目录所有者" class="headerlink" title="文件/目录所有者"></a>文件/目录所有者</h3><p>一般为文件的创建者,谁创建了该文件，就自然的成为该文件的所有者。</p>
<h4 id="查看文件的所有者"><a href="#查看文件的所有者" class="headerlink" title="查看文件的所有者"></a>查看文件的所有者</h4><p>指令：ls –ahl<br>应用实例</p>
<h4 id="修改文件所有者"><a href="#修改文件所有者" class="headerlink" title="修改文件所有者"></a>修改文件所有者</h4><p>（change owner）</p>
<p>指令：chown 用户名 文件名<br>应用案例<br>要求：使用root 创建一个文件apple.txt ，然后将其所有者修改成tom<br>chown tom apple.txt</p>
<h3 id="组的创建"><a href="#组的创建" class="headerlink" title="组的创建"></a>组的创建</h3><h4 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a>基本指令</h4><p>groupadd 组名</p>
<h4 id="应用实例-4"><a href="#应用实例-4" class="headerlink" title="应用实例"></a>应用实例</h4><p>创建一个组, ,monster<br>groupadd monster</p>
<p>创建一个用户fox ，并放入到monster 组中<br>useradd -g monster fox</p>
<h2 id="p42-所在组"><a href="#p42-所在组" class="headerlink" title="p42 所在组"></a>p42 所在组</h2><h3 id="文件-目录所在组"><a href="#文件-目录所在组" class="headerlink" title="文件/目录所在组"></a>文件/目录所在组</h3><p>当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组(默认)。</p>
<h4 id="查看文件-目录所在组"><a href="#查看文件-目录所在组" class="headerlink" title="查看文件/目录所在组"></a>查看文件/目录所在组</h4><h5 id="基本指令-1"><a href="#基本指令-1" class="headerlink" title="基本指令"></a>基本指令</h5><p>ls –ahl<br>应用实例, 使用fox 来创建一个文件，看看该文件属于哪个组?</p>
<p>-rw-r–r–. 1 fox monster 0 12月 30 15:08 ok.txt</p>
<h4 id="修改文件-目录所在的组"><a href="#修改文件-目录所在的组" class="headerlink" title="修改文件/目录所在的组"></a>修改文件/目录所在的组</h4><h5 id="基本指令-2"><a href="#基本指令-2" class="headerlink" title="基本指令"></a>基本指令</h5><p>chgrp 组名文件名</p>
<h5 id="应用实例-5"><a href="#应用实例-5" class="headerlink" title="应用实例"></a>应用实例</h5><p>使用root 用户创建文件orange.txt ,看看当前这个文件属于哪个组，然后将这个文件所在组，修改到fruit 组。</p>
<ol>
<li><p>groupadd fruit</p>
</li>
<li><p>touch orange.txt</p>
</li>
<li><p>看看当前这个文件属于哪个组-&gt; root 组</p>
</li>
<li><p>chgrp fruit orange.txt</p>
</li>
</ol>
<h2 id="p43-修改所在组"><a href="#p43-修改所在组" class="headerlink" title="p43 修改所在组"></a>p43 修改所在组</h2><h3 id="其它组"><a href="#其它组" class="headerlink" title="其它组"></a>其它组</h3><p>除文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组</p>
<h3 id="改变用户所在组"><a href="#改变用户所在组" class="headerlink" title="改变用户所在组"></a>改变用户所在组</h3><p>在添加用户时，可以指定将该用户添加到哪个组中，同样的用root 的管理权限可以改变某个用户所在的组。</p>
<h4 id="改变用户所在组-1"><a href="#改变用户所在组-1" class="headerlink" title="改变用户所在组"></a>改变用户所在组</h4><p>usermod –g 新组名用户名<br>usermod –d 目录名用户名改变该用户登陆的初始目录。特别说明：用户需要有进入到新目录的权限。</p>
<h4 id="应用实例-6"><a href="#应用实例-6" class="headerlink" title="应用实例"></a>应用实例</h4><p>将zwj 这个用户从原来所在组，修改到wudang 组<br>usermod -g wudang zwj</p>
<h2 id="p44-rwx权限"><a href="#p44-rwx权限" class="headerlink" title="p44 rwx权限"></a>p44 rwx权限</h2><h3 id="权限的基本介绍"><a href="#权限的基本介绍" class="headerlink" title="权限的基本介绍"></a>权限的基本介绍</h3><p>ls -l 中显示的内容如下：<br>-rwxrw-r– 1 root root 1213 Feb 2 09:39 abc</p>
<p>0-9 位说明<br>第0 位确定文件类型(d, - , l , c , b)<br>-代表是一个普通文件<br>l 是链接，相当于windows 的快捷方式 link<br>d 是目录，相当于windows 的文件夹<br>c 是字符设备文件，鼠标，键盘<br>b 是块设备，比如硬盘<br>第1-3 位确定所有者（该文件的所有者）拥有该文件的权限。—User<br>第4-6 位确定所属组（同用户组的）拥有该文件的权限，—Group<br>第7-9 位确定其他用户拥有该文件的权限—Other</p>
<h3 id="rwx-权限详解，难点"><a href="#rwx-权限详解，难点" class="headerlink" title="rwx 权限详解，难点"></a>rwx 权限详解，难点</h3><h4 id="rwx-作用到文件"><a href="#rwx-作用到文件" class="headerlink" title="rwx 作用到文件"></a>rwx 作用到文件</h4><ol>
<li>[ r ]代表可读(read): 可以读取,查看</li>
<li>[ w ]代表可写(write): 可以修改,但是不代表可以删除该文件,删除一个文件的前提条件是对该文件所在的目录有写权<br>限，才能删除该文件.</li>
<li>[ x ]代表可执行(execute):可以被执行</li>
</ol>
<h4 id="rwx-作用到目录"><a href="#rwx-作用到目录" class="headerlink" title="rwx 作用到目录"></a>rwx 作用到目录</h4><ol>
<li>[ r ]代表可读(read): 可以读取，ls 查看目录内容</li>
<li>[ w ]代表可写(write): 可以修改, 对目录内创建+删除+重命名目录</li>
<li>[ x ]代表可执行(execute):可以进入该目录</li>
</ol>
<h2 id="p45-权限说明案例"><a href="#p45-权限说明案例" class="headerlink" title="p45 权限说明案例"></a>p45 权限说明案例</h2><h3 id="ls-l-中显示的内容如下："><a href="#ls-l-中显示的内容如下：" class="headerlink" title="ls -l 中显示的内容如下："></a>ls -l 中显示的内容如下：</h3><p>-rwxrw-r– 1 root root 1213 Feb 2 09:39 abc</p>
<h4 id="10-个字符确定不同用户能对文件干什么"><a href="#10-个字符确定不同用户能对文件干什么" class="headerlink" title="10 个字符确定不同用户能对文件干什么"></a>10 个字符确定不同用户能对文件干什么</h4><p>第一个字符代表文件类型： - l d c b<br>其余字符每3 个一组(rwx) 读(r) 写(w) 执行(x)<br>第一组rwx : 文件拥有者的权限是读、写和执行<br>第二组rw- : 与文件拥有者同一组的用户的权限是读、写但不能执行<br>第三组r– : 不与文件拥有者同组的其他用户的权限是读不能写和执行</p>
<p>可用数字表示为: r=4,w=2,x=1 因此rwx=4+2+1=7 , 数字可以进行组合</p>
<p>其它说明<br>1 文件：硬连接数或目录：子目录数<br>root 用户<br>root 组<br>1213 文件大小(字节)，如果是文件夹，显示4096 字节<br>Feb 2 09:39 最后修改日期<br>abc 文件名</p>
<h2 id="p46-修改权限"><a href="#p46-修改权限" class="headerlink" title="p46 修改权限"></a>p46 修改权限</h2><h3 id="修改权限-chmod"><a href="#修改权限-chmod" class="headerlink" title="修改权限-chmod"></a>修改权限-chmod</h3><h4 id="基本说明："><a href="#基本说明：" class="headerlink" title="基本说明："></a>基本说明：</h4><p>通过chmod 指令，可以修改文件或者目录的权限。</p>
<h4 id="第一种方式：-、-、-变更权限"><a href="#第一种方式：-、-、-变更权限" class="headerlink" title="第一种方式：+ 、-、= 变更权限"></a>第一种方式：+ 、-、= 变更权限</h4><p>u:所有者g:所有组o:其他人a:所有人(u、g、o 的总和)</p>
<ol>
<li>chmod u=rwx,g=rx,o=x 文件/目录名</li>
<li>chmod o+w 文件/目录名</li>
<li>chmod a-x 文件/目录名</li>
</ol>
<h5 id="案例演示"><a href="#案例演示" class="headerlink" title="案例演示"></a>案例演示</h5><ol>
<li>给abc 文件的所有者读写执行的权限，给所在组读执行权限，给其它组读执行权限。<br>chmod u=rwx,g=rx,o=rx abc</li>
<li>给abc 文件的所有者除去执行的权限，增加组写的权限<br>chmod u-x,g+w abc</li>
<li>给abc 文件的所有用户添加读的权限<br>chmod a+r abc</li>
</ol>
<h4 id="第二种方式：通过数字变更权限"><a href="#第二种方式：通过数字变更权限" class="headerlink" title="第二种方式：通过数字变更权限"></a>第二种方式：通过数字变更权限</h4><p>r=4 w=2 x=1 rwx=4+2+1=7<br>chmod u=rwx,g=rx,o=x 文件目录名<br>相当于chmod 751 文件/目录名</p>
<h5 id="案例演示-1"><a href="#案例演示-1" class="headerlink" title="案例演示"></a>案例演示</h5><p>要求：将/home/abc.txt 文件的权限修改成rwxr-xr-x, 使用给数字的方式实现：</p>
<p>chmod 755 /home/abc.txt</p>
<h2 id="p47-修改所在组和所有者"><a href="#p47-修改所在组和所有者" class="headerlink" title="p47 修改所在组和所有者"></a>p47 修改所在组和所有者</h2><h3 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h3><p>chown newowner 文件/目录改变所有者<br>chown newowner:newgroup 文件/目录改变所有者和所在组</p>
<p>-R 如果是目录则使其下所有子文件或目录递归生效</p>
<h4 id="案例演示-2"><a href="#案例演示-2" class="headerlink" title="案例演示"></a>案例演示</h4><ol>
<li><p>请将/home/abc.txt 文件的所有者修改成tom<br>chown tom /home/abc.txt</p>
</li>
<li><p>请将/home/test 目录下所有的文件和目录的所有者都修改成tom<br>chown -R tom /home/test</p>
</li>
</ol>
<h4 id="修改文件-目录所在组-chgrp"><a href="#修改文件-目录所在组-chgrp" class="headerlink" title="修改文件/目录所在组-chgrp"></a>修改文件/目录所在组-chgrp</h4><h5 id="基本介绍-1"><a href="#基本介绍-1" class="headerlink" title="基本介绍"></a>基本介绍</h5><p>chgrp newgroup 文件/目录【改变所在组】</p>
<h5 id="案例演示-3"><a href="#案例演示-3" class="headerlink" title="案例演示"></a>案例演示</h5><p>请将/home/abc .txt 文件的所在组修改成shaolin (少林)<br>groupadd shaolin<br>chgrp shaolin /home/abc.txt<br>请将/home/test 目录下所有的文件和目录的所在组都修改成shaolin(少林)<br>chgrp -R shaolin /home/test</p>
<h2 id="p48-最佳实践-警察和土匪游戏"><a href="#p48-最佳实践-警察和土匪游戏" class="headerlink" title="p48 最佳实践-警察和土匪游戏"></a>p48 最佳实践-警察和土匪游戏</h2><p>police ， bandit<br>jack, jerry: 警察<br>xh, xq: 土匪</p>
<ol>
<li>创建组groupadd police ; groupadd bandit</li>
<li>创建用户<br>useradd -g police jack ; useradd -g police jerry<br>useradd -g bandit xh; useradd -g bandit xq</li>
<li>jack 创建一个文件，自己可以读r 写w，本组人可以读，其它组没人任何权限<br>首先jack 登录； vim jack.txt ; chmod 640 jack.txt</li>
<li>jack 修改该文件，让其它组人可以读, 本组人可以读写<br>chmod o=r,g=r jack.txt</li>
<li>xh 投靠警察，看看是否可以读写.<br>usermod -g police xh</li>
<li>测试，看看xh 是否可以读写，xq 是否可以, 小结论，就是如果要对目录内的文件进行操作，需要要有对该目录的<br>相应权限</li>
</ol>
<h2 id="p49文件权限管理-课堂练习1"><a href="#p49文件权限管理-课堂练习1" class="headerlink" title="p49文件权限管理[课堂练习1]"></a>p49文件权限管理[课堂练习1]</h2><ol>
<li><p>建立两个组（神仙(sx),妖怪(yg)）</p>
</li>
<li><p>建立四个用户(唐僧,悟空，八戒，沙僧)</p>
</li>
<li><p>设置密码</p>
</li>
<li><p>把悟空，八戒放入妖怪唐僧沙僧在神仙</p>
</li>
<li><p>用悟空建立一个文件（monkey.java 该文件要输出i am monkey）</p>
</li>
<li><p>给八戒一个可以r w 的权限</p>
</li>
<li><p>八戒修改monkey.java 加入一句话( i am pig)</p>
</li>
<li><p>唐僧沙僧对该文件没有权限</p>
</li>
<li><p>把沙僧放入妖怪组</p>
</li>
<li><p>让沙僧修改该文件monkey, 加入一句话(“我是沙僧，我是妖怪!”);</p>
</li>
<li><p>对文件夹rwx 的细节讨论和测试!!!<br>x: 表示可以进入到该目录, 比如cd<br>r: 表示可以ls , 将目录的内容显示<br>w: 表示可以在该目录，删除或者创建文件</p>
</li>
<li><p>示意图</p>
</li>
</ol>
<img src="linux韩顺平2021.assets/image-20210115140531445.png" alt="image-20210115140531445" style="zoom:150%;">

<p>课堂练习2，完成如下操作</p>
<ol>
<li>用root 登录，建立用户mycentos,自己设定密码</li>
<li>用mycentos 登录，在主目录下建立目录test/t11/t1</li>
<li>在t1 中建立一个文本文件aa,用vi 编辑其内容为ls –al</li>
<li>改变aa 的权限为可执行文件[可以将当前日期追加到一个文件],运行该文件./aa</li>
<li>删除新建立的目录test/t11/t1</li>
<li>删除用户mycentos 及其主目录中的内容</li>
<li>将linux 设置成进入到图形界面的</li>
<li>重新启动linux 或关机</li>
</ol>
<h2 id="p50-第10章总结"><a href="#p50-第10章总结" class="headerlink" title="p50 第10章总结"></a>p50 第10章总结</h2><h2 id="p51-第11章-定时任务调度"><a href="#p51-第11章-定时任务调度" class="headerlink" title="p51 第11章 定时任务调度"></a>p51 第11章 定时任务调度</h2><h3 id="crond-任务调度"><a href="#crond-任务调度" class="headerlink" title="crond 任务调度"></a>crond 任务调度</h3><p>crontab 进行 定时任务的设置</p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>任务调度：是指系统在某个时间执行的特定的命令或程序。<br>任务调度分类：1.系统工作：有些重要的工作必须周而复始地执行。如病毒扫描等<br>个别用户工作：个别用户可能希望执行某些程序，比如对mysql 数据库的备份。<br>示意图</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102137.png" alt="image-20210120170042021"></p>
<h2 id="p52-crontab"><a href="#p52-crontab" class="headerlink" title="p52 crontab"></a>p52 crontab</h2><h3 id="基本语法-7"><a href="#基本语法-7" class="headerlink" title="基本语法"></a>基本语法</h3><p>crontab [选项]</p>
<h3 id="常用选项-1"><a href="#常用选项-1" class="headerlink" title="常用选项"></a>常用选项</h3><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102141.png" alt="image-20210120170118097"></p>
<h3 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h3><p>设置任务调度文件：/etc/crontab<br>设置个人任务调度。执行crontab –e 命令。<br>接着输入任务到调度文件<br>如：*/1 * * * * ls –l /etc/ &gt; /tmp/to.txt<br>意思说每小时的每分钟执行ls –l /etc/ &gt; /tmp/to.txt 命令</p>
<h4 id="参数细节说明"><a href="#参数细节说明" class="headerlink" title="参数细节说明"></a>参数细节说明</h4><p>cron表达式</p>
<p>5 个占位符的说明</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102146.png" alt="image-20210120170150025"></p>
<h2 id="p53-crond-时间规则"><a href="#p53-crond-时间规则" class="headerlink" title="p53 crond 时间规则"></a>p53 crond 时间规则</h2><h3 id="特殊时间执行案例"><a href="#特殊时间执行案例" class="headerlink" title="特殊时间执行案例"></a>特殊时间执行案例</h3><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102152.png" alt="image-20210121115047050"></p>
<p>每天的凌晨4点，每10分钟的时间段为 4-5点之内</p>
<h2 id="p54-crond应用实例"><a href="#p54-crond应用实例" class="headerlink" title="p54 crond应用实例"></a>p54 crond应用实例</h2><p>案例1：每隔1 分钟，就将当前的日期信息，追加到/tmp/mydate 文件中</p>
<p>*/1 * * * * date &gt;&gt; /tmp/mydate</p>
<p>案例2：每隔1 分钟， 将当前日期和日历都追加到/home/mycal 文件中<br>步骤:</p>
<p>(1) vim /home/my.sh 写入内容date &gt;&gt; /home/mycal 和cal &gt;&gt; /home/mycal<br>(2) 给my.sh 增加执行权限，chmod u+x /home/my.sh<br>(3) crontab -e 增加*/1 * * * * /home/my.sh</p>
<h3 id="crond-相关指令"><a href="#crond-相关指令" class="headerlink" title="crond 相关指令"></a>crond 相关指令</h3><p>conrtab –r：终止任务调度。其实就是删除crondtab -e 中的任务<br>crontab –l：列出当前有那些任务调度<br>service crond restart [重启任务调度]</p>
<h2 id="p55-at定时任务"><a href="#p55-at定时任务" class="headerlink" title="p55 at定时任务"></a>p55 at定时任务</h2><h3 id="基本介绍-2"><a href="#基本介绍-2" class="headerlink" title="基本介绍"></a>基本介绍</h3><ol>
<li>at 命令是一次性定时计划任务，at 的守护进程atd 会以后台模式运行，检查作业队列来运行。</li>
<li>默认情况下，atd 守护进程每60 秒检查作业队列（任务队列），有作业时，会检查作业运行时间，如果时间与当前时间匹配，则<br>运行此作业。</li>
<li>at 命令是一次性定时计划任务，执行完一个任务后不再执行此任务了</li>
<li>在使用at 命令的时候，一定要保证atd 进程的启动, 可以使用相关指令来查看<br>ps -ef | grep atd //可以检测atd 是否在运行</li>
</ol>
<p>ps -ef 检测现在有哪些进程在运行</p>
<p>| grep 过滤</p>
<ol start="5">
<li>画一个示意图</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102156.png" alt="image-20210123135029411"></p>
<h3 id="at-命令格式"><a href="#at-命令格式" class="headerlink" title="at 命令格式"></a>at 命令格式</h3><p>at [选项] [时间]<br>Ctrl + D 结束at 命令的输入， 输出两次</p>
<h3 id="at-命令选项"><a href="#at-命令选项" class="headerlink" title="at 命令选项"></a>at 命令选项</h3><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102200.png" alt="image-20210123135756634"></p>
<h3 id="at-时间定义"><a href="#at-时间定义" class="headerlink" title="at 时间定义"></a>at 时间定义</h3><p>at 指定时间的方法：</p>
<ol>
<li>接受在当天的hh:mm（小时:分钟）式的时间指定。假如该时间已过去，那么就放在第二天执行。例如：04:00</li>
<li>使用midnight（深夜），noon（中午），teatime（饮茶时间，一般是下午4 点）等比较模糊的词语来指定时间。</li>
<li>采用12 小时计时制，即在时间后面加上AM（上午）或PM（下午）来说明是上午还是下午。例如：12pm</li>
<li>指定命令执行的具体日期，指定格式为month day（月日）或mm/dd/yy（月/日/年）或dd.mm.yy（日.月.年），指<br>定的日期必须跟在指定时间的后面。例如：04:00 2021-03-1</li>
<li>使用相对计时法。指定格式为：now + count time-units ，now 就是当前时间，time-units 是时间单位，这里能够是minutes<br>（分钟）、hours（小时）、days（天）、weeks（星期）。count 是时间的数量，几天，几小时。例如：now + 5 minutes</li>
<li>直接使用today（今天）、tomorrow（明天）来指定完成命令的时间。</li>
</ol>
<h2 id="p56-at任务调度实例"><a href="#p56-at任务调度实例" class="headerlink" title="p56 at任务调度实例"></a>p56 at任务调度实例</h2><h3 id="案例1：2-天后的下午5-点执行-bin-ls-home"><a href="#案例1：2-天后的下午5-点执行-bin-ls-home" class="headerlink" title="案例1：2 天后的下午5 点执行/bin/ls /home"></a>案例1：2 天后的下午5 点执行/bin/ls /home</h3><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102205.png" alt="image-20210123141446318"></p>
<h3 id="案例2：atq-命令来查看系统中没有执行的工作任务"><a href="#案例2：atq-命令来查看系统中没有执行的工作任务" class="headerlink" title="案例2：atq 命令来查看系统中没有执行的工作任务"></a>案例2：atq 命令来查看系统中没有执行的工作任务</h3><h3 id="案例3：明天17-点钟，输出时间到指定文件内比如-root-date100-log"><a href="#案例3：明天17-点钟，输出时间到指定文件内比如-root-date100-log" class="headerlink" title="案例3：明天17 点钟，输出时间到指定文件内比如/root/date100.log"></a>案例3：明天17 点钟，输出时间到指定文件内比如/root/date100.log</h3><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102210.png" alt="image-20210123141512908"></p>
<h3 id="案例4：2-分钟后，输出时间到指定文件内比如-root-date200-log"><a href="#案例4：2-分钟后，输出时间到指定文件内比如-root-date200-log" class="headerlink" title="案例4：2 分钟后，输出时间到指定文件内比如/root/date200.log"></a>案例4：2 分钟后，输出时间到指定文件内比如/root/date200.log</h3><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102214.png" alt="image-20210123141526550"></p>
<h3 id="案例5：删除已经设置的任务-atrm-编号"><a href="#案例5：删除已经设置的任务-atrm-编号" class="headerlink" title="案例5：删除已经设置的任务, atrm 编号"></a>案例5：删除已经设置的任务, atrm 编号</h3><p>atrm 4 //表示将job 队列，编号为4 的job 删除.</p>
<h3 id="默认删除键变-H，只要按住ctrl键，删除键就可以使用了"><a href="#默认删除键变-H，只要按住ctrl键，删除键就可以使用了" class="headerlink" title="默认删除键变^H，只要按住ctrl键，删除键就可以使用了~"></a><em><strong>默认删除键变^H，只要按住ctrl键，删除键就可以使用了~</strong></em></h3><h2 id="p57-任务调度小结"><a href="#p57-任务调度小结" class="headerlink" title="p57 任务调度小结"></a>p57 任务调度小结</h2><h2 id="p58-磁盘分区机制"><a href="#p58-磁盘分区机制" class="headerlink" title="p58 磁盘分区机制"></a>p58 磁盘分区机制</h2><h3 id="Linux-分区"><a href="#Linux-分区" class="headerlink" title="Linux 分区"></a>Linux 分区</h3><h4 id="原理介绍"><a href="#原理介绍" class="headerlink" title="原理介绍"></a>原理介绍</h4><ol>
<li>Linux 来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构, Linux<br>中每个分区都是用来组成整个文件系统的一部分。</li>
<li>Linux 采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录<br>联系起来。这时要载入的一个分区将使它的存储空间在一个目录下获得。</li>
<li>示意图</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102219.png" alt="image-20210123143218395"></p>
<h4 id="硬盘说明"><a href="#硬盘说明" class="headerlink" title="硬盘说明"></a>硬盘说明</h4><ol>
<li>Linux 硬盘分IDE 硬盘和SCSI 硬盘，目前基本上是SCSI 硬盘</li>
<li>对于IDE 硬盘，驱动器标识符为“hdx<del>”,其中“hd”表明分区所在设备的类型，这里是指IDE 硬盘了。“x”为盘号（a 为<br>基本盘，b 为基本从属盘，c 为辅助主盘，d 为辅助从属盘）,“</del>”代表分区，前四个分区用数字1 到4 表示，它们是主分区或扩展分区，从5 开始就是逻辑分区。例，hda3 表示为第一个IDE 硬盘上的第三个主分区或扩展分区,hdb2表示为第二个IDE 硬盘上的第二个主分区或扩展分区。</li>
<li>对于SCSI 硬盘则标识为“sdx~”，SCSI 硬盘是用“sd”来表示分区所在设备的类型的，其余则和IDE 硬盘的表示方法一样</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102223.png" alt="image-20210129134831613"></p>
<h3 id="查看所有设备挂载情况"><a href="#查看所有设备挂载情况" class="headerlink" title="查看所有设备挂载情况"></a>查看所有设备挂载情况</h3><p>命令：lsblk 或者lsblk -f</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102227.png" alt="image-20210201094938180"></p>
<h2 id="p59-增加磁盘应用实例"><a href="#p59-增加磁盘应用实例" class="headerlink" title="p59 增加磁盘应用实例"></a>p59 增加磁盘应用实例</h2><h3 id="挂载的经典案例"><a href="#挂载的经典案例" class="headerlink" title="挂载的经典案例"></a>挂载的经典案例</h3><h4 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h4><p>下面我们以增加一块硬盘为例来熟悉下磁盘的相关指令和深入理解磁盘分区、挂载、卸载的概念。</p>
<h4 id="如何增加一块硬盘"><a href="#如何增加一块硬盘" class="headerlink" title="如何增加一块硬盘"></a>如何增加一块硬盘</h4><ol>
<li>虚拟机添加硬盘</li>
<li>分区</li>
<li>格式化</li>
<li>挂载</li>
<li>设置可以自动挂载</li>
</ol>
<h4 id="虚拟机增加硬盘步骤1"><a href="#虚拟机增加硬盘步骤1" class="headerlink" title="虚拟机增加硬盘步骤1"></a>虚拟机增加硬盘步骤1</h4><p>在【虚拟机】菜单中，选择【设置】，然后设备列表里添加硬盘，然后一路【下一步】，中间只有选择磁盘大小的地方<br>需要修改，至到完成。然后重启系统（才能识别）！</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102231.png" alt="image-20210201145342620"></p>
<h4 id="虚拟机增加硬盘步骤2"><a href="#虚拟机增加硬盘步骤2" class="headerlink" title="虚拟机增加硬盘步骤2"></a>虚拟机增加硬盘步骤2</h4><p>分区命令fdisk /dev/sdb</p>
<p>开始对/sdb 分区<br>m 显示命令列表<br>p 显示磁盘分区同fdisk –l<br>n 新增分区<br>d 删除分区<br>w 写入并退出</p>
<p>说明： 开始分区后输入n，新增分区，然后选择p ，分区类型为主分区。两次回车默认剩余全部空间。最后输入w<br>写入分区并退出，若不保存退出输入q。</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102235.png" alt="image-20210201170126047"></p>
<h4 id="虚拟机增加硬盘步骤3"><a href="#虚拟机增加硬盘步骤3" class="headerlink" title="虚拟机增加硬盘步骤3"></a>虚拟机增加硬盘步骤3</h4><p>格式化磁盘<br>分区命令:mkfs -t ext4 /dev/sdb1<br>其中ext4 是分区类型</p>
<h4 id="虚拟机增加硬盘步骤4"><a href="#虚拟机增加硬盘步骤4" class="headerlink" title="虚拟机增加硬盘步骤4"></a>虚拟机增加硬盘步骤4</h4><p>挂载: 将一个分区与一个目录联系起来，<br>mount 设备名称挂载目录<br>例如： mount /dev/sdb1 /newdisk</p>
<p>umount 设备名称或者挂载目录</p>
<p>例如： umount /dev/sdb1 或者umount /newdisk</p>
<p>老师注意: 用命令行挂载,重启后会失效</p>
<p><strong>问题：1.能否在一个目录下挂载多个分区</strong></p>
<p>不能，只能挂载一个</p>
<p><strong>如果切换挂载 已经写入的文件位置仍然不变</strong></p>
<h4 id="虚拟机增加硬盘步骤5"><a href="#虚拟机增加硬盘步骤5" class="headerlink" title="虚拟机增加硬盘步骤5"></a>虚拟机增加硬盘步骤5</h4><p>永久挂载: 通过修改/etc/fstab 实现挂载<br>添加完成后执行mount –a 即刻生效</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102240.png" alt="image-20210201175116348"></p>
<h2 id="p60-磁盘情况查询"><a href="#p60-磁盘情况查询" class="headerlink" title="p60 磁盘情况查询"></a>p60 磁盘情况查询</h2><h3 id="查询系统整体磁盘使用情况"><a href="#查询系统整体磁盘使用情况" class="headerlink" title="查询系统整体磁盘使用情况"></a>查询系统整体磁盘使用情况</h3><h4 id="基本语法-8"><a href="#基本语法-8" class="headerlink" title="基本语法"></a>基本语法</h4><p>df -h</p>
<h4 id="应用实例-7"><a href="#应用实例-7" class="headerlink" title="应用实例"></a>应用实例</h4><p>查询系统整体磁盘使用情况</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102244.png" alt="image-20210201175332950"></p>
<h3 id="查询指定目录的磁盘占用情况"><a href="#查询指定目录的磁盘占用情况" class="headerlink" title="查询指定目录的磁盘占用情况"></a>查询指定目录的磁盘占用情况</h3><h4 id="基本语法-9"><a href="#基本语法-9" class="headerlink" title="基本语法"></a>基本语法</h4><p>du -h</p>
<p>查询指定目录的磁盘占用情况，默认为当前目录<br>-s 指定目录占用大小汇总<br>-h 带计量单位<br>-a 含文件<br>–max-depth=1 子目录深度<br>-c 列出明细的同时，增加汇总值</p>
<h4 id="应用实例-8"><a href="#应用实例-8" class="headerlink" title="应用实例"></a>应用实例</h4><p>查询/opt 目录的磁盘占用情况，深度为1</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102248.png" alt="image-20210201175545788"></p>
<h2 id="p61-磁盘情况-工作实用指令"><a href="#p61-磁盘情况-工作实用指令" class="headerlink" title="p61 磁盘情况-工作实用指令"></a>p61 磁盘情况-工作实用指令</h2><ol>
<li>统计/opt 文件夹下文件的个数<br>ls -l /opt | grep “^-“ | wc -l</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102251.png" alt="image-20210201175741424"></p>
<ol start="2">
<li>统计/opt 文件夹下目录的个数<br>ls -l /opt | grep “^d” | wc -l</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102256.png" alt="image-20210201175813710"></p>
<ol start="3">
<li><p>统计/opt 文件夹下文件的个数，包括子文件夹里的<br>ls -lR /opt | grep “^-“ | wc -l</p>
</li>
<li><p>统计/opt 文件夹下目录的个数，包括子文件夹里的<br>ls -lR /opt | grep “^d” | wc -l</p>
</li>
<li><p>以树状显示目录结构tree 目录， 注意，如果没有tree ,则使用yum install tree 安装</p>
</li>
</ol>
<h2 id="p62-磁盘挂载小结"><a href="#p62-磁盘挂载小结" class="headerlink" title="p62 磁盘挂载小结"></a>p62 磁盘挂载小结</h2><h2 id="p63-NAT网络原理图"><a href="#p63-NAT网络原理图" class="headerlink" title="p63 NAT网络原理图"></a>p63 NAT网络原理图</h2><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102301.png" alt="image-20210202091602122"></p>
<h2 id="p64-网络配置指令"><a href="#p64-网络配置指令" class="headerlink" title="p64 网络配置指令"></a>p64 网络配置指令</h2><h3 id="查看网络IP-和网关"><a href="#查看网络IP-和网关" class="headerlink" title="查看网络IP 和网关"></a>查看网络IP 和网关</h3><p>ip自动分配与指定ip</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102317.png" alt="image-20210202100611325"></p>
<h3 id="查看网关"><a href="#查看网关" class="headerlink" title="查看网关"></a>查看网关</h3><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102322.png" alt="image-20210202100628749"></p>
<h3 id="查看windows-环境的中VMnet8-网络配置-ipconfig-指令"><a href="#查看windows-环境的中VMnet8-网络配置-ipconfig-指令" class="headerlink" title="查看windows 环境的中VMnet8 网络配置(ipconfig 指令)"></a>查看windows 环境的中VMnet8 网络配置(ipconfig 指令)</h3><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102327.png" alt="image-20210202101222774"></p>
<h3 id="查看linux-的网络配置ifconfig"><a href="#查看linux-的网络配置ifconfig" class="headerlink" title="查看linux 的网络配置ifconfig"></a>查看linux 的网络配置ifconfig</h3><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102332.png" alt="image-20210202101245459"></p>
<h3 id="ping-测试主机之间网络连通性"><a href="#ping-测试主机之间网络连通性" class="headerlink" title="ping 测试主机之间网络连通性"></a>ping 测试主机之间网络连通性</h3><h4 id="基本语法-10"><a href="#基本语法-10" class="headerlink" title="基本语法"></a>基本语法</h4><p>ping 目的主机（功能描述：测试当前服务器是否可以连接目的主机）</p>
<h4 id="应用实例-9"><a href="#应用实例-9" class="headerlink" title="应用实例"></a>应用实例</h4><p>测试当前服务器是否可以连接百度<br>ping <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></p>
<h2 id="p65-网络配置实例"><a href="#p65-网络配置实例" class="headerlink" title="p65 网络配置实例"></a>p65 网络配置实例</h2><h3 id="linux-网络环境配置"><a href="#linux-网络环境配置" class="headerlink" title="linux 网络环境配置"></a>linux 网络环境配置</h3><h4 id="第一种方法-自动获取-："><a href="#第一种方法-自动获取-：" class="headerlink" title="第一种方法(自动获取)："></a>第一种方法(自动获取)：</h4><p>说明：登陆后，通过界面的来设置自动获取ip，特点：linux 启动后会自动获取IP,缺点是每次自动获取的ip 地址可<br>能不一样</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102336.png" alt="image-20210202101712920"></p>
<h4 id="第二种方法-指定ip"><a href="#第二种方法-指定ip" class="headerlink" title="第二种方法(指定ip)"></a>第二种方法(指定ip)</h4><p>说明<br>直接修改配置文件来指定IP,并可以连接到外网(程序员推荐)</p>
<p>编辑vi /etc/sysconfig/network-scripts/ifcfg-ens33<br>要求：将ip 地址配置的静态的，比如: ip 地址为192.168.200.130</p>
<h5 id="ifcfg-ens33-文件说明"><a href="#ifcfg-ens33-文件说明" class="headerlink" title="ifcfg-ens33 文件说明"></a>ifcfg-ens33 文件说明</h5><p>DEVICE=eth0 #接口名（设备,网卡）</p>
<p>HWADDR=00:0C:2x:6x:0x:xx #MAC 地址</p>
<p>TYPE=Ethernet #网络类型（通常是Ethemet）</p>
<p>UUID=926a57ba-92c6-4231-bacb-f27e5e6a9f44 #随机id</p>
<p>#系统启动的时候网络接口是否有效（yes/no）<br>ONBOOT=yes</p>
<p>#IP 的配置方法[none|static|bootp|dhcp]（引导时不使用协议|静态分配IP|BOOTP 协议|DHCP 协议）<br>BOOTPROTO=static<br>#IP 地址<br>IPADDR=192.168.200.130<br>#网关<br>GATEWAY=192.168.200.2<br>#域名解析器<br>DNS1=192.168.200.2<br>重启网络服务或者重启系统生效<br>service network restart 、reboot</p>
<h2 id="p66-主机名和hosts映射"><a href="#p66-主机名和hosts映射" class="headerlink" title="p66 主机名和hosts映射"></a>p66 主机名和hosts映射</h2><h3 id="设置主机名"><a href="#设置主机名" class="headerlink" title="设置主机名"></a>设置主机名</h3><ol>
<li>为了方便记忆，可以给linux 系统设置主机名, 也可以根据需要修改主机名</li>
<li>指令hostname ： 查看主机名</li>
<li>修改文件在/etc/hostname 指定</li>
<li>修改后，重启生效</li>
</ol>
<h3 id="设置hosts-映射"><a href="#设置hosts-映射" class="headerlink" title="设置hosts 映射"></a>设置hosts 映射</h3><p>思考：如何通过主机名能够找到(比如ping) 某个linux 系统?</p>
<p>windows<br>在C:\Windows\System32\drivers\etc\hosts 文件指定即可</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lwh-note/p/9005953.html">win10无法修改host文件参考</a></p>
<p>案例: 192.168.200.130 hspedu100</p>
<p>linux<br>在/etc/hosts 文件指定</p>
<p>案例: 192.168.200.1 ThinkPad-PC</p>
<h3 id="主机名解析过程分析-Hosts、DNS"><a href="#主机名解析过程分析-Hosts、DNS" class="headerlink" title="主机名解析过程分析(Hosts、DNS)"></a>主机名解析过程分析(Hosts、DNS)</h3><h4 id="Hosts-是什么"><a href="#Hosts-是什么" class="headerlink" title="Hosts 是什么"></a>Hosts 是什么</h4><p>一个文本文件，用来记录IP 和Hostname(主机名)的映射关系</p>
<h4 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h4><p>DNS，就是Domain Name System 的缩写，翻译过来就是域名系统<br>是互联网上作为域名和IP 地址相互映射的一个分布式数据库</p>
<h4 id="应用实例-用户在浏览器输入了www-baidu-com"><a href="#应用实例-用户在浏览器输入了www-baidu-com" class="headerlink" title="应用实例: 用户在浏览器输入了www.baidu.com"></a>应用实例: 用户在浏览器输入了<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></h4><ol>
<li>浏览器先检查浏览器缓存中有没有该域名解析IP 地址，有就先调用这个IP 完成解析；如果没有，就检查DNS 解析<br>器缓存，如果有直接返回IP 完成解析。这两个缓存，可以理解为本地解析器缓存</li>
<li>一般来说，当电脑第一次成功访问某一网站后，在一定时间内，浏览器或操作系统会缓存他的IP 地址（DNS 解析记<br>录）.如在cmd 窗口中输入<br>ipconfig /displaydns //DNS 域名解析缓存<br>ipconfig /flushdns //手动清理dns 缓存</li>
<li>如果本地解析器缓存没有找到对应映射，检查系统中hosts 文件中有没有配置对应的域名IP 映射，如果有，则完成<br>解析并返回。</li>
<li>如果本地DNS 解析器缓存和hosts 文件中均没有找到对应的IP，则到域名服务DNS 进行解析域</li>
<li>示意图</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102340.png" alt="image-20210202111536782"></p>
<h2 id="p67-网络配置小结"><a href="#p67-网络配置小结" class="headerlink" title="p67 网络配置小结"></a>p67 网络配置小结</h2><h2 id="p68-进程基本介绍"><a href="#p68-进程基本介绍" class="headerlink" title="p68 进程基本介绍"></a>p68 进程基本介绍</h2><ol>
<li>在LINUX 中，每个执行的程序都称为一个进程。每一个进程都分配一个ID 号(pid,进程号)。=&gt;windows =&gt; linux</li>
<li>每个进程都可能以两种方式存在的。前台与后台，所谓前台进程就是用户目前的屏幕上可以进行操作的。后台进程<br>则是实际在操作，但由于屏幕上无法看到的进程，通常使用后台方式执行。</li>
<li>一般系统的服务都是以后台进程的方式存在，而且都会常驻在系统中。直到关机才才结束。</li>
<li>示意图</li>
</ol>
<h2 id="p69-ps指令详解"><a href="#p69-ps指令详解" class="headerlink" title="p69 ps指令详解"></a>p69 ps指令详解</h2><h3 id="显示系统执行的进程"><a href="#显示系统执行的进程" class="headerlink" title="显示系统执行的进程"></a>显示系统执行的进程</h3><h4 id="基本介绍-3"><a href="#基本介绍-3" class="headerlink" title="基本介绍"></a>基本介绍</h4><p>ps 命令是用来查看目前系统中，有哪些正在执行，以及它们执行的状况。可以不加任何参数.</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102344.png" alt="image-20210202113438356"></p>
<h3 id="ps-详解"><a href="#ps-详解" class="headerlink" title="ps 详解"></a>ps 详解</h3><ol>
<li><p>指令：ps –aux|grep xxx ，比如我看看有没有sshd 服务</p>
</li>
<li><p>指令说明</p>
</li>
</ol>
<p> System V 展示风格<br> USER：用户名称<br> PID：进程号<br> %CPU：进程占用CPU 的百分比<br> %MEM：进程占用物理内存的百分比<br> VSZ：进程占用的虚拟内存大小（单位：KB）<br> RSS：进程占用的物理内存大小（单位：KB）<br> TT：终端名称,缩写.<br> STAT：进程状态，其中S-睡眠，s-表示该进程是会话的先导进程，N-表示进程拥有比普通优先级更   低的优先级，R-<br> 正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等等<br> STARTED：进程的启动时间<br> TIME：CPU 时间，即进程使用CPU 的总时间<br> COMMAND：启动进程所用的命令和参数，如果过长会被截断显示</p>
<h2 id="p70-父子进程"><a href="#p70-父子进程" class="headerlink" title="p70 父子进程"></a>p70 父子进程</h2><h3 id="应用实例-10"><a href="#应用实例-10" class="headerlink" title="应用实例"></a>应用实例</h3><p>要求：以全格式显示当前所有的进程，查看进程的父进程。查看sshd 的父进程信息<br>ps -ef 是以全格式显示当前所有的进程<br>-e 显示所有进程。-f 全格式<br>ps -ef|grep sshd</p>
<p> 是BSD 风格<br>UID：用户ID<br>PID：进程ID<br>PPID：父进程ID<br>C：CPU 用于计算执行优先级的因子。数值越大，表明进程是CPU 密集型运算，执行优先级会降低；数值越小，表<br>明进程是I/O 密集型运算，执行优先级会提高<br>STIME：进程启动的时间<br>TTY：完整的终端名称<br>TIME：CPU 时间<br>CMD：启动进程所用的命令和参数</p>
<h2 id="p71-终止进程kill-和killall"><a href="#p71-终止进程kill-和killall" class="headerlink" title="p71 终止进程kill 和killall"></a>p71 终止进程kill 和killall</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍:"></a>介绍:</h3><p>若是某个进程执行一半需要停止时，或是已消了很大的系统资源时，此时可以考虑停止该进程。使用kill 命令来完<br>成此项任务。</p>
<h3 id="基本语法-11"><a href="#基本语法-11" class="headerlink" title="基本语法"></a>基本语法</h3><p>kill [选项] 进程号（功能描述：通过进程号杀死/终止进程）<br>killall 进程名称（功能描述：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用）</p>
<h3 id="常用选项-2"><a href="#常用选项-2" class="headerlink" title="常用选项"></a>常用选项</h3><p>-9 :表示强迫进程立即停止</p>
<h3 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h3><ol>
<li>案例1：踢掉某个非法登录用户<br>kill 进程号, 比如kill 11421</li>
<li>案例2: 终止远程登录服务sshd, 在适当时候再次重启sshd 服务<br>kill sshd 对应的进程号; /bin/systemctl start sshd.service</li>
<li>案例3: 终止多个gedit , 演示killall gedit</li>
<li>案例4：强制杀掉一个终端, 指令kill -9 bash 对应的进程号</li>
</ol>
<h2 id="p72-查看进程树"><a href="#p72-查看进程树" class="headerlink" title="p72 查看进程树"></a>p72 查看进程树</h2><h3 id="14-4-1-基本语法"><a href="#14-4-1-基本语法" class="headerlink" title="14.4.1 基本语法"></a>14.4.1 基本语法</h3><p>pstree [选项] ,可以更加直观的来看进程信息</p>
<h3 id="14-4-2-常用选项"><a href="#14-4-2-常用选项" class="headerlink" title="14.4.2 常用选项"></a>14.4.2 常用选项</h3><p>-p :显示进程的PID<br>-u :显示进程的所属用户</p>
<h3 id="14-4-3-应用实例："><a href="#14-4-3-应用实例：" class="headerlink" title="14.4.3 应用实例："></a>14.4.3 应用实例：</h3><p> 案例1：请你树状的形式显示进程的pid<br>pstree -p<br> 案例2：请你树状的形式进程的用户<br>pstree -u</p>
<h2 id="p73-服务管理"><a href="#p73-服务管理" class="headerlink" title="p73 服务管理"></a>p73 服务管理</h2><h3 id="14-5-1-介绍"><a href="#14-5-1-介绍" class="headerlink" title="14.5.1 介绍:"></a>14.5.1 介绍:</h3><p>服务(service) 本质就是进程，但是是运行在后台的，通常都会监听某个端口，等待其它程序的请求，比如(mysqld , sshd<br>防火墙等)，因此我们又称为守护进程，是Linux 中非常重要的知识点。【原理图】</p>
<h3 id="14-5-2-service-管理指令"><a href="#14-5-2-service-管理指令" class="headerlink" title="14.5.2 service 管理指令"></a>14.5.2 service 管理指令</h3><ol>
<li>service 服务名[start | stop | restart | reload | status]</li>
<li>在CentOS7.0 后很多服务不再使用<font color="SkyBlue">  <strong>service</strong></font>  ,而是<font color="SkyBlue">  <strong>systemctl</strong></font>  (后面专门讲)</li>
<li>service 指令管理的服务在/etc/init.d 查看</li>
</ol>
<h3 id="service-管理指令案例"><a href="#service-管理指令案例" class="headerlink" title="service 管理指令案例"></a>service 管理指令案例</h3><p>请使用service 指令，查看，关闭，启动network [注意：在虚拟系统演示，因为网络连接会关闭]<br>指令:<br>service network status<br>service network stop<br>service network start</p>
<h3 id="14-5-4-查看服务名"><a href="#14-5-4-查看服务名" class="headerlink" title="14.5.4 查看服务名:"></a>14.5.4 查看服务名:</h3><p>方式1：使用setup -&gt; 系统服务就可以看到全部。<br>setup</p>
<p><font color="Red">按tab会进入图形化界面的下面的菜单 ，利于退出</font></p>
<p>方式2: /etc/init.d 看到service 指令管理的服务<br>ls -l /etc/init.d</p>
<h2 id="p74-服务管理（2）"><a href="#p74-服务管理（2）" class="headerlink" title="p74 服务管理（2）"></a>p74 服务管理（2）</h2><h3 id="14-5-5-服务的运行级别-runlevel"><a href="#14-5-5-服务的运行级别-runlevel" class="headerlink" title="14.5.5 服务的运行级别(runlevel):"></a>14.5.5 服务的运行级别(runlevel):</h3><p>Linux 系统有7 种运行级别(runlevel)：常用的是级别3 和5<br>运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动<br>运行级别1：单用户工作状态，root 权限，用于系统维护，禁止远程登陆<br>运行级别2：多用户状态(没有NFS)，不支持网络<br>运行级别3：完全的多用户状态(有NFS)，无界面，登陆后进入控制台命令行模式<br>运行级别4：系统未使用，保留<br>运行级别5：X11 控制台，登陆后进入图形GUI 模式<br>运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动<br>开机的流程说明：</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102348.png" alt="image-20210205142706265"></p>
<h2 id="p75-服务管理（3）"><a href="#p75-服务管理（3）" class="headerlink" title="p75 服务管理（3）"></a>p75 服务管理（3）</h2><h3 id="14-5-7-chkconfig-指令"><a href="#14-5-7-chkconfig-指令" class="headerlink" title="14.5.7 chkconfig 指令"></a>14.5.7 chkconfig 指令</h3><h4 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍"></a>介绍</h4><p>通过chkconfig 命令可以给服务的各个运行级别设置自启动/关闭<br>chkconfig 指令管理的服务在/etc/init.d 查看<br>注意: Centos7.0 后，很多服务使用systemctl 管理(后面马上讲)</p>
<h4 id="chkconfig-基本语法"><a href="#chkconfig-基本语法" class="headerlink" title="chkconfig 基本语法"></a>chkconfig 基本语法</h4><ol>
<li>查看服务chkconfig –list [| grep xxx]</li>
<li>chkconfig 服务名–list</li>
<li>chkconfig –level 5 服务名on/off<br> 案例演示: 对network 服务进行各种操作, 把network 在3 运行级别,关闭自启动<br>chkconfig –level 3 network off<br>chkconfig –level 3 network on</li>
</ol>
<h4 id="使用细节"><a href="#使用细节" class="headerlink" title="使用细节"></a>使用细节</h4><p>chkconfig 重新设置服务后自启动或关闭，需要重启机器reboot 生效.</p>
<h2 id="p76-服务管理（4）"><a href="#p76-服务管理（4）" class="headerlink" title="p76 服务管理（4）"></a>p76 服务管理（4）</h2><h3 id="14-5-8-systemctl-管理指令"><a href="#14-5-8-systemctl-管理指令" class="headerlink" title="14.5.8 systemctl 管理指令"></a>14.5.8 systemctl 管理指令</h3><p>基本语法： systemctl [start | stop | restart | status] 服务名<br>systemctl 指令管理的服务在/usr/lib/systemd/system 查看</p>
<h3 id="14-5-9-systemctl-设置服务的自启动状态"><a href="#14-5-9-systemctl-设置服务的自启动状态" class="headerlink" title="14.5.9 systemctl 设置服务的自启动状态"></a>14.5.9 systemctl 设置服务的自启动状态</h3><p>systemctl list-unit-files [ | grep 服务名] (查看服务开机启动状态, grep 可以进行过滤)<br>systemctl enable 服务名(设置服务开机启动)<br>systemctl disable 服务名(关闭服务开机启动)<br>systemctl is-enabled 服务名(查询某个服务是否是自启动的)</p>
<h3 id="14-5-10-应用案例："><a href="#14-5-10-应用案例：" class="headerlink" title="14.5.10 应用案例："></a>14.5.10 应用案例：</h3><p>查看当前防火墙的状况，关闭防火墙和重启防火墙。=&gt; firewalld.service<br>systemctl status firewalld; systemctl stop firewalld; systemctl start firewalld</p>
<h3 id="14-5-11-细节讨论："><a href="#14-5-11-细节讨论：" class="headerlink" title="14.5.11 细节讨论："></a>14.5.11 细节讨论：</h3><p>关闭或者启用防火墙后，立即生效。[telnet 测试某个端口即可]<br>这种方式只是<font color="Red">临时生效</font>，当重启系统后，还是回归以前对服务的设置。<br>如果希望设置某个服务自启动或关闭永久生效，要使用systemctl [enable|disable] 服务名. [演示]</p>
<h2 id="p77-服务管理（5）"><a href="#p77-服务管理（5）" class="headerlink" title="p77 服务管理（5）"></a>p77 服务管理（5）</h2><h3 id="14-5-12-打开或者关闭指定端口"><a href="#14-5-12-打开或者关闭指定端口" class="headerlink" title="14.5.12 打开或者关闭指定端口"></a>14.5.12 打开或者关闭指定端口</h3><p>在真正的生产环境，往往需要将防火墙打开，但问题来了，如果我们把防火墙打开，那么外部请求数据包就不能跟<br>服务器监听端口通讯。这时，需要打开指定的端口。比如80、22、8080 等，这个又怎么做呢？老韩给给大家讲一讲。[示<br>意图]</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102353.png" alt="image-20210205155145378"></p>
<h3 id="14-5-13-firewall-指令"><a href="#14-5-13-firewall-指令" class="headerlink" title="14.5.13 firewall 指令"></a>14.5.13 firewall 指令</h3><ol>
<li>打开端口: firewall-cmd –permanent –add-port=端口号/协议</li>
<li>关闭端口: firewall-cmd –permanent –remove-port=端口号/协议</li>
<li>重新载入,才能生效: firewall-cmd –reload</li>
<li>查询端口是否开放: firewall-cmd –query-port=端口/协议</li>
</ol>
<h3 id="14-5-14-应用案例："><a href="#14-5-14-应用案例：" class="headerlink" title="14.5.14 应用案例："></a>14.5.14 应用案例：</h3><ol>
<li>启用防火墙， 测试111 端口是否能telnet , 不行</li>
<li>开放111 端口<br>firewall-cmd –permanent –add-port=111/tcp ; 需要firewall-cmd –reload</li>
<li>再次关闭111 端口<br>firewall-cmd –permanent –remove-port=111/tcp ; 需要firewall-cmd –reload</li>
</ol>
<h2 id="p78-动态监控进程"><a href="#p78-动态监控进程" class="headerlink" title="p78 动态监控进程"></a>p78 动态监控进程</h2><h3 id="介绍："><a href="#介绍：" class="headerlink" title="介绍："></a>介绍：</h3><p>top 与ps 命令很相似。它们都用来显示正在执行的进程。Top 与ps 最大的不同之处，在于top 在执行一段时间可以<br>更新正在运行的的进程。</p>
<h3 id="14-6-2-基本语法"><a href="#14-6-2-基本语法" class="headerlink" title="14.6.2 基本语法"></a>14.6.2 基本语法</h3><p>top [选项]</p>
<h4 id="14-6-3-选项说明："><a href="#14-6-3-选项说明：" class="headerlink" title="14.6.3 选项说明："></a>14.6.3 选项说明：</h4><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102357.png" alt="image-20210220092556056"></p>
<h2 id="p79-交互操作说明"><a href="#p79-交互操作说明" class="headerlink" title="p79 交互操作说明"></a>p79 交互操作说明</h2><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102402.png" alt="image-20210220092641785"></p>
<h3 id="14-6-5-应用实例"><a href="#14-6-5-应用实例" class="headerlink" title="14.6.5 应用实例"></a>14.6.5 应用实例</h3><p> 案例1.监视特定用户, 比如我们监控tom 用户<br>top：输入此命令，按回车键，查看执行的进程。<br>u：然后输入“u”回车，再输入用户名，即可,<br> 案例2：终止指定的进程, 比如我们要结束tom 登录<br>top：输入此命令，按回车键，查看执行的进程。<br>k：然后输入“k”回车，再输入要结束的进程ID 号<br> 案例3:指定系统状态更新的时间(每隔10 秒自动更新), 默认是3 秒<br>top -d 10</p>
<h2 id="p80-监控网络状态"><a href="#p80-监控网络状态" class="headerlink" title="p80 监控网络状态"></a>p80 监控网络状态</h2><h3 id="14-7-1-查看系统网络情况netstat"><a href="#14-7-1-查看系统网络情况netstat" class="headerlink" title="14.7.1 查看系统网络情况netstat"></a>14.7.1 查看系统网络情况netstat</h3><h4 id="基本语法-12"><a href="#基本语法-12" class="headerlink" title="基本语法"></a>基本语法</h4><p>netstat [选项]</p>
<h4 id="选项说明-1"><a href="#选项说明-1" class="headerlink" title="选项说明"></a>选项说明</h4><p>-an 按一定顺序排列输出<br>-p 显示哪个进程在调用</p>
<h4 id="应用案例"><a href="#应用案例" class="headerlink" title="应用案例"></a>应用案例</h4><p>请查看服务名为sshd 的服务的信息。<br>netstat -anp | grep sshd</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102406.png" alt="image-20210220103422291"></p>
<h3 id="14-7-2-检测主机连接命令ping："><a href="#14-7-2-检测主机连接命令ping：" class="headerlink" title="14.7.2 检测主机连接命令ping："></a>14.7.2 检测主机连接命令ping：</h3><p>是一种网络检测工具，它主要是用检测远程主机是否正常，或是两部主机间的网线或网卡故障。<br>如: ping 对方ip 地址</p>
<h2 id="p81-进程管理小结"><a href="#p81-进程管理小结" class="headerlink" title="p81 进程管理小结"></a>p81 进程管理小结</h2><h2 id="p82-rpm管理（1）"><a href="#p82-rpm管理（1）" class="headerlink" title="p82 rpm管理（1）"></a>p82 rpm管理（1）</h2><h3 id="15-1-rpm-包的管理"><a href="#15-1-rpm-包的管理" class="headerlink" title="15.1 rpm 包的管理"></a>15.1 rpm 包的管理</h3><h4 id="15-1-1-介绍"><a href="#15-1-1-介绍" class="headerlink" title="15.1.1 介绍"></a>15.1.1 介绍</h4><p>rpm 用于互联网下载包的打包及安装工具，它包含在某些Linux 分发版中。它生成具有.RPM 扩展名的文件。RPM<br>是RedHat Package Manager（RedHat 软件包管理工具）的缩写，类似windows 的setup.exe，这一文件格式名称虽然打上<br>了RedHat 的标志，但理念是通用的。<br>Linux 的分发版本都有采用（suse,redhat, centos 等等），可以算是公认的行业标准了。</p>
<h4 id="15-1-2-rpm-包的简单查询指令"><a href="#15-1-2-rpm-包的简单查询指令" class="headerlink" title="15.1.2 rpm 包的简单查询指令"></a>15.1.2 rpm 包的简单查询指令</h4><p>查询已安装的rpm 列表rpm –qa|grep xx<br>举例： 看看当前系统，是否安装了firefox<br>指令: rpm -qa | grep firefox</p>
<h4 id="15-1-3-rpm-包名基本格式"><a href="#15-1-3-rpm-包名基本格式" class="headerlink" title="15.1.3 rpm 包名基本格式"></a>15.1.3 rpm 包名基本格式</h4><p>一个rpm 包名：firefox-60.2.2-1.el7.centos.x86_64<br>名称:firefox<br>版本号：60.2.2-1<br>适用操作系统: el7.centos.x86_64<br>表示centos7.x 的64 位系统<br>如果是i686、i386 表示32 位系统，noarch 表示通用</p>
<h4 id="15-1-4-rpm-包的其它查询指令："><a href="#15-1-4-rpm-包的其它查询指令：" class="headerlink" title="15.1.4 rpm 包的其它查询指令："></a>15.1.4 rpm 包的其它查询指令：</h4><p>rpm -qa :查询所安装的所有rpm 软件包<br>rpm -qa | more<br>rpm -qa | grep X [rpm -qa | grep firefox ]</p>
<p>rpm -q 软件包名:查询软件包是否安装<br>案例：rpm -q firefox<br>rpm -qi 软件包名：查询软件包信息<br>案例: rpm -qi firefox<br>rpm -ql 软件包名:查询软件包中的文件<br>比如： rpm -ql firefox<br>rpm -qf 文件全路径名查询文件所属的软件包<br>rpm -qf /etc/passwd<br>rpm -qf /root/install.log</p>
<h2 id="p83-rpm的卸载"><a href="#p83-rpm的卸载" class="headerlink" title="p83 rpm的卸载"></a>p83 rpm的卸载</h2><h4 id="15-1-5-卸载rpm-包："><a href="#15-1-5-卸载rpm-包：" class="headerlink" title="15.1.5 卸载rpm 包："></a>15.1.5 卸载rpm 包：</h4><h5 id="基本语法-13"><a href="#基本语法-13" class="headerlink" title="基本语法"></a>基本语法</h5><p>rpm -e RPM 包的名称//erase</p>
<h5 id="应用案例-1"><a href="#应用案例-1" class="headerlink" title="应用案例"></a>应用案例</h5><p>删除firefox 软件包<br>rpm -e firefox</p>
<h5 id="细节讨论"><a href="#细节讨论" class="headerlink" title="细节讨论"></a>细节讨论</h5><ol>
<li>如果其它软件包依赖于您要卸载的软件包，卸载时则会产生错误信息。<br>如： $ rpm -e foo<br>removing these packages would break dependencies:foo is needed by bar-1.0-1</li>
<li>如果我们就是要删除foo 这个rpm 包，可以增加参数–nodeps ,就可以强制删除，但是一般不推荐这样做，因为依<br>赖于该软件包的程序可能无法运行<br>如：$ rpm -e –nodeps foo</li>
</ol>
<h4 id="15-1-6-安装rpm-包"><a href="#15-1-6-安装rpm-包" class="headerlink" title="15.1.6 安装rpm 包"></a>15.1.6 安装rpm 包</h4><h5 id="基本语法-14"><a href="#基本语法-14" class="headerlink" title="基本语法"></a>基本语法</h5><p>rpm -ivh RPM 包全路径名称</p>
<h5 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h5><p>i=install 安装<br>v=verbose 提示<br>h=hash 进度条</p>
<h5 id="应用实例-11"><a href="#应用实例-11" class="headerlink" title="应用实例"></a>应用实例</h5><p>演示卸载和安装firefox 浏览器<br>rpm -e firefox<br>rpm -ivh firefox</p>
<p><span class="github-emoji"><span>😢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 2021年2月20日10点59分</p>
<h2 id="p84-yum"><a href="#p84-yum" class="headerlink" title="p84 yum"></a>p84 yum</h2><h3 id="15-2-1-介绍："><a href="#15-2-1-介绍：" class="headerlink" title="15.2.1 介绍："></a>15.2.1 介绍：</h3><p>Yum 是一个Shell 前端软件包管理器。基于RPM 包管理，能够从指定的服务器自动<br>下载RPM 包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包。<br>示意图</p>
<h3 id="15-2-2-yum-的基本指令"><a href="#15-2-2-yum-的基本指令" class="headerlink" title="15.2.2 yum 的基本指令"></a>15.2.2 yum 的基本指令</h3><p>查询yum 服务器是否有需要安装的软件<br>yum list|grep xx 软件列表</p>
<h3 id="15-2-3-安装指定的yum-包"><a href="#15-2-3-安装指定的yum-包" class="headerlink" title="15.2.3 安装指定的yum 包"></a>15.2.3 安装指定的yum 包</h3><p>yum install xxx 下载安装</p>
<h3 id="15-2-4-yum-应用实例："><a href="#15-2-4-yum-应用实例：" class="headerlink" title="15.2.4 yum 应用实例："></a>15.2.4 yum 应用实例：</h3><p>案例：请使用yum 的方式来安装firefox<br>rpm -e firefox<br>yum list | grep firefox<br>yum install firefox</p>
<h2 id="p85-软件包管理小结"><a href="#p85-软件包管理小结" class="headerlink" title="p85 软件包管理小结"></a>p85 软件包管理小结</h2><h2 id="p86-安装配置JDK1-8"><a href="#p86-安装配置JDK1-8" class="headerlink" title="p86 安装配置JDK1.8"></a>p86 安装配置JDK1.8</h2><h3 id="16-1-概述"><a href="#16-1-概述" class="headerlink" title="16.1 概述"></a>16.1 概述</h3><p>如果需要在Linux 下进行JavaEE 的开发，我们需要安装如下软件</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102409.png" alt="image-20210220113612663"></p>
<h3 id="16-2-安装JDK"><a href="#16-2-安装JDK" class="headerlink" title="16.2 安装JDK"></a>16.2 安装JDK</h3><h4 id="16-2-1-安装步骤"><a href="#16-2-1-安装步骤" class="headerlink" title="16.2.1 安装步骤"></a>16.2.1 安装步骤</h4><ol>
<li>mkdir /opt/jdk</li>
<li>通过xftp6 上传到/opt/jdk 下</li>
<li>cd /opt/jdk</li>
<li>解压tar -zxvf jdk-8u261-linux-x64.tar.gz</li>
<li>mkdir /usr/local/java</li>
<li>mv /opt/jdk/jdk1.8.0_261 /usr/local/java</li>
<li>配置环境变量的配置文件vim /etc/profile</li>
<li>export JAVA_HOME=/usr/local/java/jdk1.8.0_261</li>
<li>export PATH=$JAVA_HOME/bin:$PATH</li>
<li>source /etc/profile [让新的环境变量生效]</li>
</ol>
<p>刷新系统环境变量</p>
<h4 id="16-2-2-测试是否安装成功"><a href="#16-2-2-测试是否安装成功" class="headerlink" title="16.2.2 测试是否安装成功"></a>16.2.2 测试是否安装成功</h4><p>编写一个简单的Hello.java 输出”hello,world!”</p>
<h2 id="p87-tomcat-的安装"><a href="#p87-tomcat-的安装" class="headerlink" title="p87  tomcat 的安装"></a>p87  tomcat 的安装</h2><h4 id="16-3-1-步骤"><a href="#16-3-1-步骤" class="headerlink" title="16.3.1 步骤:"></a>16.3.1 步骤:</h4><ol>
<li>上传安装文件，并解压缩到/opt/tomcat</li>
<li>进入解压目录/bin , 启动tomcat ./startup.sh</li>
<li>开放端口8080 , 回顾firewall-cmd</li>
</ol>
<h4 id="16-3-2-测试是否安装成功："><a href="#16-3-2-测试是否安装成功：" class="headerlink" title="16.3.2 测试是否安装成功："></a>16.3.2 测试是否安装成功：</h4><p>在windows、Linux 下访问<a target="_blank" rel="noopener" href="http://linuxip:8080/">http://linuxip:8080</a></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102413.png" alt="image-20210220135615700"></p>
<h2 id="p88-idea2020-的安装"><a href="#p88-idea2020-的安装" class="headerlink" title="p88 idea2020 的安装"></a>p88 idea2020 的安装</h2><h3 id="16-4-1-步骤"><a href="#16-4-1-步骤" class="headerlink" title="16.4.1 步骤"></a>16.4.1 步骤</h3><ol>
<li>下载地址: <a target="_blank" rel="noopener" href="https://www.jetbrains.com/idea/download/#section=windows">https://www.jetbrains.com/idea/download/#section=windows</a></li>
<li>解压缩到/opt/idea</li>
<li>启动idea bin 目录下./idea.sh，配置jdk</li>
<li>编写Hello world 程序并测试成功！</li>
</ol>
<h2 id="p89-mysql5-7-的安装"><a href="#p89-mysql5-7-的安装" class="headerlink" title="p89 mysql5.7 的安装(!!)"></a>p89 mysql5.7 的安装(!!)</h2><ol>
<li><p>新建文件夹/opt/mysql，并cd进去</p>
</li>
<li><p>运行wget <a target="_blank" rel="noopener" href="http://dev.mysql.com/get/mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar%EF%BC%8C%E4%B8%8B%E8%BD%BDmysql%E5%AE%89%E8%A3%85%E5%8C%85">http://dev.mysql.com/get/mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar，下载mysql安装包</a></p>
</li>
</ol>
<p>PS：centos7.6自带的类mysql数据库是mariadb，会跟mysql冲突，要先删除。</p>
<ol start="3">
<li><p>运行tar -xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar </p>
</li>
<li><p>运行rpm -qa|grep mari，查询mariadb相关安装包</p>
</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102417.jpg" alt="img"></p>
<ol start="5">
<li><p>运行rpm -e –nodeps mariadb-libs，卸载</p>
</li>
<li><p>然后开始真正安装mysql，依次运行以下几条</p>
</li>
</ol>
<p>rpm -ivh mysql-community-common-5.7.26-1.el7.x86_64.rpm</p>
<p>rpm -ivh mysql-community-libs-5.7.26-1.el7.x86_64.rpm</p>
<p>rpm -ivh mysql-community-client-5.7.26-1.el7.x86_64.rpm</p>
<p>rpm -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm</p>
<ol start="7">
<li><p>运行systemctl start mysqld.service，启动mysql</p>
</li>
<li><p>然后开始设置root用户密码</p>
</li>
</ol>
<p>Mysql自动给root用户设置随机密码，运行grep “password” /var/log/mysqld.log可看到当前密码</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102420.jpg" alt="img"></p>
<ol start="9">
<li><p>运行mysql -u root -p，用root用户登录，提示输入密码可用上述的，可以成功登陆进入mysql命令行</p>
</li>
<li><p>设置root密码，对于个人开发环境，如果要设比较简单的密码（<strong>生产环境服务器要设复杂密码</strong>），可以运行</p>
</li>
</ol>
<p>set global validate_password_policy=0; 提示密码设置策略</p>
<p>（validate_password_policy默认值1，）</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102425.jpg" alt="img"></p>
<ol start="11">
<li><p>set password for ‘root’@’localhost’ =password(‘xjxj1109’);</p>
</li>
<li><p>运行flush privileges;使密码设置生效</p>
</li>
</ol>
<h2 id="p90-小结"><a href="#p90-小结" class="headerlink" title="p90 小结"></a>p90 小结</h2><h2 id="p91-shell编程快速入门"><a href="#p91-shell编程快速入门" class="headerlink" title="p91 shell编程快速入门"></a>p91 shell编程快速入门</h2><h3 id="17-1-为什么要学习Shell-编程"><a href="#17-1-为什么要学习Shell-编程" class="headerlink" title="17.1 为什么要学习Shell 编程"></a>17.1 为什么要学习Shell 编程</h3><ol>
<li>Linux 运维工程师在进行服务器集群管理时，需要编写Shell 程序来进行服务器管理。</li>
<li>对于JavaEE 和Python 程序员来说，工作的需要，你的老大会要求你编写一些Shell 脚本进行程序或者是服务器的维<br>护，比如编写一个定时备份数据库的脚本。</li>
<li>对于大数据程序员来说，需要编写Shell 程序来管理集群</li>
</ol>
<h3 id="17-2-Shell-是什么"><a href="#17-2-Shell-是什么" class="headerlink" title="17.2 Shell 是什么"></a>17.2 Shell 是什么</h3><p>Shell 是一个命令行解释器，它为用户提供了一个向Linux 内核发送请求以便运行程序的界面系统级程序，用户可以<br>用Shell 来启动、挂起、停止甚至是编写一些程序。看一个示意图</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507102428.png" alt="image-20210222092830033"></p>
<h3 id="17-3-Shell-脚本的执行方式"><a href="#17-3-Shell-脚本的执行方式" class="headerlink" title="17.3 Shell 脚本的执行方式"></a>17.3 Shell 脚本的执行方式</h3><h4 id="17-3-1-脚本格式要求"><a href="#17-3-1-脚本格式要求" class="headerlink" title="17.3.1 脚本格式要求"></a>17.3.1 脚本格式要求</h4><ol>
<li>脚本以#!/bin/bash 开头</li>
<li>脚本需要有可执行权限</li>
</ol>
<p>chmod u+x [file]</p>
<h4 id="17-3-2-编写第一个Shell-脚本"><a href="#17-3-2-编写第一个Shell-脚本" class="headerlink" title="17.3.2 编写第一个Shell 脚本"></a>17.3.2 编写第一个Shell 脚本</h4><p>需求说明：创建一个Shell 脚本，输出hello world!<br>vim hello.sh<br>#!/bin/bash<br>echo “hello,world~”</p>
<p>可以使用绝对也可以使用相对路径来执行这个脚本，前提是有可执行权限</p>
<p>./hello.sh    <code>相对路径</code></p>
<p>/root/shcode/hello.sh    <code>绝对路径</code></p>
<h4 id="17-3-3-脚本的常用执行方式"><a href="#17-3-3-脚本的常用执行方式" class="headerlink" title="17.3.3 脚本的常用执行方式"></a>17.3.3 脚本的常用执行方式</h4><p>方式1(输入脚本的绝对路径或相对路径)<br>说明：首先要赋予helloworld.sh 脚本的+x 权限， 再执行脚本<br>比如./hello.sh 或者使用绝对路径/root/shcode/hello.sh<br>方式2(sh+脚本)<br>说明：<strong>不用赋予脚本+x 权限，直接执行即可。</strong><br>比如sh hello.sh , 也可以使用绝对路径</p>
<h2 id="p92-shell变量"><a href="#p92-shell变量" class="headerlink" title="p92 shell变量"></a>p92 shell变量</h2><h3 id="17-4-Shell-的变量"><a href="#17-4-Shell-的变量" class="headerlink" title="17.4 Shell 的变量"></a>17.4 Shell 的变量</h3><h4 id="17-4-1-Shell-变量介绍"><a href="#17-4-1-Shell-变量介绍" class="headerlink" title="17.4.1 Shell 变量介绍"></a>17.4.1 Shell 变量介绍</h4><ol>
<li>Linux Shell 中的变量分为，系统变量和用户自定义变量。</li>
<li>系统变量：$HOME、$PWD、$SHELL、$USER 等等，比如： echo $HOME 等等..</li>
<li>显示当前shell 中所有变量：set</li>
</ol>
<h4 id="17-4-2-shell-变量的定义"><a href="#17-4-2-shell-变量的定义" class="headerlink" title="17.4.2 shell 变量的定义"></a>17.4.2 shell 变量的定义</h4><p>基本语法</p>
<ol>
<li>定义变量：变量名=值</li>
</ol>
<p><code>中间不要空格</code></p>
<ol start="2">
<li>撤销变量：unset 变量</li>
<li>声明静态变量：readonly 变量，注意：不能unset<br>快速入门</li>
<li>案例1：定义变量A</li>
<li>案例2：撤销变量A</li>
<li>案例3：声明静态的变量B=2，不能unset</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#案例1：定义变量A</span><br><span class="line">A=100</span><br><span class="line">#输出变量需要加上$</span><br><span class="line">echo A=$A</span><br><span class="line">echo "A=$A"</span><br><span class="line">#案例2：撤销变量A</span><br><span class="line">unset A</span><br><span class="line">echo "A=$A"</span><br><span class="line">#案例3：声明静态的变量B=2，不能unset</span><br><span class="line">readonly B=2</span><br><span class="line">echo "B=$B"</span><br><span class="line">#unset B</span><br><span class="line">#将指令返回的结果赋给变量</span><br><span class="line">:&lt;&lt;!</span><br><span class="line">C=`date`</span><br><span class="line">D=$(date)</span><br><span class="line">echo "C=$C"</span><br><span class="line">echo "D=$D"</span><br><span class="line">!</span><br><span class="line">#使用环境变量TOMCAT_HOME</span><br><span class="line">echo "tomcat_home=$TOMCAT_HOME"</span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li>案例4：可把变量提升为全局环境变量，可供其他shell 程序使用[该案例后面讲]</li>
</ol>
<h4 id="17-4-3-shell-变量的定义"><a href="#17-4-3-shell-变量的定义" class="headerlink" title="17.4.3 shell 变量的定义"></a>17.4.3 shell 变量的定义</h4><p>定义变量的规则</p>
<ol>
<li>变量名称可以由字母、数字和下划线组成，但是不能以数字开头。5A=200(×)</li>
<li>等号两侧不能有空格</li>
<li>变量名称一般习惯为大写， 这是一个规范，我们遵守即可<br>将命令的返回值赋给变量</li>
<li>A=<code>date</code>反引号，运行里面的命令，并把结果返回给变量A</li>
<li>A=$(date) 等价于反引号</li>
</ol>
<h2 id="p93-设置环境变量"><a href="#p93-设置环境变量" class="headerlink" title="p93 设置环境变量"></a>p93 设置环境变量</h2><h3 id="17-5-设置环境变量"><a href="#17-5-设置环境变量" class="headerlink" title="17.5 设置环境变量"></a>17.5 设置环境变量</h3><h4 id="17-5-1-基本语法"><a href="#17-5-1-基本语法" class="headerlink" title="17.5.1 基本语法"></a>17.5.1 基本语法</h4><ol>
<li>export 变量名=变量值（功能描述：将shell 变量输出为环境变量/全局变量）</li>
<li>source 配置文件（功能描述：让修改后的配置信息立即生效）</li>
<li>echo $变量名（功能描述：查询环境变量的值）</li>
<li>示意</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103217.png" alt="image-20210222093111460"></p>
<h4 id="17-5-2-快速入门"><a href="#17-5-2-快速入门" class="headerlink" title="17.5.2 快速入门"></a>17.5.2 快速入门</h4><ol>
<li>在/etc/profile 文件中定义TOMCAT_HOME 环境变量</li>
<li>查看环境变量TOMCAT_HOME 的值</li>
<li>在另外一个shell 程序中使用TOMCAT_HOME<br>注意：在输出TOMCAT_HOME 环境变量前，需要让其生效<br>source /etc/profile</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103221.png" alt="image-20210222093129382"></p>
<p>shell 脚本的多行注释<br>:&lt;&lt;! 内容!</p>
<h2 id="p94-位置参数变量"><a href="#p94-位置参数变量" class="headerlink" title="p94 位置参数变量"></a>p94 位置参数变量</h2><h4 id="17-6-1-介绍"><a href="#17-6-1-介绍" class="headerlink" title="17.6.1 介绍"></a>17.6.1 介绍</h4><p>当我们执行一个shell 脚本时，如果希望获取到命令行的参数信息，就可以使用到位置参数变量<br>比如： ./myshell.sh 100 200 , 这个就是一个执行shell 的命令行，可以在myshell 脚本中获取到参数信息</p>
<h4 id="17-6-2-基本语法"><a href="#17-6-2-基本语法" class="headerlink" title="17.6.2 基本语法"></a>17.6.2 基本语法</h4><p>$n （功能描述：n 为数字，$0 代表命令本身，$1-$9 代表第一到第九个参数，十以上的参数，十以上的参数需要用<br>大括号包含，如${10}）<br>$* （功能描述：这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体）<br>$@（功能描述：这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待）<br>$#（功能描述：这个变量代表命令行中所有参数的个数）</p>
<h4 id="17-6-3-位置参数变量"><a href="#17-6-3-位置参数变量" class="headerlink" title="17.6.3 位置参数变量"></a>17.6.3 位置参数变量</h4><p>案例：编写一个shell 脚本position.sh ， 在脚本中获取到命令行的各个参数信息。</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103225.png" alt="image-20210222104341185"></p>
<h2 id="p95-预定义变量"><a href="#p95-预定义变量" class="headerlink" title="p95 预定义变量"></a>p95 预定义变量</h2><h3 id="17-7-预定义变量"><a href="#17-7-预定义变量" class="headerlink" title="17.7 预定义变量"></a>17.7 预定义变量</h3><h4 id="17-7-1-基本介绍"><a href="#17-7-1-基本介绍" class="headerlink" title="17.7.1 基本介绍"></a>17.7.1 基本介绍</h4><p>就是shell 设计者事先已经定义好的变量，可以直接在shell 脚本中使用</p>
<h4 id="17-7-2-基本语法"><a href="#17-7-2-基本语法" class="headerlink" title="17.7.2 基本语法"></a>17.7.2 基本语法</h4><ol>
<li>$$ （功能描述：当前进程的进程号（PID））</li>
<li>$! （功能描述：后台运行的最后一个进程的进程号（PID））</li>
<li>$？（功能描述：最后一次执行的命令的返回状态。如果这个变量的值为0，证明上一个命令正确执行；如果这个变<br>量的值为非0（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了。）</li>
</ol>
<h4 id="17-7-3-应用实例"><a href="#17-7-3-应用实例" class="headerlink" title="17.7.3 应用实例"></a>17.7.3 应用实例</h4><p>在一个shell 脚本中简单使用一下预定义变量<br>preVar.sh<br>#!/bin/bash<br>echo “当前执行的进程id=$$”<br>#以后台的方式运行一个脚本，并获取他的进程号<br>/root/shcode/myshell.sh &amp;<br>echo “最后一个后台方式运行的进程id=$!”<br>echo “执行的结果是=$?”</p>
<h2 id="p96-运算符"><a href="#p96-运算符" class="headerlink" title="p96 运算符"></a>p96 运算符</h2><h4 id="17-8-1-基本介绍"><a href="#17-8-1-基本介绍" class="headerlink" title="17.8.1 基本介绍"></a>17.8.1 基本介绍</h4><p>学习如何在shell 中进行各种运算操作。</p>
<h4 id="17-8-2-基本语法"><a href="#17-8-2-基本语法" class="headerlink" title="17.8.2 基本语法"></a>17.8.2 基本语法</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1) “$((运算式))”或“$[运算式]”或者expr m + n //expression 表达式</span><br><span class="line">2) 注意expr 运算符间要有 空格 , 如果希望将expr 的结果赋给某个变量，使用``</span><br><span class="line">3) expr m - n</span><br><span class="line">4) expr \*, /, % 乘，除，取余</span><br></pre></td></tr></tbody></table></figure>

<h4 id="17-8-3-应用实例oper-sh"><a href="#17-8-3-应用实例oper-sh" class="headerlink" title="17.8.3 应用实例oper.sh"></a>17.8.3 应用实例oper.sh</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">案例1：计算（2+3）X4 的值</span><br><span class="line">案例2：请求出命令行的两个参数[整数]的和20 50</span><br><span class="line">#!/bin/bash</span><br><span class="line">#案例1：计算（2+3）X4 的值</span><br><span class="line">#使用第一种方式</span><br><span class="line">RES1=$(((2+3)*4))</span><br><span class="line">echo "res1=$RES1"</span><br><span class="line">#使用第二种方式, 推荐使用</span><br><span class="line">RES2=$[(2+3)*4]</span><br><span class="line">echo "res2=$RES2"</span><br><span class="line">#使用第三种方式expr</span><br><span class="line">TEMP=`expr 2 + 3`</span><br><span class="line">RES4=`expr $TEMP \* 4`</span><br><span class="line">echo "temp=$TEMP"</span><br><span class="line">echo "res4=$RES4"</span><br><span class="line">#案例2：请求出命令行的两个参数[整数]的和20 50</span><br><span class="line">SUM=$[$1+$2]</span><br><span class="line">echo "sum=$SUM"</span><br></pre></td></tr></tbody></table></figure>

<h2 id="p97-条件判断"><a href="#p97-条件判断" class="headerlink" title="p97 条件判断"></a>p97 条件判断</h2><h4 id="17-9-1-判断语句"><a href="#17-9-1-判断语句" class="headerlink" title="17.9.1 判断语句"></a>17.9.1 判断语句</h4><h5 id="基本语法-cry"><a href="#基本语法-cry" class="headerlink" title="基本语法 :cry:"></a>基本语法 <span class="github-emoji"><span>😢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h5><p>[ condition ]（注意condition 前后要有空格）<br>#非空返回true，可使用$?验证（0 为true，&gt;1 为false）</p>
<h5 id="应用实例-no-bell"><a href="#应用实例-no-bell" class="headerlink" title="应用实例 :no_bell:"></a>应用实例 <span class="github-emoji"><span>🔕</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f515.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h5><p>[ hspEdu ] 返回true<br>[ ] 返回false<br>[ condition ] &amp;&amp; echo OK || echo notok 条件满足，执行后面的语句</p>
<h5 id="判断语句-fu"><a href="#判断语句-fu" class="headerlink" title="判断语句 :fu:"></a>判断语句 <span class="github-emoji"><span>🖕</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f595.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h5><p>常用判断条件 </p>
<ol>
<li><p>= 字符串比较</p>
</li>
<li><p>两个整数的比较</p>
</li>
</ol>
<p>-lt 小于<br>-le 小于等于little equal<br>-eq 等于<br>-gt 大于<br>-ge 大于等于<br>-ne 不等于</p>
<ol start="3">
<li>按照文件权限进行判断</li>
</ol>
<p>-r 有读的权限<br>-w 有写的权限<br>-x 有执行的权限</p>
<ol start="4">
<li>按照文件类型进行判断</li>
</ol>
<p>-f 文件存在并且是一个常规的文件<br>-e 文件存在<br>-d 文件存在并是一个目录</p>
<h5 id="应用实例-rocket"><a href="#应用实例-rocket" class="headerlink" title="应用实例:rocket:"></a>应用实例<span class="github-emoji"><span>🚀</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h5><p>案例1：”ok”是否等于”ok”<br>判断语句：使用=<br>案例2：23 是否大于等于22<br>判断语句：使用-ge<br>案例3：/root/shcode/aaa.txt 目录中的文件是否存在<br>判断语句： 使用-f<br>代码如下:</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103229.png" alt="image-20210222152906029"></p>
<h2 id="p98-流程控制"><a href="#p98-流程控制" class="headerlink" title="p98 流程控制"></a>p98 流程控制</h2><h4 id="17-10-1-if-判断"><a href="#17-10-1-if-判断" class="headerlink" title="17.10.1 if 判断"></a>17.10.1 if 判断</h4><h5 id="基本语法-15"><a href="#基本语法-15" class="headerlink" title="基本语法"></a>基本语法</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件判断式]</span><br><span class="line">then</span><br><span class="line">代码</span><br><span class="line">fi</span><br><span class="line">或者, 多分支</span><br><span class="line"></span><br><span class="line">if [ 条件判断式]</span><br><span class="line">then</span><br><span class="line">代码</span><br><span class="line">elif [条件判断式]</span><br><span class="line">then</span><br><span class="line">代码</span><br><span class="line">fi</span><br></pre></td></tr></tbody></table></figure>

<p> 注意事项：[ 条件判断式]，中括号和条件判断式之间必须有空格<br> 应用实例ifCase.sh<br>案例：请编写一个shell 程序，如果输入的参数，大于等于60，则输出”及格了”，如果小于60,则输出”不及格”</p>
<h3 id="kissing"><a href="#kissing" class="headerlink" title=":kissing:"></a><span class="github-emoji"><span>😗</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f617.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h3><h3 id="smirk"><a href="#smirk" class="headerlink" title=":smirk:"></a><span class="github-emoji"><span>😏</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h3><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103232.png" alt="image-20210222160234077"></p>
<h2 id="p99-流程控制（2）"><a href="#p99-流程控制（2）" class="headerlink" title="p99 流程控制（2）"></a>p99 流程控制（2）</h2><h4 id="17-10-2-case-语句"><a href="#17-10-2-case-语句" class="headerlink" title="17.10.2 case 语句"></a>17.10.2 case 语句</h4><h5 id="基本语法-16"><a href="#基本语法-16" class="headerlink" title="基本语法"></a>基本语法</h5><p>case $变量名in<br>“值1”）<br>如果变量的值等于值1，则执行程序1<br>;;<br>“值2”）<br>如果变量的值等于值2，则执行程序2<br>;;<br>…省略其他分支…</p>
<p>*）<br>如果变量的值都不是以上的值，则执行此程序<br>;;<br>esac</p>
<h5 id="应用实例-testCase-sh"><a href="#应用实例-testCase-sh" class="headerlink" title="应用实例 testCase.sh"></a>应用实例 testCase.sh</h5><p>案例1 ：当命令行参数是1 时，输出”周一”, 是2 时，就输出”周二”， 其它情况输出”other”</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103235.png" alt="image-20210222160323330"></p>
<h2 id="p100-for-循环"><a href="#p100-for-循环" class="headerlink" title="p100 for 循环"></a>p100 for 循环</h2><h4 id="基本语法1-face-with-head-bandage"><a href="#基本语法1-face-with-head-bandage" class="headerlink" title="基本语法1:face_with_head_bandage:"></a>基本语法1<span class="github-emoji"><span>🤕</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f915.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><p>for 变量in 值1 值2 值3…<br>do<br>程序/代码<br>done</p>
<h4 id="应用实例testFor1-sh-factory"><a href="#应用实例testFor1-sh-factory" class="headerlink" title="应用实例testFor1.sh:factory:"></a>应用实例testFor1.sh<span class="github-emoji"><span>🏭</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f3ed.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><p>案例1 ：打印命令行输入的参数[这里可以看出$* 和$@ 的区别]</p>
<h4 id="基本语法2-face-with-thermometer"><a href="#基本语法2-face-with-thermometer" class="headerlink" title="基本语法2:face_with_thermometer:"></a>基本语法2<span class="github-emoji"><span>🤒</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f912.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><p>for (( 初始值;循环控制条件;变量变化))<br>do<br>程序/代码<br>done</p>
<h4 id="应用实例testFor2-sh-facepunch"><a href="#应用实例testFor2-sh-facepunch" class="headerlink" title="应用实例testFor2.sh:facepunch:"></a>应用实例testFor2.sh<span class="github-emoji"><span>👊</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f44a.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><p>案例1 ：从1 加到100 的值输出显示</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103238.png" alt="image-20210222175514495"></p>
<h2 id="p101-while循环"><a href="#p101-while循环" class="headerlink" title="p101 while循环"></a>p101 while循环</h2><h4 id="基本语法1"><a href="#基本语法1" class="headerlink" title="基本语法1"></a>基本语法1</h4><p>while [ 条件判断式]<br>do<br>程序/代码<br>done<br>注意：while 和[有空格，条件判断式和[也有空格</p>
<h4 id="应用实例testWhile-sh"><a href="#应用实例testWhile-sh" class="headerlink" title="应用实例testWhile.sh"></a>应用实例testWhile.sh</h4><p>案例1 ：从命令行输入一个数n，统计从1+..+ n 的值是多少？</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#案例1 ：从命令行输入一个数n，统计从1+..+ n 的值是多少？</span><br><span class="line">SUM=0</span><br><span class="line">i=0</span><br><span class="line">while [ $i -le $1 ]</span><br><span class="line">do</span><br><span class="line">SUM=$[$SUM+$i]</span><br><span class="line">#i 自增</span><br><span class="line">i=$[$i+1]</span><br><span class="line">done</span><br><span class="line">echo "执行结果=$SUM"</span><br></pre></td></tr></tbody></table></figure>

<h2 id="p102-read-读取控制台输入"><a href="#p102-read-读取控制台输入" class="headerlink" title="p102 read 读取控制台输入"></a>p102 read 读取控制台输入</h2><h4 id="17-11-1-基本语法"><a href="#17-11-1-基本语法" class="headerlink" title="17.11.1 基本语法"></a>17.11.1 基本语法</h4><p>read(选项)(参数)<br>选项：<br>-p：指定读取值时的提示符；<br>-t：指定读取值时等待的时间（秒），如果没有在指定的时间内输入，就不再等待了。。<br>参数<br>变量：指定读取值的变量名</p>
<h4 id="17-11-2-应用实例testRead-sh"><a href="#17-11-2-应用实例testRead-sh" class="headerlink" title="17.11.2 应用实例testRead.sh"></a>17.11.2 应用实例testRead.sh</h4><p>案例1：读取控制台输入一个NUM1 值<br>案例2：读取控制台输入一个NUM2 值，在10 秒内输入。<br>代码:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#案例1：读取控制台输入一个NUM1 值</span><br><span class="line">read -p "请输入一个数NUM1=" NUM1</span><br><span class="line">echo "你输入的NUM1=$NUM1"</span><br><span class="line">#案例2：读取控制台输入一个NUM2 值，在10 秒内输入。</span><br><span class="line">read -t 10 -p "请输入一个数NUM2=" NUM2</span><br><span class="line">echo "你输入的NUM2=$NUM2"</span><br></pre></td></tr></tbody></table></figure>

<h2 id="p103-函数"><a href="#p103-函数" class="headerlink" title="p103 函数"></a>p103 函数</h2><h4 id="17-12-1-函数介绍"><a href="#17-12-1-函数介绍" class="headerlink" title="17.12.1 函数介绍"></a>17.12.1 函数介绍</h4><p>shell 编程和其它编程语言一样，有系统函数，也可以自定义函数。系统函数中，我们这里就介绍两个。</p>
<h4 id="17-12-2-系统函数"><a href="#17-12-2-系统函数" class="headerlink" title="17.12.2 系统函数"></a>17.12.2 系统函数</h4><h5 id="basename-基本语法"><a href="#basename-基本语法" class="headerlink" title="basename 基本语法"></a>basename 基本语法</h5><p>功能：返回完整路径最后/ 的部分，常用于获取文件名<br>basename [pathname] [suffix]<br>basename [string] [suffix] （功能描述：basename 命令会删掉所有的前缀包括最后一个（‘/’）字符，然后将字符串<br>显示出来。<br>选项：<br>suffix 为后缀，如果suffix 被指定了，basename 会将pathname 或string 中的suffix 去掉。</p>
<p>应用实例<br>案例1：请返回/home/aaa/test.txt 的”test.txt” 部分<br>basename /home/aaa/test.txt</p>
<h5 id="dirname-基本语法"><a href="#dirname-基本语法" class="headerlink" title="dirname 基本语法"></a>dirname 基本语法</h5><p>功能：返回完整路径最后/ 的前面的部分，常用于返回路径部分<br>dirname 文件绝对路径（功能描述：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩<br>下的路径（目录的部分））<br> 应用实例<br>案例1：请返回/home/aaa/test.txt 的/home/aaa<br>dirname /home/aaa/test.txt</p>
<h2 id="p104-自定义函数"><a href="#p104-自定义函数" class="headerlink" title="p104 自定义函数"></a>p104 自定义函数</h2><p>基本语法<br>[ function ] funname[()]<br>{<br>Action;<br>[return int;]<br>}<br>调用直接写函数名：funname [值]<br>应用实例<br>案例1：计算输入两个参数的和(动态的获取)， getSum<br>代码</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#案例1：计算输入两个参数的和(动态的获取)， getSum</span><br><span class="line">#定义函数getSum</span><br><span class="line">function getSum() {</span><br><span class="line">SUM=$[$n1+$n2]</span><br><span class="line">echo "和是=$SUM"</span><br><span class="line">}</span><br><span class="line">#输入两个值</span><br><span class="line">read -p "请输入一个数n1=" n1</span><br><span class="line">read -p "请输入一个数n2=" n2</span><br><span class="line">#调用自定义函数</span><br><span class="line">getSum $n1 $n2</span><br></pre></td></tr></tbody></table></figure>

<h2 id="p105-Shell-编程综合案例"><a href="#p105-Shell-编程综合案例" class="headerlink" title="p105 Shell 编程综合案例"></a>p105 Shell 编程综合案例</h2><h3 id="17-13-1-需求分析"><a href="#17-13-1-需求分析" class="headerlink" title="17.13.1 需求分析"></a>17.13.1 需求分析</h3><ol>
<li>每天凌晨2:30 备份数据库hspedu 到/data/backup/db</li>
<li>备份开始和备份结束能够给出相应的提示信息</li>
<li>备份后的文件要求以备份时间为文件名，并打包成.tar.gz 的形式，比如：2021-03-12_230201.tar.gz</li>
<li>在备份的同时，检查是否有10 天前备份的数据库文件，如果有就将其删除。</li>
<li>画一个思路分析图</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103242.png" alt="image-20210223111934958"></p>
<h4 id="17-13-2-代码-usr-sbin-mysql-db-backup-sh"><a href="#17-13-2-代码-usr-sbin-mysql-db-backup-sh" class="headerlink" title="17.13.2 代码/usr/sbin/mysql_db.backup.sh"></a>17.13.2 代码/usr/sbin/mysql_db.backup.sh</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#备份目录</span><br><span class="line">BACKUP=/data/backup/db</span><br><span class="line">#当前时间</span><br><span class="line">DATETIME=$(date +%Y-%m-%d_%H%M%S)</span><br><span class="line">echo $DATETIME</span><br><span class="line">#数据库的地址</span><br><span class="line">HOST=localhost</span><br><span class="line">#数据库用户名</span><br><span class="line">DB_USER=root</span><br><span class="line">#数据库密码</span><br><span class="line">DB_PW=hspedu100</span><br><span class="line">#备份的数据库名</span><br><span class="line">DATABASE=hspedu</span><br><span class="line">#创建备份目录, 如果不存在，就创建</span><br><span class="line">[ ! -d "${BACKUP}/${DATETIME}" ] &amp;&amp; mkdir -p "${BACKUP}/${DATETIME}"</span><br><span class="line">#备份数据库</span><br><span class="line">mysqldump -u${DB_USER} -p${DB_PW} --host=${HOST} -q -R --databases ${DATABASE} | gzip &gt;</span><br><span class="line">${BACKUP}/${DATETIME}/$DATETIME.sql.gz</span><br><span class="line">#将文件处理成tar.gz</span><br><span class="line">cd ${BACKUP}</span><br><span class="line">tar -zcvf $DATETIME.tar.gz ${DATETIME}</span><br><span class="line">#删除对应的备份目录</span><br><span class="line">rm -rf ${BACKUP}/${DATETIME}</span><br><span class="line">#删除10 天前的备份文件</span><br><span class="line">find ${BACKUP} -atime +10 -name "*.tar.gz" -exec rm -rf {} \;</span><br><span class="line">echo "备份数据库${DATABASE} 成功~"</span><br></pre></td></tr></tbody></table></figure>

<h2 id="p106-备份数据库"><a href="#p106-备份数据库" class="headerlink" title="p106 备份数据库"></a>p106 备份数据库</h2><h2 id="p107-小结"><a href="#p107-小结" class="headerlink" title="p107 小结"></a>p107 小结</h2><h2 id="p108-Ubuntu安装"><a href="#p108-Ubuntu安装" class="headerlink" title="p108 Ubuntu安装"></a>p108 Ubuntu安装</h2><h2 id="p109-中文包"><a href="#p109-中文包" class="headerlink" title="p109 中文包"></a>p109 中文包</h2><h2 id="p110-ubuntu的root"><a href="#p110-ubuntu的root" class="headerlink" title="p110 ubuntu的root"></a>p110 ubuntu的root</h2><h4 id="18-4-1-介绍"><a href="#18-4-1-介绍" class="headerlink" title="18.4.1 介绍"></a>18.4.1 介绍</h4><p>安装ubuntu 成功后，都是普通用户权限，并没有最高root 权限，如果需要使用root 权限的时候，通常都会在命令<br>前面加上sudo 。有的时候感觉很麻烦。(演示)<br>我们一般使用su 命令来直接切换到root 用户的，但是如果没有给root 设置初始密码，就会抛出su : Authentication<br>failure 这样的问题。所以，我们只要给root 用户设置一个初始密码就好了。</p>
<h4 id="18-4-2-给root-用户设置密码并使用"><a href="#18-4-2-给root-用户设置密码并使用" class="headerlink" title="18.4.2 给root 用户设置密码并使用"></a>18.4.2 给root 用户设置密码并使用</h4><ol>
<li>输入sudo passwd 命令，设定root 用户密码。</li>
<li>设定root 密码成功后，输入su 命令，并输入刚才设定的root 密码，就可以切换成root 了。提示符$代表一般用户，<br>提示符#代表root 用户。</li>
<li>以后就可以使用root 用户了</li>
<li>输入exit 命令，退出root 并返回一般用户</li>
</ol>
<h2 id="p111-Ubuntu-下开发Python"><a href="#p111-Ubuntu-下开发Python" class="headerlink" title="p111 Ubuntu 下开发Python"></a>p111 Ubuntu 下开发Python</h2><h4 id="18-5-1-说明"><a href="#18-5-1-说明" class="headerlink" title="18.5.1 说明"></a>18.5.1 说明</h4><p>安装好Ubuntu 后，默认就已经安装好Python 的开发环境。</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103246.png" alt="image-20210224163302346"></p>
<h4 id="18-5-2-在Ubuntu-下开发一个Python-程序"><a href="#18-5-2-在Ubuntu-下开发一个Python-程序" class="headerlink" title="18.5.2 在Ubuntu 下开发一个Python 程序"></a>18.5.2 在Ubuntu 下开发一个Python 程序</h4><p>vi hello.py [编写hello.py]<br>python3 hello.py [运行hello.py]</p>
<h2 id="p112-APT-软件管理和远程登录"><a href="#p112-APT-软件管理和远程登录" class="headerlink" title="p112 APT 软件管理和远程登录"></a>p112 APT 软件管理和远程登录</h2><h3 id="19-1-apt-介绍"><a href="#19-1-apt-介绍" class="headerlink" title="19.1 apt 介绍"></a>19.1 apt 介绍</h3><p>apt 是Advanced Packaging Tool 的简称，是一款安装包管理工具。在Ubuntu 下，我们可以使用apt 命令进行软件包<br>的安装、删除、清理等，类似于Windows 中的软件管理工具。<br>unbuntu 软件管理的原理示意图：</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103249.png" alt="image-20210224164240421"></p>
<h3 id="19-2-Ubuntu-软件操作的相关命令"><a href="#19-2-Ubuntu-软件操作的相关命令" class="headerlink" title="19.2 Ubuntu 软件操作的相关命令"></a>19.2 Ubuntu 软件操作的相关命令</h3><p>sudo apt-get update 更新源</p>
<p>sudo apt-get install package 安装包</p>
<p>sudo apt-get remove package 删除包</p>
<p>sudo apt-cache search package 搜索软件包</p>
<p>sudo apt-cache show package 获取包的相关信息，如说明、大小、版本等</p>
<p>sudo apt-get install package –reinstall 重新安装包</p>
<p>sudo apt-get -f install 修复安装</p>
<p>sudo apt-get remove package –purge 删除包，包括配置文件等</p>
<p>sudo apt-get build-dep package 安装相关的编译环境</p>
<p>sudo apt-get upgrade 更新已安装的包</p>
<p>sudo apt-get dist-upgrade 升级系统</p>
<p>sudo apt-cache depends package 了解使用该包依赖那些包</p>
<p>sudo apt-cache rdepends package 查看该包被哪些包依赖</p>
<p>sudo apt-get source package</p>
<p>更新Ubuntu 软件下载地址</p>
<h4 id="19-3-1-原理介绍"><a href="#19-3-1-原理介绍" class="headerlink" title="19.3.1 原理介绍"></a>19.3.1 原理介绍</h4><p>(画出示意图)</p>
<h4 id="19-3-2-寻找国内镜像源"><a href="#19-3-2-寻找国内镜像源" class="headerlink" title="19.3.2 寻找国内镜像源"></a>19.3.2 寻找国内镜像源</h4><p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/">https://mirrors.tuna.tsinghua.edu.cn/</a><br>所谓的镜像源：可以理解为提供下载软件的地方，比如Android 手机上可以下载软件的安卓市场；iOS 手机上可<br>以下载软件的AppStore</p>
<h4 id="19-3-3-寻找国内镜像源"><a href="#19-3-3-寻找国内镜像源" class="headerlink" title="19.3.3 寻找国内镜像源"></a>19.3.3 寻找国内镜像源</h4><h4 id="19-3-4-备份Ubuntu-默认的源地址"><a href="#19-3-4-备份Ubuntu-默认的源地址" class="headerlink" title="19.3.4 备份Ubuntu 默认的源地址"></a>19.3.4 备份Ubuntu 默认的源地址</h4><p>sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103252.png" alt="image-20210225120327120"></p>
<h4 id="19-3-5-更新源服务器列表"><a href="#19-3-5-更新源服务器列表" class="headerlink" title="19.3.5 更新源服务器列表"></a>19.3.5 更新源服务器列表</h4><p>先清空sources.list 文件复制镜像网站的地址</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103257.png" alt="image-20210225120351316"></p>
<p>复制镜像网站的地址， 拷贝到sources.list 文件</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103301.png" alt="image-20210225120405564"></p>
<h2 id="p113-更新源和实例"><a href="#p113-更新源和实例" class="headerlink" title="p113 更新源和实例"></a>p113 更新源和实例</h2><h4 id="19-3-6-更新源"><a href="#19-3-6-更新源" class="headerlink" title="19.3.6 更新源"></a>19.3.6 更新源</h4><p>更新源地址：sudo apt-get update</p>
<h3 id="19-4-Ubuntu-软件安装，卸载的最佳实践"><a href="#19-4-Ubuntu-软件安装，卸载的最佳实践" class="headerlink" title="19.4 Ubuntu 软件安装，卸载的最佳实践"></a>19.4 Ubuntu 软件安装，卸载的最佳实践</h3><p>案例说明：使用apt 完成安装和卸载vim 软件，并查询vim 软件的信息：（因为使用了镜像网站， 速度很快）<br>sudo apt-get remove vim //删除<br>sudo apt-get install vim //安装<br>sudo apt-cache show vim //获取软件信息</p>
<h2 id="p114-ubuntu远程登录和集群"><a href="#p114-ubuntu远程登录和集群" class="headerlink" title="p114 ubuntu远程登录和集群"></a>p114 ubuntu远程登录和集群</h2><h4 id="19-5-1-ssh-介绍"><a href="#19-5-1-ssh-介绍" class="headerlink" title="19.5.1 ssh 介绍"></a>19.5.1 ssh 介绍</h4><p>SSH 为Secure Shell 的缩写，由IETF 的网络工作小组（Network Working Group）所制<br>定；SSH 为建立在应用层和传输层基础上的安全协议。</p>
<p>SSH 是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。常用于远程登录。几乎所有UNIX/LInux<br>平台都可运行SSH。<br>使用SSH 服务，需要安装相应的服务器和客户端。客户端和服务器的关系：如果，A 机器想被B 机器远程控制，<br>那么，A 机器需要安装SSH 服务器，B 机器需要安装SSH 客户端。<br>和CentOS 不一样，Ubuntu 默认没有安装SSHD 服务(使用netstat 指令查看: apt install net-tools)，因此，我们不能进行远程登录。</p>
<h4 id="19-5-2-原理示意图"><a href="#19-5-2-原理示意图" class="headerlink" title="19.5.2 原理示意图"></a>19.5.2 原理示意图</h4><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103305.png" alt="image-20210225135132153"></p>
<h4 id="19-5-3-安装SSH-和启用"><a href="#19-5-3-安装SSH-和启用" class="headerlink" title="19.5.3 安装SSH 和启用"></a>19.5.3 安装SSH 和启用</h4><p>sudo apt-get install openssh-server<br>执行上面指令后，在当前这台Linux 上就安装了SSH 服务端和客户端。<br>service sshd restart<br>执行上面的指令，就启动了sshd 服务。会监听端口22</p>
<h4 id="19-5-4-在Windows-使用XShell6-XFTP6-登录Ubuntu"><a href="#19-5-4-在Windows-使用XShell6-XFTP6-登录Ubuntu" class="headerlink" title="19.5.4 在Windows 使用XShell6/XFTP6 登录Ubuntu"></a>19.5.4 在Windows 使用XShell6/XFTP6 登录Ubuntu</h4><p>前面我们已经安装了XShell6，直接使用即可。<br>注意：使用hspEdu 用户登录，需要的时候再su - 切换成root 用户</p>
<h4 id="19-5-5-从一台linux-系统远程登陆另外一台linux-系统"><a href="#19-5-5-从一台linux-系统远程登陆另外一台linux-系统" class="headerlink" title="19.5.5 从一台linux 系统远程登陆另外一台linux 系统"></a>19.5.5 从一台linux 系统远程登陆另外一台linux 系统</h4><p>在创建服务器集群时，会使用到该技术</p>
<h5 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h5><p>ssh 用户名@IP<br>例如：ssh <a href="mailto:hspedu@192.168.200.130">hspedu@192.168.200.130</a><br>使用ssh 访问，如访问出现错误。可查看是否有该文件～/.ssh/known_ssh 尝试删除该文件解决，一般不会有问题</p>
<h5 id="登出"><a href="#登出" class="headerlink" title="登出"></a>登出</h5><p>登出命令：exit 或者logout</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103308.png" alt="image-20210225135212566"></p>
<h2 id="p115-小结"><a href="#p115-小结" class="headerlink" title="p115 小结"></a>p115 小结</h2><h2 id="p116-CentOS8-1-8-2的使用"><a href="#p116-CentOS8-1-8-2的使用" class="headerlink" title="p116 CentOS8.1/8.2的使用"></a>p116 CentOS8.1/8.2的使用</h2><h3 id="安装Centos8-1-8-2"><a href="#安装Centos8-1-8-2" class="headerlink" title="安装Centos8.1/8.2"></a>安装Centos8.1/8.2</h3><h4 id="20-1-1-Centos-下载地址"><a href="#20-1-1-Centos-下载地址" class="headerlink" title="20.1.1 Centos 下载地址"></a>20.1.1 Centos 下载地址</h4><p>CentOS-8.1.1911-x86_64-dvd1.iso CentOS 8.1/8.2 DVD 版8G (未来的主流.)<br><a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/centos/8.1.1911/isos/x86_64/">https://mirrors.aliyun.com/centos/8.1.1911/isos/x86_64/</a></p>
<h2 id="p117-日志管理"><a href="#p117-日志管理" class="headerlink" title="p117 日志管理"></a>p117 日志管理</h2><h3 id="21-1-基本介绍"><a href="#21-1-基本介绍" class="headerlink" title="21.1 基本介绍"></a>21.1 基本介绍</h3><ol>
<li>日志文件是重要的系统信息文件，其中记录了许多重要的系统事件，包括用户的登录信息、系统的启动信息、系统<br>的安全信息、邮件相关信息、各种服务相关信息等。</li>
<li>日志对于安全来说也很重要，它记录了系统每天发生的各种事情，通过日志来检查错误发生的原因，或者受到攻击<br>时攻击者留下的痕迹。</li>
<li>可以这样理解日志是用来记录重大事件的工具</li>
</ol>
<h3 id="21-2-系统常用的日志"><a href="#21-2-系统常用的日志" class="headerlink" title="21.2 系统常用的日志"></a>21.2 系统常用的日志</h3><p> /var/log/ 目录就是系统日志文件的保存位置，看张图<br><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103311.png" alt="image-20210225154356225"></p>
<p>系统常用的日志</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103314.png" alt="image-20210225154408482"></p>
<h5 id="应用案例-2"><a href="#应用案例-2" class="headerlink" title="应用案例"></a>应用案例</h5><p>使用root 用户通过xshell6 登陆, 第一次使用错误的密码，第二次使用正确的密码登录成功<br>看看在日志文件/var/log/secure 里有没有记录相关信息</p>
<h2 id="p118-日志管理服务rsyslogd"><a href="#p118-日志管理服务rsyslogd" class="headerlink" title="p118 日志管理服务rsyslogd"></a>p118 日志管理服务rsyslogd</h2><h4 id="21-3-日志管理服务rsyslogd"><a href="#21-3-日志管理服务rsyslogd" class="headerlink" title="21.3 日志管理服务rsyslogd"></a>21.3 日志管理服务rsyslogd</h4><p>CentOS7.6 日志服务是rsyslogd ， CentOS6.x 日志服务是syslogd 。rsyslogd 功能更强大。rsyslogd 的使用、日志<br>文件的格式，和syslogd 服务兼容的。原理示意图</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103318.png" alt="image-20210225164253173"></p>
<h2 id="p119-日志服务配置文件"><a href="#p119-日志服务配置文件" class="headerlink" title="p119 日志服务配置文件"></a>p119 日志服务配置文件</h2><p>查询Linux 中的rsyslogd 服务是否启动<br>ps aux | grep “rsyslog” | grep -v “grep”</p>
<p>-v 表示反向匹配 表示查询不包含grep的服务</p>
<p>查询rsyslogd 服务的自启动状态<br>systemctl list-unit-files | grep rsyslog<br> 配置文件：/etc/rsyslog.conf<br>编辑文件时的格式为： <em>.</em> 存放日志文件<br>其中第一个<em>代表日志类型，第二个</em>代表日志级别</p>
<ol>
<li>日志类型分为：<br>auth ##pam 产生的日志</li>
</ol>
<p>authpriv ##ssh、ftp 等登录信息的验证信息<br>corn ##时间任务相关<br>kern ##内核<br>lpr ##打印<br>mail ##邮件<br>mark(syslog)-rsyslog##服务内部的信息，时间标识<br>news ##新闻组<br>user ##用户程序产生的相关信息<br>uucp ##unix to nuix copy 主机之间相关的通信<br>local 1-7 ##自定义的日志设备<br>2) 日志级别分为：<br>debug ##有调试信息的，日志通信最多<br>info ##一般信息日志，最常用<br>notice ##最具有重要性的普通条件的信息<br>warning ##警告级别<br>err ##错误级别，阻止某个功能或者模块不能正常工作的信息<br>crit ##严重级别，阻止整个系统或者整个软件不能正常工作的信息<br>alert ##需要立刻修改的信息<br>emerg ##内核崩溃等重要信息<br>none ##什么都不记录<br>注意：从上到下，级别从低到高，记录信息越来越少<br> 由日志服务rsyslogd 记录的日志文件，日志文件的格式包含以下4 列：</p>
<ol>
<li>事件产生的时间</li>
<li>产生事件的服务器的主机名</li>
<li>产生事件的服务名或程序名</li>
<li>事件的具体信息</li>
</ol>
<p>日志如何查看实例<br>查看一下/var/log/secure 日志，这个日志中记录的是用户验证和授权方面的信息来分析如何查看</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103321.png" alt="image-20210225164345348"></p>
<h2 id="p120-自定义日志服务"><a href="#p120-自定义日志服务" class="headerlink" title="p120 自定义日志服务"></a>p120 自定义日志服务</h2><p>日志管理服务应用实例<br>在/etc/rsyslog.conf 中添加一个日志文件/var/log/hsp.log,当有事件发送时(比如sshd 服务相关事件)，该文件会接收到<br>信息并保存. 给小伙伴演示重启，登录的情况，看看是否有日志保存</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103324.png" alt="image-20210225164353977"></p>
<h2 id="p121-日志轮替"><a href="#p121-日志轮替" class="headerlink" title="p121 日志轮替"></a>p121 日志轮替</h2><h3 id="21-4-1-基本介绍"><a href="#21-4-1-基本介绍" class="headerlink" title="21.4.1 基本介绍"></a>21.4.1 基本介绍</h3><p>日志轮替就是把旧的日志文件移动并改名，同时建立新的空日志文件，当旧日志文件超出保存的范围之后，就会进<br>行删除</p>
<h3 id="21-4-2-日志轮替文件命名"><a href="#21-4-2-日志轮替文件命名" class="headerlink" title="21.4.2 日志轮替文件命名"></a>21.4.2 日志轮替文件命名</h3><ol>
<li><p>centos7 使用logrotate 进行日志轮替管理，要想改变日志轮替文件名字，通过/etc/logrotate.conf 配置文件中“dateext”<br>参数：</p>
</li>
<li><p>如果配置文件中有“dateext”参数，那么日志会用日期来作为日志文件的后缀，例如“secure-20201010”。这样日<br>志文件名不会重叠，也就不需要日志文件的改名， 只需要指定保存日志个数，删除多余的日志文件即可。</p>
</li>
<li><p>如果配置文件中没有“dateext”参数，日志文件就需要进行改名了。当第一次进行日志轮替时，当前的“secure”日<br>志会自动改名为“secure.1”，然后新建“secure”日志， 用来保存新的日志。当第二次进行日志轮替时，“secure.1”<br>会自动改名为“secure.2”， 当前的“secure”日志会自动改名为“secure.1”，然后也会新建“secure”日志，用来<br>保存新的日志，以此类推。</p>
</li>
</ol>
<h3 id="21-4-3-logrotate-配置文件"><a href="#21-4-3-logrotate-配置文件" class="headerlink" title="21.4.3 logrotate 配置文件"></a>21.4.3 logrotate 配置文件</h3><p>/etc/logrotate.conf 为logrotate 的全局配置文件</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># rotate log files weekly, 每周对日志文件进行一次轮替</span><br><span class="line"></span><br><span class="line">weekly</span><br><span class="line"></span><br><span class="line"># keep 4 weeks worth of backlogs, 共保存4 份日志文件，当建立新的日志文件时，旧的将会被删除</span><br><span class="line"></span><br><span class="line">rotate 4</span><br><span class="line"></span><br><span class="line"># create new (empty) log files after rotating old ones, 创建新的空的日志文件，在日志轮替后</span><br><span class="line"></span><br><span class="line">create</span><br><span class="line"></span><br><span class="line"># use date as a suffix of the rotated file, 使用日期作为日志轮替文件的后缀</span><br><span class="line"></span><br><span class="line">dateext</span><br><span class="line"></span><br><span class="line"># uncomment this if you want your log files compressed, 日志文件是否压缩。如果取消注释，则日志会在转储的同时进</span><br><span class="line"></span><br><span class="line">行压缩</span><br><span class="line">#compress</span><br><span class="line">#RPM packages drop log rotation information into this directory</span><br><span class="line">include /etc/logrotate.d</span><br><span class="line"></span><br><span class="line"># 包含/etc/logrotate.d/ 目录中所有的子配置文件。也就是说会把这个目录中所有子配置文件读取进来，</span><br><span class="line"></span><br><span class="line">#下面是单独设置，优先级更高。</span><br><span class="line"></span><br><span class="line"># no packages own wtmp and btmp -- we'll rotate them here</span><br><span class="line"></span><br><span class="line">/var/log/wtmp {</span><br><span class="line">monthly # 每月对日志文件进行一次轮替</span><br><span class="line"></span><br><span class="line">create 0664 root utmp # 建立的新日志文件，权限是0664 ，所有者是root ，所属组是utmp 组</span><br><span class="line">minsize 1M # 日志文件最小轮替大小是1MB 。也就是日志一定要超过1MB 才会轮替，否则就算时间达到</span><br><span class="line">一个月，也不进行日志转储</span><br><span class="line">rotate 1 # 仅保留一个日志备份。也就是只有wtmp 和wtmp.1 日志保留而已</span><br><span class="line">}</span><br><span class="line">/var/log/btmp {</span><br><span class="line">missingok # 如果日志不存在，则忽略该日志的警告信息</span><br><span class="line">monthly</span><br><span class="line">create 0600 root utmp</span><br><span class="line">rotate 1</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="p122-自定义日志轮替"><a href="#p122-自定义日志轮替" class="headerlink" title="p122 自定义日志轮替"></a>p122 自定义日志轮替</h2><h4 id="参数说明-1"><a href="#参数说明-1" class="headerlink" title="参数说明"></a>参数说明</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">参数参数说明</span><br><span class="line">daily 日志的轮替周期是每天</span><br><span class="line">weekly 日志的轮替周期是每周</span><br><span class="line">monthly 日志的轮替周期是每月</span><br><span class="line">rotate 数字保留的日志文件的个数。0 指没有备份</span><br><span class="line">compress 日志轮替时，旧的日志进行压缩</span><br><span class="line">create mode owner group 建立新日志，同时指定新日志的权限与所有者和所属组。</span><br><span class="line">mail address 当日志轮替时，输出内容通过邮件发送到指定的邮件地址。</span><br><span class="line">missingok 如果日志不存在，则忽略该日志的警告信息</span><br><span class="line">notifempty 如果日志为空文件，则不进行日志轮替</span><br><span class="line">minsize 大小日志轮替的最小值。也就是日志一定要达到这个最小值才会轮替，否则就算时间达到也</span><br><span class="line">不轮替</span><br><span class="line">size 大小日志只有大于指定大小才进行日志轮替，而不是按照时间轮替。</span><br><span class="line">dateext 使用日期作为日志轮替文件的后缀。</span><br><span class="line">sharedscripts 在此关键字之后的脚本只执行一次。</span><br><span class="line">prerotate/endscript 在日志轮替之前执行脚本命令。</span><br><span class="line">postrotate/endscript 在日志轮替之后执行脚本命令。</span><br></pre></td></tr></tbody></table></figure>

<h3 id="21-4-4-把自己的日志加入日志轮替"><a href="#21-4-4-把自己的日志加入日志轮替" class="headerlink" title="21.4.4 把自己的日志加入日志轮替"></a>21.4.4 把自己的日志加入日志轮替</h3><ol>
<li>第一种方法是直接在/etc/logrotate.conf 配置文件中写入该日志的轮替策略</li>
<li>第二种方法是在/etc/logrotate.d/目录中新建立该日志的轮替文件，在该轮替文件中写入正确的轮替策略，因为该目录<br>中的文件都会被“include”到主配置文件中，所以也可以把日志加入轮替。</li>
<li>推荐使用第二种方法，因为系统中需要轮替的日志非常多，如果全都直接写入/etc/logrotate.conf 配置文件，那么这<br>个文件的可管理性就会非常差，不利于此文件的维护。</li>
<li>在/etc/logrotate.d/ 配置轮替文件一览</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103328.png" alt="image-20210226134642042"></p>
<h3 id="21-4-5-应用实例"><a href="#21-4-5-应用实例" class="headerlink" title="21.4.5 应用实例"></a>21.4.5 应用实例</h3><p>看一个案例, 在/etc/logrotate.conf 进行配置, 或者直接在/etc/logrotate.d/ 下创建文件hsplog 编写如下内容, 具体<br>轮替的效果可以参考/var/log 下的boot.log 情况.</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103331.png" alt="image-20210226134658670"></p>
<h2 id="p123-日志轮替机制原理"><a href="#p123-日志轮替机制原理" class="headerlink" title="p123 日志轮替机制原理"></a>p123 日志轮替机制原理</h2><h3 id="21-5-日志轮替机制原理"><a href="#21-5-日志轮替机制原理" class="headerlink" title="21.5 日志轮替机制原理"></a>21.5 日志轮替机制原理</h3><p>日志轮替之所以可以在指定的时间备份日志，是依赖系统定时任务。在/etc/cron.daily/目录，就会发现这个目录中是有logrotate 文件(可执行)，logrotate 通过这个文件依赖定时任务执行的。</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103334.png" alt="image-20210301104806772"></p>
<h2 id="p124-查看内存日志"><a href="#p124-查看内存日志" class="headerlink" title="p124 查看内存日志"></a>p124 查看内存日志</h2><p>journalctl 可以查看内存日志, 这里我们看看常用的指令<br>journalctl ##查看全部<br>journalctl -n 3 ##查看最新3 条<br>journalctl –since 19:00 –until 19:10:10 #查看起始时间到结束时间的日志可加日期<br>journalctl -p err ##报错日志<br>journalctl -o verbose ##日志详细内容<br>journalctl _PID=1245 _COMM=sshd ##查看包含这些参数的日志（在详细日志查看）<br>或者journalctl | grep sshd</p>
<p>注意: journalctl 查看的是内存日志, 重启清空<br>演示案例:<br>使用journalctl | grep sshd 来看看用户登录清空, 重启系统，再次查询，看看日志有什么变化没有</p>
<h2 id="p125-小结"><a href="#p125-小结" class="headerlink" title="p125 小结"></a>p125 小结</h2><h2 id="p126-定制自己的linux系统"><a href="#p126-定制自己的linux系统" class="headerlink" title="p126 定制自己的linux系统"></a>p126 定制自己的linux系统</h2><h3 id="22-1-基本介绍"><a href="#22-1-基本介绍" class="headerlink" title="22.1 基本介绍"></a>22.1 基本介绍</h3><p>通过裁剪现有Linux 系统(CentOS7.6)，创建属于自己的min Linux 小系统，可以加深我们对linux 的理解。<br>老韩利用centos7.6，搭建一个小小linux 系统, 很有趣。</p>
<h3 id="22-2-基本原理"><a href="#22-2-基本原理" class="headerlink" title="22.2 基本原理"></a>22.2 基本原理</h3><p>启动流程介绍：<br>制作Linux 小系统之前，再了解一下Linux 的启动流程：<br>1、首先Linux 要通过自检，检查硬件设备有没有故障<br>2、如果有多块启动盘的话，需要在BIOS 中选择启动磁盘<br>3、启动MBR 中的bootloader 引导程序<br>4、加载内核文件<br>5、执行所有进程的父进程、老祖宗systemd<br>6、欢迎界面<br>在Linux 的启动流程中，加载内核文件时关键文件：<br>1）kernel 文件: vmlinuz-3.10.0-957.el7.x86_64<br>2）initrd 文件: initramfs-3.10.0-957.el7.x86_64.img</p>
<h3 id="22-3-制作min-linux-思路分析"><a href="#22-3-制作min-linux-思路分析" class="headerlink" title="22.3 制作min linux 思路分析"></a>22.3 制作min linux 思路分析</h3><ol>
<li>在现有的Linux 系统(centos7.6)上加一块硬盘/dev/sdb，在硬盘上分两个分区，一个是/boot，一个是/，并将其格式化。<br>需要明确的是，现在加的这个硬盘在现有的Linux 系统中是/dev/sdb，但是，当我们把东西全部设置好时，要把这个<br>硬盘拔除，放在新系统上，此时，就是/dev/sda</li>
<li>在/dev/sdb 硬盘上，将其打造成独立的Linux 系统，里面的所有文件是需要拷贝进去的</li>
<li>作为能独立运行的Linux 系统，内核是一定不能少，要把内核文件和initramfs 文件也一起拷到/dev/sdb 上</li>
<li>以上步骤完成，我们的自制Linux 就完成, 创建一个新的linux 虚拟机，将其硬盘指向我们创建的硬盘，启动即可</li>
<li>示意图</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103337.png" alt="image-20210301134859946"></p>
<h3 id="制作自己的min-linux-基于CentOS7-6"><a href="#制作自己的min-linux-基于CentOS7-6" class="headerlink" title="制作自己的min linux(基于CentOS7.6)"></a><strong>制作自己的min linux(基于CentOS7.6)</strong></h3><ol>
<li>首先，我们在现有的linux添加一块大小为20G的硬盘</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103355.png" alt="image-20210301145006791"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103400.png" alt="image-20210301145016514"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103408.png" alt="image-20210301145022970"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103412.png" alt="image-20210301145029299"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103416.png" alt="image-20210301145034675"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103420.png" alt="image-20210301145040827"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103422.png" alt="image-20210301145045883"></p>
<p>点击完成，就OK了， 可以使用 lsblk 查看，需要重启</p>
<ol start="2">
<li>添加完成后，点击确定，然后启动现有的linux(centos7.6)。 通过fdisk来给我们的/dev/sdb进行分区</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"> 1 [root@localhost ~]# fdisk /dev/sdb</span><br><span class="line"> 2 Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel</span><br><span class="line"> 3 Building a new DOS disklabel with disk identifier 0x4fde4cd0.</span><br><span class="line"> 4 Changes will remain in memory only, until you decide to write them.</span><br><span class="line"> 5 After that, of course, the previous content won't be recoverable.</span><br><span class="line"> 6 </span><br><span class="line"> 7  </span><br><span class="line"> 8 Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)</span><br><span class="line"> 9 </span><br><span class="line">10  </span><br><span class="line">11 WARNING: DOS-compatible mode is deprecated. It's strongly recommended to</span><br><span class="line">12 switch off the mode (command 'c') and change display units to</span><br><span class="line">13 sectors (command 'u').</span><br><span class="line">14 </span><br><span class="line">15 </span><br><span class="line">16 Command (m for help): n</span><br><span class="line">17 Command action</span><br><span class="line">18 e extended</span><br><span class="line">19 p primary partition (1-4)</span><br><span class="line">20 p</span><br><span class="line">21 Partition number (1-4): 1</span><br><span class="line">22 First cylinder (1-2610, default 1):</span><br><span class="line">23 Using default value 1</span><br><span class="line">24 Last cylinder, +cylinders or +size{K,M,G} (1-2610, default 2610): +500M</span><br><span class="line">25 </span><br><span class="line">26 </span><br><span class="line">27 Command (m for help): n</span><br><span class="line">28 Command action</span><br><span class="line">29 e extended</span><br><span class="line">30 p primary partition (1-4)</span><br><span class="line">31 p</span><br><span class="line">32 Partition number (1-4): 2</span><br><span class="line">33 First cylinder (15-2610, default 15):</span><br><span class="line">34 Using default value 15</span><br><span class="line">35 Last cylinder, +cylinders or +size{K,M,G} (15-2610, default 2610):</span><br><span class="line">36 Using default value 2610</span><br><span class="line">37 #查看分区</span><br><span class="line">38 Command (m for help): p</span><br><span class="line">39 </span><br><span class="line">40  </span><br><span class="line">41 Disk /dev/sdb: 21.5 GB, 21474836480 bytes</span><br><span class="line">42 255 heads, 63 sectors/track, 2610 cylinders</span><br><span class="line">43 Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">44 Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">45 I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">46 Disk identifier: 0x4fde4cd0</span><br><span class="line">47 </span><br><span class="line">48  </span><br><span class="line">49 Device Boot Start End Blocks Id System</span><br><span class="line">50 /dev/sdb1 1 14 112423+ 83 Linux</span><br><span class="line">51 /dev/sdb2 15 2610 20852370 83 Linux</span><br><span class="line">52 #保存并退出</span><br><span class="line">53 Command (m for help): w</span><br><span class="line">54 The partition table has been altered!</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>接下来，我们对/dev/sdb的分区进行格式化</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mkfs.ext4 /dev/sdb1</span><br><span class="line">[root@localhost ~]# mkfs.ext4 /dev/sdb2 </span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li>创建目录，并挂载新的磁盘</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#mkdir -p /mnt/boot /mnt/sysroot </span><br><span class="line">#mount /dev/sdb1 /mnt/boot </span><br><span class="line">#mount /dev/sdb2 /mnt/sysroot/</span><br></pre></td></tr></tbody></table></figure>

<ol start="5">
<li>安装grub, 内核文件拷贝至目标磁盘</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#grub2-install --root-directory=/mnt /dev/sdb</span><br><span class="line">#我们可以来看一下二进制确认我们是否安装成功</span><br><span class="line">#hexdump -C -n 512 /dev/sdb    </span><br><span class="line">#cp -rf /boot/*  /mnt/boot/</span><br></pre></td></tr></tbody></table></figure>

<ol start="6">
<li>修改 grub2/grub.cfg 文件, 标红的部分 是需要使用 指令来查看的</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103426.png" alt="image-20210301145323167"></p>
<p>在grub.cfg文件中 , 红色部分用 上面 sdb1 的 UUID替换，蓝色部分用 sdb2的UUID来替换, 紫色部分是添加的，表示</p>
<p>selinux给关掉，同时设定一下init，告诉内核不要再去找这个程序了，不然开机的时候会出现错误的</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">### BEGIN /etc/grub.d/10_linux ###</span><br><span class="line">menuentry 'CentOS Linux (3.10.0-957.el7.x86_64) 7 (Core)' --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-3.10.0-957.el7.x86_64-advanced-2eef594e-68fc-49a0-8b23-07cf87dda424' {</span><br><span class="line">	load_video</span><br><span class="line">	set gfxpayload=keep</span><br><span class="line">	insmod gzio</span><br><span class="line">	insmod part_msdos</span><br><span class="line">	insmod ext2</span><br><span class="line">	set root='hd0,msdos1'</span><br><span class="line">	if [ x$feature_platform_search_hint = xy ]; then</span><br><span class="line">	  search --no-floppy --fs-uuid --set=root --hint-bios=hd0,msdos1 --hint-efi=hd0,msdos1 --hint-baremetal=ahci0,msdos1</span><br><span class="line">--hint='hd0,msdos1'  6ba72e9a-19ec-4552-ae54-e35e735142d4</span><br><span class="line">	else</span><br><span class="line">	  search --no-floppy --fs-uuid --set=root 6ba72e9a-19ec-4552-ae54-e35e735142d4</span><br><span class="line">	fi</span><br><span class="line">	linux16 /vmlinuz-3.10.0-957.el7.x86_64 root=UUID=d2e0ce0f-e209-472a-a4f1-4085f777d9bb ro crashkernel=auto rhgb quiet LANG=zh_CN.UTF-8  selinux=0 init=/bin/bash</span><br><span class="line">	initrd16 /initramfs-3.10.0-957.el7.x86_64.img</span><br><span class="line">}</span><br><span class="line">menuentry 'CentOS Linux (0-rescue-5bd4fb8d8e9d4198983fc1344f652b5d) 7 (Core)' --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-0-rescue-5bd4fb8d8e9d4198983fc1344f652b5d-advanced-2eef594e-68fc-49a0-8b23-07cf87dda424' {</span><br><span class="line">	load_video</span><br><span class="line">	insmod gzio</span><br><span class="line">	insmod part_msdos</span><br><span class="line">	insmod ext2</span><br><span class="line">	set root='hd0,msdos1'</span><br><span class="line">	if [ x$feature_platform_search_hint = xy ]; then</span><br><span class="line">	  search --no-floppy --fs-uuid --set=root --hint-bios=hd0,msdos1 --hint-efi=hd0,msdos1 --hint-baremetal=ahci0,msdos1 --hint='hd0,msdos1'  6ba72e9a-19ec-4552-ae54-e35e735142d4</span><br><span class="line">	else</span><br><span class="line">	  search --no-floppy --fs-uuid --set=root 6ba72e9a-19ec-4552-ae54-e35e735142d4</span><br><span class="line">	fi</span><br><span class="line">	linux16 /vmlinuz-0-rescue-5bd4fb8d8e9d4198983fc1344f652b5d root=UUID=d2e0ce0f-e209-472a-a4f1-4085f777d9bb ro crashkernel=auto rhgb quiet selinux=0 init=/bin/bash</span><br><span class="line">	initrd16 /initramfs-0-rescue-5bd4fb8d8e9d4198983fc1344f652b5d.img</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">### END /etc/grub.d/10_linux ###</span><br></pre></td></tr></tbody></table></figure>

<ol start="7">
<li>创建目标主机根文件系统</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#mkdir -pv /mnt/sysroot/{etc/rc.d,usr,var,proc,sys,dev,lib,lib64,bin,sbin,boot,srv,mnt,media,home,root}  </span><br></pre></td></tr></tbody></table></figure>

<ol start="8">
<li>拷贝需要的bash(也可以拷贝你需要的指令)和库文件给新的系统使用</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#cp /lib64/*.* /mnt/sysroot/lib64/ </span><br><span class="line">#cp /bin/bash /mnt/sysroot/bin/ </span><br></pre></td></tr></tbody></table></figure>

<ol start="9">
<li>现在我们就可以创建一个新的虚拟机，然后将默认分配的硬盘 移除掉，指向我们刚刚创建的磁盘即可.</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103429.png" alt="image-20210301145604557"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103432.png" alt="image-20210301145609028"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103435.png" alt="image-20210301145614315"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103438.png" alt="image-20210301145618467"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103441.png" alt="image-20210301145623533"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103443.png" alt="image-20210301145627627"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103446.png" alt="image-20210301145632539"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103449.png" alt="image-20210301145644662"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103451.png" alt="image-20210301145649091"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103454.png" alt="image-20210301145652835"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103457.png" alt="image-20210301145656635"></p>
<ol start="10">
<li><p>这时，很多指令都不能使用，比如 ls , reboot 等，可以将需要的指令拷贝到对应的目录即可</p>
</li>
<li><p>如果要拷贝指令，<strong>重新进入到原来的</strong> <strong>linux****系统拷贝相应的指令即可</strong>，比较将 /bin/ls 拷贝到 /mnt/sysroot/bin 将/sbin/reboot 拷贝到 /mnt/sysroot/sbin </p>
</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@hspedu100 ~]# mount /dev/sdb2 /mnt/sysroot/</span><br><span class="line">[root@hspedu100 ~]# cp /bin/ls /mnt/sysroot/bin/</span><br><span class="line">[root@hspedu100 ~]# cp /bin/systemctl  /mnt/sysroot/bin/</span><br><span class="line">[root@hspedu100 ~]# cp /sbin/reboot /mnt/sysroot/sbin/</span><br></pre></td></tr></tbody></table></figure>

<ol start="12">
<li>   再重新启动新的min linux系统，就可以使用 ls , reboot 指令了</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103500.png" alt="image-20210301145751469"></p>
<h2 id="p127-定制自己的linux系统-2"><a href="#p127-定制自己的linux系统-2" class="headerlink" title="p127 定制自己的linux系统(2)"></a>p127 定制自己的linux系统(2)</h2><h2 id="p128-小结"><a href="#p128-小结" class="headerlink" title="p128 小结"></a>p128 小结</h2><h2 id="p129-Linux-内核源码介绍-amp-内核升级"><a href="#p129-Linux-内核源码介绍-amp-内核升级" class="headerlink" title="p129 Linux 内核源码介绍&amp;内核升级"></a>p129 Linux 内核源码介绍&amp;内核升级</h2><h3 id="23-1-为什么要阅读linux-内核"><a href="#23-1-为什么要阅读linux-内核" class="headerlink" title="23.1 为什么要阅读linux 内核?"></a>23.1 为什么要阅读linux 内核?</h3><ol>
<li>爱好，就是喜欢linux(黑客精神)</li>
<li>想深入理解linux 底层运行机制，对操作系统有深入理解</li>
<li>阅读Linux 内核，你会对整个计算机体系有一个更深刻的认识。作为开发者，不管你从事的是驱动开发，应用开发<br>还是后台开发，你都需要了解操作系统内核的运行机制，这样才能写出更好的代码。</li>
<li>作为开发人员不应该只局限在自己的领域，你设计的模块看起来小，但是你不了解进程的调用机制，你不知道进程<br>为什么会阻塞、就绪、执行几个状态。那么很难写出优质的代码。</li>
<li>找工作面试的需要<br><span class="github-emoji"><span>😏</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 老韩忠告，作为有追求的程序员，还是应该深入的了解一个操作系统的底层机制,(比如linux/unix) 最好是源码级别<br>的，这样你写多线程高并发程序，包括架构，优化，算法等，高度不一样的，当然老韩也不是要求小伙伴儿把一个<br>非常庞大的Linux 内核每一行都读懂。我觉得。你至少能看几个核心的模块。</li>
</ol>
<h3 id="23-2-linux0-01-内核源码"><a href="#23-2-linux0-01-内核源码" class="headerlink" title="23.2 linux0.01 内核源码"></a>23.2 linux0.01 内核源码</h3><p>23.2.1 基本介绍<br>Linux 的内核源代码可以从网上下载, 解压缩后文件一般也都位于linux 目录下。内核源代码有很多版本，可以从<br>linux0.01 内核入手，总共的代码1w 行左右， 最新版本5.9.8 总共代码超过700w 行，非常庞大.<br>内核地址：<a target="_blank" rel="noopener" href="https://www.kernel.org/">https://www.kernel.org/</a></p>
<p>很多人害怕读Linux 内核，Linux 内核这样大而复杂的系统代码，阅读起来确实有很多困难，但是也不象想象的那<br>么高不可攀。老韩建议可以从linux0.01 入手。</p>
<h2 id="p130-linux0-01-内核源码目录-amp-阅读"><a href="#p130-linux0-01-内核源码目录-amp-阅读" class="headerlink" title="p130 linux0.01 内核源码目录&amp;阅读"></a>p130 linux0.01 内核源码目录&amp;阅读</h2><h3 id="23-2-2-linux0-01-内核源码目录-amp-阅读"><a href="#23-2-2-linux0-01-内核源码目录-amp-阅读" class="headerlink" title="23.2.2 linux0.01 内核源码目录&amp;阅读"></a>23.2.2 linux0.01 内核源码目录&amp;阅读</h3><p>老韩提示阅读内核源码技巧</p>
<ol>
<li>linux0.01 的阅读需要懂c 语言</li>
<li>阅读源码前，应知道Linux 内核源码的整体分布情况。现代的操作系统一般由进程管理、内存管理、文件系统、驱<br>动程序和网络等组成。Linux 内核源码的各个目录大致与此相对应.</li>
<li>在阅读方法或顺序上，有纵向与横向之分。所谓纵向就是顺着程序的执行顺序逐步进行；所谓横向，就是按模块进<br>行。它们经常结合在一起进行。</li>
<li>对于Linux 启动的代码可顺着Linux 的启动顺序一步步来阅读；对于像内存管理部分，可以单独拿出来进行阅读分<br>析。实际上这是一个反复的过程，不可能读一遍就理解<br>linux 内核源码阅读&amp;目录介绍&amp;main.c 说明</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103503.png" alt="image-20210301174633732"></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103506.png" alt="image-20210301174643079"></p>
<h2 id="p131-linux-内核最新版和内核升级"><a href="#p131-linux-内核最新版和内核升级" class="headerlink" title="p131 linux 内核最新版和内核升级"></a>p131 linux 内核最新版和内核升级</h2><h4 id="23-3-1-内核地址：https-www-kernel-org-查看"><a href="#23-3-1-内核地址：https-www-kernel-org-查看" class="headerlink" title="23.3.1 内核地址：https://www.kernel.org/ 查看"></a>23.3.1 内核地址：<a target="_blank" rel="noopener" href="https://www.kernel.org/">https://www.kernel.org/</a> 查看</h4><h4 id="23-3-2-下载-amp-解压最新版"><a href="#23-3-2-下载-amp-解压最新版" class="headerlink" title="23.3.2 下载&amp;解压最新版"></a>23.3.2 下载&amp;解压最新版</h4><p>wget <a target="_blank" rel="noopener" href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.11.2.tar.gz">https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.11.2.tar.gz</a><br>tar -zxvf linux-5.8.16.tar.gz</p>
<h4 id="23-3-3-linux-内核升级应用实例"><a href="#23-3-3-linux-内核升级应用实例" class="headerlink" title="23.3.3 linux 内核升级应用实例"></a>23.3.3 linux 内核升级应用实例</h4><p>将Centos 系统从7.6 内核升级到7.8 版本内核(兼容性问题)</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103509.png" alt="image-20210301181655226"></p>
<h4 id="23-3-4-具体步骤，看老师演示"><a href="#23-3-4-具体步骤，看老师演示" class="headerlink" title="23.3.4 具体步骤，看老师演示"></a>23.3.4 具体步骤，看老师演示</h4><p>uname -a // 查看当前的内核版本<br>yum info kernel -q //检测内核版本，显示可以升级的内核<br>yum update kernel //升级内核<br>yum list kernel -q //查看已经安装的内核</p>
<h2 id="p132-linux-内核最新版和内核升级-2"><a href="#p132-linux-内核最新版和内核升级-2" class="headerlink" title="p132 linux 内核最新版和内核升级(2)"></a>p132 linux 内核最新版和内核升级(2)</h2><h2 id="p133-第24-章linux-系统-备份与恢复"><a href="#p133-第24-章linux-系统-备份与恢复" class="headerlink" title="p133 第24 章linux 系统-备份与恢复"></a>p133 第24 章linux 系统-备份与恢复</h2><h3 id="24-1-基本介绍"><a href="#24-1-基本介绍" class="headerlink" title="24.1 基本介绍"></a>24.1 基本介绍</h3><p>实体机无法做快照，如果系统出现异常或者数据损坏，后果严重， 要重做系统，还会造成数据丢失。所以我们可<br>以使用备份和恢复技术<br>linux 的备份和恢复很简单， 有两种方式：</p>
<ol>
<li>把需要的文件(或者分区)用TAR 打包就行，下次需要恢复的时候，再解压开覆盖即可</li>
<li>使用dump 和restore 命令</li>
<li>示意图</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103512.png" alt="image-20210302115649592"></p>
<h3 id="24-2-安装dump-和restore"><a href="#24-2-安装dump-和restore" class="headerlink" title="24.2 安装dump 和restore"></a>24.2 安装dump 和restore</h3><p>如果linux 上没有dump 和restore 指令，需要先按照<br>yum -y install dump<br>yum -y install restore</p>
<h3 id="24-3-使用dump-完成备份"><a href="#24-3-使用dump-完成备份" class="headerlink" title="24.3 使用dump 完成备份"></a>24.3 使用dump 完成备份</h3><h4 id="24-3-1-基本介绍"><a href="#24-3-1-基本介绍" class="headerlink" title="24.3.1 基本介绍"></a>24.3.1 基本介绍</h4><p>dump 支持分卷和增量备份（所谓增量备份是指备份上次备份后修改/增加过的文件，也称差异备份）。</p>
<h4 id="24-3-2-dump-语法说明"><a href="#24-3-2-dump-语法说明" class="headerlink" title="24.3.2 dump 语法说明"></a>24.3.2 dump 语法说明</h4><p>dump [ -cu] [-123456789] [ -f &lt;备份后文件名&gt;] [-T &lt;日期&gt;] [ 目录或文件系统]<br>dump []-wW<br>-c ： 创建新的归档文件，并将由一个或多个文件参数所指定的内容写入归档文件的开头。<br>-0123456789： 备份的层级。0 为最完整备份，会备份所有文件。若指定0 以上的层级，则备份至上一次备份以来<br>修改或新增的文件, 到9 后，可以再次轮替.<br>-f &lt;备份后文件名&gt;： 指定备份后文件名<br>-j : 调用bzlib 库压缩备份文件，也就是将备份后的文件压缩成bz2 格式，让文件更小<br>-T &lt;日期&gt;： 指定开始备份的时间与日期<br>-u ： 备份完毕后，在/etc/dumpdares 中记录备份的文件系统，层级，日期与时间等。<br>-t ： 指定文件名，若该文件已存在备份文件中，则列出名称<br>-W ：显示需要备份的文件及其最后一次备份的层级，时间，日期。<br>-w ：与-W 类似，但仅显示需要备份的文件。</p>
<h4 id="24-3-3-dump-应用案例1"><a href="#24-3-3-dump-应用案例1" class="headerlink" title="24.3.3 dump 应用案例1"></a>24.3.3 dump 应用案例1</h4><p>将/boot 分区所有内容备份到/opt/boot.bak0.bz2 文件中，备份层级为“0”<br>􀀃dump -0uj -f /opt/boot.bak0.bz2 /boot</p>
<h4 id="24-3-4-dump-应用案例2"><a href="#24-3-4-dump-应用案例2" class="headerlink" title="24.3.4 dump 应用案例2"></a>24.3.4 dump 应用案例2</h4><p>在/boot 目录下增加新文件，备份层级为“1”(只备份上次使用层次“0”备份后发生过改变的数据), 注意比较看看<br>这次生成的备份文件boot1.bak 有多大<br>dump -1uj -f /opt/boot.bak1.bz2 /boot<br>老韩提醒: 通过dump 命令在配合crontab 可以实现无人值守备份</p>
<p>只有分区支持增量备份</p>
<h4 id="24-3-5-dump-W"><a href="#24-3-5-dump-W" class="headerlink" title="24.3.5 dump -W"></a>24.3.5 dump -W</h4><p>显示需要备份的文件及其最后一次备份的层级，时间，日期</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103515.png" alt="image-20210302115744713"></p>
<h4 id="24-3-6-查看备份时间文件"><a href="#24-3-6-查看备份时间文件" class="headerlink" title="24.3.6 查看备份时间文件"></a>24.3.6 查看备份时间文件</h4><p>cat /etc/dumpdates</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103518.png" alt="image-20210302115759588"></p>
<h4 id="24-3-7-dump-备份文件或者目录"><a href="#24-3-7-dump-备份文件或者目录" class="headerlink" title="24.3.7 dump 备份文件或者目录"></a>24.3.7 dump 备份文件或者目录</h4><p>前面我们在备份分区时，是可以支持增量备份的，如果备份文件或者目录，不再支持增量备份, 即只能使用0 级别<br>备份<br>案例， 使用dump 备份/etc 整个目录<br>dump -0j -f /opt/etc.bak.bz2 /etc/<br>#下面这条语句会报错，提示DUMP: Only level 0 dumps are allowed on a subdirectory<br>dump -1j -f /opt/etc.bak.bz2 /etc/</p>
<h4 id="24-3-8-老韩提醒"><a href="#24-3-8-老韩提醒" class="headerlink" title="24.3.8 老韩提醒"></a>24.3.8 老韩提醒</h4><p>如果是重要的备份文件， 比如数据区，建议将文件上传到其它服务器保存，不要将鸡蛋放在同一个篮子.</p>
<h2 id="p134-数据备份与恢复"><a href="#p134-数据备份与恢复" class="headerlink" title="p134 数据备份与恢复"></a>p134 数据备份与恢复</h2><h3 id="24-4-使用restore-完成恢复"><a href="#24-4-使用restore-完成恢复" class="headerlink" title="24.4 使用restore 完成恢复"></a>24.4 使用restore 完成恢复</h3><h4 id="24-4-1-基本介绍"><a href="#24-4-1-基本介绍" class="headerlink" title="24.4.1 基本介绍"></a>24.4.1 基本介绍</h4><p>restore 命令用来恢复已备份的文件，可以从dump 生成的备份文件中恢复原文件</p>
<h4 id="24-4-2-restore-基本语法"><a href="#24-4-2-restore-基本语法" class="headerlink" title="24.4.2 restore 基本语法"></a>24.4.2 restore 基本语法</h4><p>restore [模式选项] [选项]</p>
<p>说明下面四个模式， 不能混用，在一次命令中， 只能指定一种。<br>-C ：使用对比模式，将备份的文件与已存在的文件相互对比。<br>-i：使用交互模式，在进行还原操作时，restors 指令将依序询问用户<br>-r：进行还原模式<br>-t : 查看模式，看备份文件有哪些文件<br>选项<br>-f &lt;备份设备&gt;：从指定的文件中读取备份数据，进行还原操作</p>
<h4 id="24-4-3-应用案例1"><a href="#24-4-3-应用案例1" class="headerlink" title="24.4.3 应用案例1"></a>24.4.3 应用案例1</h4><p>restore 命令比较模式，比较备份文件和原文件的区别<br>测试<br>mv /boot/hello.java /boot/hello100.java<br>restore -C -f boot.bak1.bz2 //注意和最新的文件比较</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103521.png" alt="image-20210305172200189"></p>
<p>mv /boot/hello100.java /boot/hello.java<br>restore -C -f boot.bak1.bz2</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103524.png" alt="image-20210305172212863"></p>
<h4 id="24-4-4-应用案例2"><a href="#24-4-4-应用案例2" class="headerlink" title="24.4.4 应用案例2"></a>24.4.4 应用案例2</h4><p>restore 命令查看模式，看备份文件有哪些数据/文件</p>
<p>测试<br>restore -t -f boot.bak0.bz2</p>
<h4 id="24-4-5-应用案例3"><a href="#24-4-5-应用案例3" class="headerlink" title="24.4.5 应用案例3"></a>24.4.5 应用案例3</h4><p>restore 命令还原模式, 注意细节： 如果你有增量备份，需要把增量备份文件也进行恢复， 有几个增量备份文件，<br>就要恢复几个，按顺序来恢复即可。<br>测试<br>mkdir /opt/boottmp<br>cd /opt/boottmp<br>restore -r -f /opt/boot.bak0.bz2 //恢复到第1 次完全备份状态<br>restore -r -f /opt/boot.bak1.bz2 //恢复到第2 次增量备份状态</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103527.png" alt="image-20210305172244722"></p>
<h4 id="24-4-6-应用案例4"><a href="#24-4-6-应用案例4" class="headerlink" title="24.4.6 应用案例4"></a>24.4.6 应用案例4</h4><p>restore 命令恢复备份的文件，或者整个目录的文件<br>基本语法： restore -r -f 备份好的文件<br>测试<br>[root@hspedu100 opt]# mkdir etctmp<br>[root@hspedu100 opt]# cd etctmp/<br>[root@hspedu100 etctmp]# restore -r -f /opt/etc.bak0.bz2</p>
<h2 id="p135-数据备份与恢复（2）"><a href="#p135-数据备份与恢复（2）" class="headerlink" title="p135 数据备份与恢复（2）"></a>p135 数据备份与恢复（2）</h2><h2 id="p136-数据备份与恢复小结"><a href="#p136-数据备份与恢复小结" class="headerlink" title="p136 数据备份与恢复小结"></a>p136 数据备份与恢复小结</h2><h2 id="p137-Linux-可视化管理-webmin-和bt-运维工具"><a href="#p137-Linux-可视化管理-webmin-和bt-运维工具" class="headerlink" title="p137 Linux 可视化管理-webmin 和bt 运维工具"></a>p137 Linux 可视化管理-webmin 和bt 运维工具</h2><h3 id="25-1-webmin"><a href="#25-1-webmin" class="headerlink" title="25.1 webmin"></a>25.1 webmin</h3><h4 id="25-1-1-基本介绍"><a href="#25-1-1-基本介绍" class="headerlink" title="25.1.1 基本介绍"></a>25.1.1 基本介绍</h4><p>Webmin 是功能强大的基于Web 的Unix/linux 系统管理工具。管理员通过浏览器访问Webmin 的各种管理功能并完<br>成相应的管理操作。除了各版本的linux 以外还可用于：AIX、HPUX、Solaris、Unixware、Irix 和FreeBSD 等系统</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103530.png" alt="image-20210306093452146"></p>
<h4 id="25-1-2-安装webmin-amp-配置"><a href="#25-1-2-安装webmin-amp-配置" class="headerlink" title="25.1.2 安装webmin&amp;配置"></a>25.1.2 安装webmin&amp;配置</h4><ol>
<li>下载地址: <a target="_blank" rel="noopener" href="http://download.webmin.com/download/yum/">http://download.webmin.com/download/yum/</a> , 用下载工具下载即可</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103533.png" alt="image-20210306093509857"></p>
<p>也可以使用wget <a target="_blank" rel="noopener" href="http://download.webmin.com/download/yum/webmin-1.700-1.noarch.rpm">http://download.webmin.com/download/yum/webmin-1.700-1.noarch.rpm</a></p>
<ol start="2">
<li><p>安装： rpm -ivh webmin-1.700-1.noarch.rpm</p>
</li>
<li><p>重置密码/usr/libexec/webmin/changepass.pl /etc/webmin root test<br>root 是webmin 的用户名，不是OS 的, 这里就是把webmin 的root 用户密码改成了test</p>
</li>
<li><p>修改webmin 服务的端口号（默认是10000 出于安全目的）<br>vim /etc/webmin/miniserv.conf # 修改端口</p>
</li>
<li><p>将port=10000 修改为其他端口号，如port=6666</p>
</li>
<li><p>重启webmin<br>/etc/webmin/restart # 重启<br>/etc/webmin/start # 启动<br>/etc/webmin/stop # 停止</p>
</li>
<li><p>防火墙放开6666 端口<br>firewall-cmd –zone=public –add-port=6666/tcp –permanent # 配置防火墙开放6666 端口<br>firewall-cmd –reload # 更新防火墙配置<br>firewall-cmd –zone=public –list-ports # 查看已经开放的端口号</p>
</li>
</ol>
<h4 id="在这个位置我出现了登录不上去的问题，搜了很多方案没有解决-cry"><a href="#在这个位置我出现了登录不上去的问题，搜了很多方案没有解决-cry" class="headerlink" title="在这个位置我出现了登录不上去的问题，搜了很多方案没有解决:cry:"></a>在这个位置我出现了登录不上去的问题，搜了很多方案没有解决<span class="github-emoji"><span>😢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><p>包括 1.杀进程换端口 2.reboot 3.在gnu上登录</p>
<ol start="8">
<li>登录webmin<br><a target="_blank" rel="noopener" href="http://ip:6666/">http://ip:6666</a> 可以访问了<br>用root 账号和重置的新密码test</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103536.png" alt="image-20210306093559177"></p>
<h2 id="p138-webmin演示"><a href="#p138-webmin演示" class="headerlink" title="p138 webmin演示"></a>p138 webmin演示</h2><h4 id="25-1-3-简单使用演示"><a href="#25-1-3-简单使用演示" class="headerlink" title="25.1.3 简单使用演示"></a>25.1.3 简单使用演示</h4><p>比如修改语言设置，IP 访问控制，查看进程, 修改密码， 任务调度，mysql 等.</p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103539.png" alt="image-20210306093905143"></p>
<h2 id="p139-bt宝塔介绍和安装"><a href="#p139-bt宝塔介绍和安装" class="headerlink" title="p139 bt宝塔介绍和安装"></a>p139 bt宝塔介绍和安装</h2><h3 id="25-2-bt-宝塔"><a href="#25-2-bt-宝塔" class="headerlink" title="25.2 bt(宝塔)"></a>25.2 bt(宝塔)</h3><h4 id="25-2-1-基本介绍"><a href="#25-2-1-基本介绍" class="headerlink" title="25.2.1 基本介绍"></a>25.2.1 基本介绍</h4><p>bt 宝塔Linux 面板是提升运维效率的服务器管理软件，支持一键LAMP/LNMP/集群/监控/网站/FTP/数据库/JAVA 等<br>多项服务器管理功能。</p>
<h4 id="25-2-2-安装和使用"><a href="#25-2-2-安装和使用" class="headerlink" title="25.2.2 安装和使用"></a>25.2.2 安装和使用</h4><ol>
<li>安装: yum install -y wget &amp;&amp; wget -O install.sh <a target="_blank" rel="noopener" href="http://download.bt.cn/install/install_6.0.sh">http://download.bt.cn/install/install_6.0.sh</a> &amp;&amp; sh install.sh</li>
<li>安装成功后控制台会显示登录地址，账户密码，复制浏览器打开登录，</li>
</ol>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103542.png" alt="image-20210306104341551"></p>
<h4 id="myself-command"><a href="#myself-command" class="headerlink" title="myself command"></a>myself command</h4><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103545.png" alt="image-20210306104904512"></p>
<p>外网面板地址: <a target="_blank" rel="noopener" href="http://58.221.242.226:8888/d9b5227e">http://58.221.242.226:8888/d9b5227e</a><br>内网面板地址: <a target="_blank" rel="noopener" href="http://192.168.200.130:8888/d9b5227e">http://192.168.200.130:8888/d9b5227e</a><br>username: tz6prifg<br>password: 2276bcb2</p>
<h2 id="p140-介绍"><a href="#p140-介绍" class="headerlink" title="p140 介绍"></a>p140 介绍</h2><h4 id="25-2-3-使用介绍，-比如可以登录终端-配置，快捷安装运行环境和系统工具-添加计划任务脚本"><a href="#25-2-3-使用介绍，-比如可以登录终端-配置，快捷安装运行环境和系统工具-添加计划任务脚本" class="headerlink" title="25.2.3 使用介绍， 比如可以登录终端, 配置，快捷安装运行环境和系统工具, 添加计划任务脚本"></a>25.2.3 使用介绍， 比如可以登录终端, 配置，快捷安装运行环境和系统工具, 添加计划任务脚本</h4><p><a target="_blank" rel="noopener" href="http://192.168.200.130:8888/2e673418/">http://192.168.200.130:8888/2e673418/</a></p>
<p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103548.png" alt="image-20210306104404359"></p>
<h4 id="25-2-4-如果bt-的用户名，密码忘记了，使用bt-default-可以查看"><a href="#25-2-4-如果bt-的用户名，密码忘记了，使用bt-default-可以查看" class="headerlink" title="25.2.4 如果bt 的用户名，密码忘记了，使用bt default 可以查看"></a>25.2.4 如果bt 的用户名，密码忘记了，使用bt default 可以查看</h4><p><img src="https://gitee.com/penno/blogimg/raw/master/img/20210507103551.png" alt="image-20210306104415737"></p>
<h2 id="p141-小结"><a href="#p141-小结" class="headerlink" title="p141 小结"></a>p141 小结</h2><h2 id="p142-Linux-面试题-腾讯-百度-美团-滴滴"><a href="#p142-Linux-面试题-腾讯-百度-美团-滴滴" class="headerlink" title="p142 Linux 面试题-(腾讯,百度,美团,滴滴)"></a>p142 Linux 面试题-(腾讯,百度,美团,滴滴)</h2><h3 id="26-1-分析日志t-log-访问量-，将各个ip-地址截取，并统计出现次数-并按从大到小排序-腾讯"><a href="#26-1-分析日志t-log-访问量-，将各个ip-地址截取，并统计出现次数-并按从大到小排序-腾讯" class="headerlink" title="26.1 分析日志t.log(访问量)，将各个ip 地址截取，并统计出现次数,并按从大到小排序(腾讯)"></a>26.1 分析日志t.log(访问量)，将各个ip 地址截取，并统计出现次数,并按从大到小排序(腾讯)</h3><p><a target="_blank" rel="noopener" href="http://192.168.200.10/index1.html">http://192.168.200.10/index1.html</a><br><a target="_blank" rel="noopener" href="http://192.168.200.10/index2.html">http://192.168.200.10/index2.html</a><br><a target="_blank" rel="noopener" href="http://192.168.200.20/index1.html">http://192.168.200.20/index1.html</a><br><a target="_blank" rel="noopener" href="http://192.168.200.30/index1.html">http://192.168.200.30/index1.html</a><br><a target="_blank" rel="noopener" href="http://192.168.200.40/index1.html">http://192.168.200.40/index1.html</a><br><a target="_blank" rel="noopener" href="http://192.168.200.30/order.html">http://192.168.200.30/order.html</a><br><a target="_blank" rel="noopener" href="http://192.168.200.10/order.html">http://192.168.200.10/order.html</a><br>答案: cat t.txt | cut -d ‘/‘ -f 3 | sort | uniq -c | sort -nr</p>
<h3 id="26-2-统计连接到服务器的各个ip-情况，并按连接数从大到小排序-腾讯"><a href="#26-2-统计连接到服务器的各个ip-情况，并按连接数从大到小排序-腾讯" class="headerlink" title="26.2 统计连接到服务器的各个ip 情况，并按连接数从大到小排序(腾讯)"></a>26.2 统计连接到服务器的各个ip 情况，并按连接数从大到小排序(腾讯)</h3><p>netstat -an | grep ESTABLISHED | awk -F “ “ ‘{print $5}’ | cut -d “:” -f 1 | sort | uniq -c| sort -nr</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>redis 相关指令</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 重新加载系统服务</span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"># 开机启动</span><br><span class="line">system enable redis-server.service</span><br><span class="line"></span><br><span class="line"># 关闭redis-server</span><br><span class="line">system stop redis-server.service</span><br><span class="line"></span><br><span class="line"># 启动redis-server</span><br><span class="line">system start redis-server.service</span><br><span class="line"></span><br><span class="line"># 重新启动redis-server</span><br><span class="line">system restart redis-server.service</span><br><span class="line"></span><br><span class="line"># 查看redis-server运行状态</span><br><span class="line">system status redis-server.service</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

</div><div class="article-licensing box"><div class="licensing-title"><p>linux韩顺平2021笔记</p><p><a href="https://zeroornull.github.io/2021/04/09/linux韩顺平2021/">https://zeroornull.github.io/2021/04/09/linux韩顺平2021/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Zeroornull</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-04-09</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-08-02</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/linux/">linux</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=60667abe39329f00123aea68&amp;product=sticky-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="https://www.afdian.net/@zeroornull" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="https://qr.alipay.com/fkx00721flijbw5hdn0kab5" alt="支付宝"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/04/13/ES%E7%AC%94%E8%AE%B0/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">ES</span></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://z3.ax1x.com/2021/07/27/WhycSH.gif" alt="Zeroornull"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Zeroornull</p><p class="is-size-6 is-block">just one newbie</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>ShangHai</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">18</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">13</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/zeroornull" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/zeroornull"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/DeepLearning/"><span class="level-start"><span class="level-item">DeepLearning</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/SpringCloud/"><span class="level-start"><span class="level-item">SpringCloud</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/db2/"><span class="level-start"><span class="level-item">db2</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/eladmin/"><span class="level-start"><span class="level-item">eladmin</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/es/"><span class="level-start"><span class="level-item">es</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/githubpage/"><span class="level-start"><span class="level-item">githubpage</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/nginx/"><span class="level-start"><span class="level-item">nginx</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/redis/"><span class="level-start"><span class="level-item">redis</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/sql/"><span class="level-start"><span class="level-item">sql</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/"><span class="level-start"><span class="level-item">vue</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%B0%8F%E5%AD%A6%E7%94%9F%E4%BD%9C%E6%96%87-%E6%88%91%E7%9A%84%E7%94%9F%E6%B4%BB/"><span class="level-start"><span class="level-item">小学生作文-我的生活</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">算法</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-03T15:40:07.000Z">2021-08-03</time></p><p class="title"><a href="/2021/08/03/%E8%B7%AF%E4%B8%8A%E7%9A%84%E7%8B%97%E5%AD%90/">路上的狗子</a></p><p class="categories"><a href="/categories/%E5%B0%8F%E5%AD%A6%E7%94%9F%E4%BD%9C%E6%96%87-%E6%88%91%E7%9A%84%E7%94%9F%E6%B4%BB/">小学生作文-我的生活</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-29T14:25:07.000Z">2021-07-29</time></p><p class="title"><a href="/2021/07/29/%E6%99%9A%E4%B8%8A10%E7%82%B9%E5%87%BA%E9%97%A8%E6%90%9E%E5%A4%9C%E5%AE%B5/">晚上10点出门搞夜宵</a></p><p class="categories"><a href="/categories/%E5%B0%8F%E5%AD%A6%E7%94%9F%E4%BD%9C%E6%96%87-%E6%88%91%E7%9A%84%E7%94%9F%E6%B4%BB/">小学生作文-我的生活</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-26T06:00:16.000Z">2021-07-26</time></p><p class="title"><a href="/2021/07/26/%E4%BD%BF%E7%94%A8cloudflare%E5%8A%A0%E9%80%9FgithubPage/">使用cloudflare免费加速github page</a></p><p class="categories"><a href="/categories/githubpage/">githubpage</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-23T00:52:07.000Z">2021-07-23</time></p><p class="title"><a href="/2021/07/23/%E9%B8%B5%E9%B8%9F%E8%9B%8B/">鸵鸟蛋</a></p><p class="categories"><a href="/categories/%E5%B0%8F%E5%AD%A6%E7%94%9F%E4%BD%9C%E6%96%87-%E6%88%91%E7%9A%84%E7%94%9F%E6%B4%BB/">小学生作文-我的生活</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-06-25T07:07:08.000Z">2021-06-25</time></p><p class="title"><a href="/2021/06/25/%E6%94%B9%E9%80%A0eladmin%E4%B8%BA%E5%89%8D%E5%90%8E%E7%AB%AF%E4%B8%80%E8%B5%B7%E9%83%A8%E7%BD%B2/">改造eladmin为前后端一起部署</a></p><p class="categories"><a href="/categories/eladmin/">eladmin</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">六月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/DeepLearning/"><span class="tag">DeepLearning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SpringCloud/"><span class="tag">SpringCloud</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/db2/"><span class="tag">db2</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/eladmin/"><span class="tag">eladmin</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/es/"><span class="tag">es</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/githubpage/"><span class="tag">githubpage</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vue/"><span class="tag">vue</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B0%8F%E5%AD%A6%E7%94%9F%E4%BD%9C%E6%96%87-%E6%88%91%E7%9A%84%E7%94%9F%E6%B4%BB/"><span class="tag">小学生作文-我的生活</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Zeroornull</a><p class="is-size-7"><span>&copy; 2021 Zeroornull</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><a href="http://www.beian.miit.gov.cn/" target="_blank">皖ICP备2021011041号-1</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>